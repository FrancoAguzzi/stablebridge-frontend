(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[573],{98099:function(__unused_webpack_module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var int_1=__webpack_require__(97117);function writeUint16BE(value,out,offset){return void 0===out&&(out=new Uint8Array(2)),void 0===offset&&(offset=0),out[offset+0]=value>>>8,out[offset+1]=value>>>0,out}function writeUint16LE(value,out,offset){return void 0===out&&(out=new Uint8Array(2)),void 0===offset&&(offset=0),out[offset+0]=value>>>0,out[offset+1]=value>>>8,out}function readInt32BE(array,offset){return void 0===offset&&(offset=0),array[offset]<<24|array[offset+1]<<16|array[offset+2]<<8|array[offset+3]}function readUint32BE(array,offset){return void 0===offset&&(offset=0),(array[offset]<<24|array[offset+1]<<16|array[offset+2]<<8|array[offset+3])>>>0}function readInt32LE(array,offset){return void 0===offset&&(offset=0),array[offset+3]<<24|array[offset+2]<<16|array[offset+1]<<8|array[offset]}function readUint32LE(array,offset){return void 0===offset&&(offset=0),(array[offset+3]<<24|array[offset+2]<<16|array[offset+1]<<8|array[offset])>>>0}function writeUint32BE(value,out,offset){return void 0===out&&(out=new Uint8Array(4)),void 0===offset&&(offset=0),out[offset+0]=value>>>24,out[offset+1]=value>>>16,out[offset+2]=value>>>8,out[offset+3]=value>>>0,out}function writeUint32LE(value,out,offset){return void 0===out&&(out=new Uint8Array(4)),void 0===offset&&(offset=0),out[offset+0]=value>>>0,out[offset+1]=value>>>8,out[offset+2]=value>>>16,out[offset+3]=value>>>24,out}function writeUint64BE(value,out,offset){return void 0===out&&(out=new Uint8Array(8)),void 0===offset&&(offset=0),writeUint32BE(value/4294967296>>>0,out,offset),writeUint32BE(value>>>0,out,offset+4),out}function writeUint64LE(value,out,offset){return void 0===out&&(out=new Uint8Array(8)),void 0===offset&&(offset=0),writeUint32LE(value>>>0,out,offset),writeUint32LE(value/4294967296>>>0,out,offset+4),out}exports.readInt16BE=function(array,offset){return void 0===offset&&(offset=0),(array[offset+0]<<8|array[offset+1])<<16>>16},exports.readUint16BE=function(array,offset){return void 0===offset&&(offset=0),(array[offset+0]<<8|array[offset+1])>>>0},exports.readInt16LE=function(array,offset){return void 0===offset&&(offset=0),(array[offset+1]<<8|array[offset])<<16>>16},exports.readUint16LE=function(array,offset){return void 0===offset&&(offset=0),(array[offset+1]<<8|array[offset])>>>0},exports.writeUint16BE=writeUint16BE,exports.writeInt16BE=writeUint16BE,exports.writeUint16LE=writeUint16LE,exports.writeInt16LE=writeUint16LE,exports.readInt32BE=readInt32BE,exports.readUint32BE=readUint32BE,exports.readInt32LE=readInt32LE,exports.readUint32LE=readUint32LE,exports.writeUint32BE=writeUint32BE,exports.writeInt32BE=writeUint32BE,exports.writeUint32LE=writeUint32LE,exports.writeInt32LE=writeUint32LE,exports.readInt64BE=function(array,offset){void 0===offset&&(offset=0);var hi=readInt32BE(array,offset),lo=readInt32BE(array,offset+4);return 4294967296*hi+lo-(lo>>31)*4294967296},exports.readUint64BE=function(array,offset){return void 0===offset&&(offset=0),4294967296*readUint32BE(array,offset)+readUint32BE(array,offset+4)},exports.readInt64LE=function(array,offset){void 0===offset&&(offset=0);var lo=readInt32LE(array,offset);return 4294967296*readInt32LE(array,offset+4)+lo-(lo>>31)*4294967296},exports.readUint64LE=function(array,offset){void 0===offset&&(offset=0);var lo=readUint32LE(array,offset);return 4294967296*readUint32LE(array,offset+4)+lo},exports.writeUint64BE=writeUint64BE,exports.writeInt64BE=writeUint64BE,exports.writeUint64LE=writeUint64LE,exports.writeInt64LE=writeUint64LE,exports.readUintBE=function(bitLength,array,offset){if(void 0===offset&&(offset=0),bitLength%8!=0)throw Error("readUintBE supports only bitLengths divisible by 8");if(bitLength/8>array.length-offset)throw Error("readUintBE: array is too short for the given bitLength");for(var result=0,mul=1,i=bitLength/8+offset-1;i>=offset;i--)result+=array[i]*mul,mul*=256;return result},exports.readUintLE=function(bitLength,array,offset){if(void 0===offset&&(offset=0),bitLength%8!=0)throw Error("readUintLE supports only bitLengths divisible by 8");if(bitLength/8>array.length-offset)throw Error("readUintLE: array is too short for the given bitLength");for(var result=0,mul=1,i=offset;i<offset+bitLength/8;i++)result+=array[i]*mul,mul*=256;return result},exports.writeUintBE=function(bitLength,value,out,offset){if(void 0===out&&(out=new Uint8Array(bitLength/8)),void 0===offset&&(offset=0),bitLength%8!=0)throw Error("writeUintBE supports only bitLengths divisible by 8");if(!int_1.isSafeInteger(value))throw Error("writeUintBE value must be an integer");for(var div=1,i=bitLength/8+offset-1;i>=offset;i--)out[i]=value/div&255,div*=256;return out},exports.writeUintLE=function(bitLength,value,out,offset){if(void 0===out&&(out=new Uint8Array(bitLength/8)),void 0===offset&&(offset=0),bitLength%8!=0)throw Error("writeUintLE supports only bitLengths divisible by 8");if(!int_1.isSafeInteger(value))throw Error("writeUintLE value must be an integer");for(var div=1,i=offset;i<offset+bitLength/8;i++)out[i]=value/div&255,div*=256;return out},exports.readFloat32BE=function(array,offset){return void 0===offset&&(offset=0),new DataView(array.buffer,array.byteOffset,array.byteLength).getFloat32(offset)},exports.readFloat32LE=function(array,offset){return void 0===offset&&(offset=0),new DataView(array.buffer,array.byteOffset,array.byteLength).getFloat32(offset,!0)},exports.readFloat64BE=function(array,offset){return void 0===offset&&(offset=0),new DataView(array.buffer,array.byteOffset,array.byteLength).getFloat64(offset)},exports.readFloat64LE=function(array,offset){return void 0===offset&&(offset=0),new DataView(array.buffer,array.byteOffset,array.byteLength).getFloat64(offset,!0)},exports.writeFloat32BE=function(value,out,offset){return void 0===out&&(out=new Uint8Array(4)),void 0===offset&&(offset=0),new DataView(out.buffer,out.byteOffset,out.byteLength).setFloat32(offset,value),out},exports.writeFloat32LE=function(value,out,offset){return void 0===out&&(out=new Uint8Array(4)),void 0===offset&&(offset=0),new DataView(out.buffer,out.byteOffset,out.byteLength).setFloat32(offset,value,!0),out},exports.writeFloat64BE=function(value,out,offset){return void 0===out&&(out=new Uint8Array(8)),void 0===offset&&(offset=0),new DataView(out.buffer,out.byteOffset,out.byteLength).setFloat64(offset,value),out},exports.writeFloat64LE=function(value,out,offset){return void 0===out&&(out=new Uint8Array(8)),void 0===offset&&(offset=0),new DataView(out.buffer,out.byteOffset,out.byteLength).setFloat64(offset,value,!0),out}},25439:function(__unused_webpack_module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var binary_1=__webpack_require__(98099),wipe_1=__webpack_require__(17309);function streamXOR(key,nonce,src,dst,nonceInplaceCounterLength){if(void 0===nonceInplaceCounterLength&&(nonceInplaceCounterLength=0),32!==key.length)throw Error("ChaCha: key size must be 32 bytes");if(dst.length<src.length)throw Error("ChaCha: destination is shorter than source");if(0===nonceInplaceCounterLength){if(8!==nonce.length&&12!==nonce.length)throw Error("ChaCha nonce must be 8 or 12 bytes");counterLength=(nc=new Uint8Array(16)).length-nonce.length,nc.set(nonce,counterLength)}else{if(16!==nonce.length)throw Error("ChaCha nonce with counter must be 16 bytes");nc=nonce,counterLength=nonceInplaceCounterLength}for(var nc,counterLength,block=new Uint8Array(64),i=0;i<src.length;i+=64){!function(out,input,key){for(var j4=key[3]<<24|key[2]<<16|key[1]<<8|key[0],j5=key[7]<<24|key[6]<<16|key[5]<<8|key[4],j6=key[11]<<24|key[10]<<16|key[9]<<8|key[8],j7=key[15]<<24|key[14]<<16|key[13]<<8|key[12],j8=key[19]<<24|key[18]<<16|key[17]<<8|key[16],j9=key[23]<<24|key[22]<<16|key[21]<<8|key[20],j10=key[27]<<24|key[26]<<16|key[25]<<8|key[24],j11=key[31]<<24|key[30]<<16|key[29]<<8|key[28],j12=input[3]<<24|input[2]<<16|input[1]<<8|input[0],j13=input[7]<<24|input[6]<<16|input[5]<<8|input[4],j14=input[11]<<24|input[10]<<16|input[9]<<8|input[8],j15=input[15]<<24|input[14]<<16|input[13]<<8|input[12],x0=1634760805,x1=857760878,x2=2036477234,x3=1797285236,x4=j4,x5=j5,x6=j6,x7=j7,x8=j8,x9=j9,x10=j10,x11=j11,x12=j12,x13=j13,x14=j14,x15=j15,i=0;i<20;i+=2)x12^=x0=x0+x4|0,x4^=x8=x8+(x12=x12>>>16|x12<<16)|0,x4=x4>>>20|x4<<12,x13^=x1=x1+x5|0,x5^=x9=x9+(x13=x13>>>16|x13<<16)|0,x5=x5>>>20|x5<<12,x14^=x2=x2+x6|0,x6^=x10=x10+(x14=x14>>>16|x14<<16)|0,x6=x6>>>20|x6<<12,x15^=x3=x3+x7|0,x7^=x11=x11+(x15=x15>>>16|x15<<16)|0,x7=x7>>>20|x7<<12,x14^=x2=x2+x6|0,x6^=x10=x10+(x14=x14>>>24|x14<<8)|0,x6=x6>>>25|x6<<7,x15^=x3=x3+x7|0,x7^=x11=x11+(x15=x15>>>24|x15<<8)|0,x7=x7>>>25|x7<<7,x13^=x1=x1+x5|0,x5^=x9=x9+(x13=x13>>>24|x13<<8)|0,x5=x5>>>25|x5<<7,x12^=x0=x0+x4|0,x4^=x8=x8+(x12=x12>>>24|x12<<8)|0,x4=x4>>>25|x4<<7,x15^=x0=x0+x5|0,x5^=x10=x10+(x15=x15>>>16|x15<<16)|0,x5=x5>>>20|x5<<12,x12^=x1=x1+x6|0,x6^=x11=x11+(x12=x12>>>16|x12<<16)|0,x6=x6>>>20|x6<<12,x13^=x2=x2+x7|0,x7^=x8=x8+(x13=x13>>>16|x13<<16)|0,x7=x7>>>20|x7<<12,x14^=x3=x3+x4|0,x4^=x9=x9+(x14=x14>>>16|x14<<16)|0,x4=x4>>>20|x4<<12,x13^=x2=x2+x7|0,x7^=x8=x8+(x13=x13>>>24|x13<<8)|0,x7=x7>>>25|x7<<7,x14^=x3=x3+x4|0,x4^=x9=x9+(x14=x14>>>24|x14<<8)|0,x4=x4>>>25|x4<<7,x12^=x1=x1+x6|0,x6^=x11=x11+(x12=x12>>>24|x12<<8)|0,x6=x6>>>25|x6<<7,x15^=x0=x0+x5|0,x5^=x10=x10+(x15=x15>>>24|x15<<8)|0,x5=x5>>>25|x5<<7;binary_1.writeUint32LE(x0+1634760805|0,out,0),binary_1.writeUint32LE(x1+857760878|0,out,4),binary_1.writeUint32LE(x2+2036477234|0,out,8),binary_1.writeUint32LE(x3+1797285236|0,out,12),binary_1.writeUint32LE(x4+j4|0,out,16),binary_1.writeUint32LE(x5+j5|0,out,20),binary_1.writeUint32LE(x6+j6|0,out,24),binary_1.writeUint32LE(x7+j7|0,out,28),binary_1.writeUint32LE(x8+j8|0,out,32),binary_1.writeUint32LE(x9+j9|0,out,36),binary_1.writeUint32LE(x10+j10|0,out,40),binary_1.writeUint32LE(x11+j11|0,out,44),binary_1.writeUint32LE(x12+j12|0,out,48),binary_1.writeUint32LE(x13+j13|0,out,52),binary_1.writeUint32LE(x14+j14|0,out,56),binary_1.writeUint32LE(x15+j15|0,out,60)}(block,nc,key);for(var j=i;j<i+64&&j<src.length;j++)dst[j]=src[j]^block[j-i];!function(counter,pos,len){for(var carry=1;len--;)carry=carry+(255&counter[pos])|0,counter[pos]=255&carry,carry>>>=8,pos++;if(carry>0)throw Error("ChaCha: counter overflow")}(nc,0,counterLength)}return wipe_1.wipe(block),0===nonceInplaceCounterLength&&wipe_1.wipe(nc),dst}exports.streamXOR=streamXOR,exports.stream=function(key,nonce,dst,nonceInplaceCounterLength){return void 0===nonceInplaceCounterLength&&(nonceInplaceCounterLength=0),wipe_1.wipe(dst),streamXOR(key,nonce,dst,dst,nonceInplaceCounterLength)}},15501:function(__unused_webpack_module,exports,__webpack_require__){"use strict";var chacha_1=__webpack_require__(25439),poly1305_1=__webpack_require__(63027),wipe_1=__webpack_require__(17309),binary_1=__webpack_require__(98099),constant_time_1=__webpack_require__(4153);exports.Cv=32,exports.WH=12,exports.pg=16;var ZEROS=new Uint8Array(16),ChaCha20Poly1305=function(){function ChaCha20Poly1305(key){if(this.nonceLength=exports.WH,this.tagLength=exports.pg,key.length!==exports.Cv)throw Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(key)}return ChaCha20Poly1305.prototype.seal=function(nonce,plaintext,associatedData,dst){if(nonce.length>16)throw Error("ChaCha20Poly1305: incorrect nonce length");var result,counter=new Uint8Array(16);counter.set(nonce,counter.length-nonce.length);var authKey=new Uint8Array(32);chacha_1.stream(this._key,counter,authKey,4);var resultLength=plaintext.length+this.tagLength;if(dst){if(dst.length!==resultLength)throw Error("ChaCha20Poly1305: incorrect destination length");result=dst}else result=new Uint8Array(resultLength);return chacha_1.streamXOR(this._key,counter,plaintext,result,4),this._authenticate(result.subarray(result.length-this.tagLength,result.length),authKey,result.subarray(0,result.length-this.tagLength),associatedData),wipe_1.wipe(counter),result},ChaCha20Poly1305.prototype.open=function(nonce,sealed,associatedData,dst){if(nonce.length>16)throw Error("ChaCha20Poly1305: incorrect nonce length");if(sealed.length<this.tagLength)return null;var result,counter=new Uint8Array(16);counter.set(nonce,counter.length-nonce.length);var authKey=new Uint8Array(32);chacha_1.stream(this._key,counter,authKey,4);var calculatedTag=new Uint8Array(this.tagLength);if(this._authenticate(calculatedTag,authKey,sealed.subarray(0,sealed.length-this.tagLength),associatedData),!constant_time_1.equal(calculatedTag,sealed.subarray(sealed.length-this.tagLength,sealed.length)))return null;var resultLength=sealed.length-this.tagLength;if(dst){if(dst.length!==resultLength)throw Error("ChaCha20Poly1305: incorrect destination length");result=dst}else result=new Uint8Array(resultLength);return chacha_1.streamXOR(this._key,counter,sealed.subarray(0,sealed.length-this.tagLength),result,4),wipe_1.wipe(counter),result},ChaCha20Poly1305.prototype.clean=function(){return wipe_1.wipe(this._key),this},ChaCha20Poly1305.prototype._authenticate=function(tagOut,authKey,ciphertext,associatedData){var h=new poly1305_1.Poly1305(authKey);associatedData&&(h.update(associatedData),associatedData.length%16>0&&h.update(ZEROS.subarray(associatedData.length%16))),h.update(ciphertext),ciphertext.length%16>0&&h.update(ZEROS.subarray(ciphertext.length%16));var length=new Uint8Array(8);associatedData&&binary_1.writeUint64LE(associatedData.length,length),h.update(length),binary_1.writeUint64LE(ciphertext.length,length),h.update(length);for(var tag=h.digest(),i=0;i<tag.length;i++)tagOut[i]=tag[i];h.clean(),wipe_1.wipe(tag),wipe_1.wipe(length)},ChaCha20Poly1305}();exports.OK=ChaCha20Poly1305},4153:function(__unused_webpack_module,exports){"use strict";function compare(a,b){if(a.length!==b.length)return 0;for(var result=0,i=0;i<a.length;i++)result|=a[i]^b[i];return 1&result-1>>>8}Object.defineProperty(exports,"__esModule",{value:!0}),exports.select=function(subject,resultIfOne,resultIfZero){return~(subject-1)&resultIfOne|subject-1&resultIfZero},exports.lessOrEqual=function(a,b){return(0|a)-(0|b)-1>>>31&1},exports.compare=compare,exports.equal=function(a,b){return 0!==a.length&&0!==b.length&&0!==compare(a,b)}},31050:function(__unused_webpack_module,exports,__webpack_require__){"use strict";exports.Xx=exports._w=exports.aP=exports.KS=exports.jQ=void 0,__webpack_require__(31416);let sha512_1=__webpack_require__(93350);function gf(init){let r=new Float64Array(16);if(init)for(let i=0;i<init.length;i++)r[i]=init[i];return r}__webpack_require__(17309),exports.jQ=64,exports.KS=64,exports.aP=32;let _9=new Uint8Array(32);_9[0]=9;let gf0=gf(),gf1=gf([1]),D2=(gf([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),gf([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222])),X=gf([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),Y=gf([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]);function set25519(r,a){for(let i=0;i<16;i++)r[i]=0|a[i]}function car25519(o){let c=1;for(let i=0;i<16;i++){let v=o[i]+c+65535;c=Math.floor(v/65536),o[i]=v-65536*c}o[0]+=c-1+37*(c-1)}function sel25519(p,q,b){let c=~(b-1);for(let i=0;i<16;i++){let t=c&(p[i]^q[i]);p[i]^=t,q[i]^=t}}function pack25519(o,n){let m=gf(),t=gf();for(let i=0;i<16;i++)t[i]=n[i];car25519(t),car25519(t),car25519(t);for(let j=0;j<2;j++){m[0]=t[0]-65517;for(let i1=1;i1<15;i1++)m[i1]=t[i1]-65535-(m[i1-1]>>16&1),m[i1-1]&=65535;m[15]=t[15]-32767-(m[14]>>16&1);let b=m[15]>>16&1;m[14]&=65535,sel25519(t,m,1-b)}for(let i2=0;i2<16;i2++)o[2*i2]=255&t[i2],o[2*i2+1]=t[i2]>>8}gf([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function add(o,a,b){for(let i=0;i<16;i++)o[i]=a[i]+b[i]}function sub(o,a,b){for(let i=0;i<16;i++)o[i]=a[i]-b[i]}function mul(o,a,b){let v,c,t0=0,t1=0,t2=0,t3=0,t4=0,t5=0,t6=0,t7=0,t8=0,t9=0,t10=0,t11=0,t12=0,t13=0,t14=0,t15=0,t16=0,t17=0,t18=0,t19=0,t20=0,t21=0,t22=0,t23=0,t24=0,t25=0,t26=0,t27=0,t28=0,t29=0,t30=0,b0=b[0],b1=b[1],b2=b[2],b3=b[3],b4=b[4],b5=b[5],b6=b[6],b7=b[7],b8=b[8],b9=b[9],b10=b[10],b11=b[11],b12=b[12],b13=b[13],b14=b[14],b15=b[15];t0+=(v=a[0])*b0,t1+=v*b1,t2+=v*b2,t3+=v*b3,t4+=v*b4,t5+=v*b5,t6+=v*b6,t7+=v*b7,t8+=v*b8,t9+=v*b9,t10+=v*b10,t11+=v*b11,t12+=v*b12,t13+=v*b13,t14+=v*b14,t15+=v*b15,t1+=(v=a[1])*b0,t2+=v*b1,t3+=v*b2,t4+=v*b3,t5+=v*b4,t6+=v*b5,t7+=v*b6,t8+=v*b7,t9+=v*b8,t10+=v*b9,t11+=v*b10,t12+=v*b11,t13+=v*b12,t14+=v*b13,t15+=v*b14,t16+=v*b15,t2+=(v=a[2])*b0,t3+=v*b1,t4+=v*b2,t5+=v*b3,t6+=v*b4,t7+=v*b5,t8+=v*b6,t9+=v*b7,t10+=v*b8,t11+=v*b9,t12+=v*b10,t13+=v*b11,t14+=v*b12,t15+=v*b13,t16+=v*b14,t17+=v*b15,t3+=(v=a[3])*b0,t4+=v*b1,t5+=v*b2,t6+=v*b3,t7+=v*b4,t8+=v*b5,t9+=v*b6,t10+=v*b7,t11+=v*b8,t12+=v*b9,t13+=v*b10,t14+=v*b11,t15+=v*b12,t16+=v*b13,t17+=v*b14,t18+=v*b15,t4+=(v=a[4])*b0,t5+=v*b1,t6+=v*b2,t7+=v*b3,t8+=v*b4,t9+=v*b5,t10+=v*b6,t11+=v*b7,t12+=v*b8,t13+=v*b9,t14+=v*b10,t15+=v*b11,t16+=v*b12,t17+=v*b13,t18+=v*b14,t19+=v*b15,t5+=(v=a[5])*b0,t6+=v*b1,t7+=v*b2,t8+=v*b3,t9+=v*b4,t10+=v*b5,t11+=v*b6,t12+=v*b7,t13+=v*b8,t14+=v*b9,t15+=v*b10,t16+=v*b11,t17+=v*b12,t18+=v*b13,t19+=v*b14,t20+=v*b15,t6+=(v=a[6])*b0,t7+=v*b1,t8+=v*b2,t9+=v*b3,t10+=v*b4,t11+=v*b5,t12+=v*b6,t13+=v*b7,t14+=v*b8,t15+=v*b9,t16+=v*b10,t17+=v*b11,t18+=v*b12,t19+=v*b13,t20+=v*b14,t21+=v*b15,t7+=(v=a[7])*b0,t8+=v*b1,t9+=v*b2,t10+=v*b3,t11+=v*b4,t12+=v*b5,t13+=v*b6,t14+=v*b7,t15+=v*b8,t16+=v*b9,t17+=v*b10,t18+=v*b11,t19+=v*b12,t20+=v*b13,t21+=v*b14,t22+=v*b15,t8+=(v=a[8])*b0,t9+=v*b1,t10+=v*b2,t11+=v*b3,t12+=v*b4,t13+=v*b5,t14+=v*b6,t15+=v*b7,t16+=v*b8,t17+=v*b9,t18+=v*b10,t19+=v*b11,t20+=v*b12,t21+=v*b13,t22+=v*b14,t23+=v*b15,t9+=(v=a[9])*b0,t10+=v*b1,t11+=v*b2,t12+=v*b3,t13+=v*b4,t14+=v*b5,t15+=v*b6,t16+=v*b7,t17+=v*b8,t18+=v*b9,t19+=v*b10,t20+=v*b11,t21+=v*b12,t22+=v*b13,t23+=v*b14,t24+=v*b15,t10+=(v=a[10])*b0,t11+=v*b1,t12+=v*b2,t13+=v*b3,t14+=v*b4,t15+=v*b5,t16+=v*b6,t17+=v*b7,t18+=v*b8,t19+=v*b9,t20+=v*b10,t21+=v*b11,t22+=v*b12,t23+=v*b13,t24+=v*b14,t25+=v*b15,t11+=(v=a[11])*b0,t12+=v*b1,t13+=v*b2,t14+=v*b3,t15+=v*b4,t16+=v*b5,t17+=v*b6,t18+=v*b7,t19+=v*b8,t20+=v*b9,t21+=v*b10,t22+=v*b11,t23+=v*b12,t24+=v*b13,t25+=v*b14,t26+=v*b15,t12+=(v=a[12])*b0,t13+=v*b1,t14+=v*b2,t15+=v*b3,t16+=v*b4,t17+=v*b5,t18+=v*b6,t19+=v*b7,t20+=v*b8,t21+=v*b9,t22+=v*b10,t23+=v*b11,t24+=v*b12,t25+=v*b13,t26+=v*b14,t27+=v*b15,t13+=(v=a[13])*b0,t14+=v*b1,t15+=v*b2,t16+=v*b3,t17+=v*b4,t18+=v*b5,t19+=v*b6,t20+=v*b7,t21+=v*b8,t22+=v*b9,t23+=v*b10,t24+=v*b11,t25+=v*b12,t26+=v*b13,t27+=v*b14,t28+=v*b15,t14+=(v=a[14])*b0,t15+=v*b1,t16+=v*b2,t17+=v*b3,t18+=v*b4,t19+=v*b5,t20+=v*b6,t21+=v*b7,t22+=v*b8,t23+=v*b9,t24+=v*b10,t25+=v*b11,t26+=v*b12,t27+=v*b13,t28+=v*b14,t29+=v*b15,t15+=(v=a[15])*b0,t16+=v*b1,t17+=v*b2,t18+=v*b3,t19+=v*b4,t20+=v*b5,t21+=v*b6,t22+=v*b7,t23+=v*b8,t24+=v*b9,t25+=v*b10,t26+=v*b11,t27+=v*b12,t28+=v*b13,t29+=v*b14,t30+=v*b15,t0+=38*t16,t1+=38*t17,t2+=38*t18,t3+=38*t19,t4+=38*t20,t5+=38*t21,t6+=38*t22,t7+=38*t23,t8+=38*t24,t9+=38*t25,t10+=38*t26,t11+=38*t27,t12+=38*t28,t13+=38*t29,t14+=38*t30,c=Math.floor((v=t0+(c=1)+65535)/65536),t0=v-65536*c,c=Math.floor((v=t1+c+65535)/65536),t1=v-65536*c,c=Math.floor((v=t2+c+65535)/65536),t2=v-65536*c,c=Math.floor((v=t3+c+65535)/65536),t3=v-65536*c,c=Math.floor((v=t4+c+65535)/65536),t4=v-65536*c,c=Math.floor((v=t5+c+65535)/65536),t5=v-65536*c,c=Math.floor((v=t6+c+65535)/65536),t6=v-65536*c,c=Math.floor((v=t7+c+65535)/65536),t7=v-65536*c,c=Math.floor((v=t8+c+65535)/65536),t8=v-65536*c,c=Math.floor((v=t9+c+65535)/65536),t9=v-65536*c,c=Math.floor((v=t10+c+65535)/65536),t10=v-65536*c,c=Math.floor((v=t11+c+65535)/65536),t11=v-65536*c,c=Math.floor((v=t12+c+65535)/65536),t12=v-65536*c,c=Math.floor((v=t13+c+65535)/65536),t13=v-65536*c,c=Math.floor((v=t14+c+65535)/65536),t14=v-65536*c,c=Math.floor((v=t15+c+65535)/65536),t15=v-65536*c,t0+=c-1+37*(c-1),c=Math.floor((v=t0+(c=1)+65535)/65536),t0=v-65536*c,c=Math.floor((v=t1+c+65535)/65536),t1=v-65536*c,c=Math.floor((v=t2+c+65535)/65536),t2=v-65536*c,c=Math.floor((v=t3+c+65535)/65536),t3=v-65536*c,c=Math.floor((v=t4+c+65535)/65536),t4=v-65536*c,c=Math.floor((v=t5+c+65535)/65536),t5=v-65536*c,c=Math.floor((v=t6+c+65535)/65536),t6=v-65536*c,c=Math.floor((v=t7+c+65535)/65536),t7=v-65536*c,c=Math.floor((v=t8+c+65535)/65536),t8=v-65536*c,c=Math.floor((v=t9+c+65535)/65536),t9=v-65536*c,c=Math.floor((v=t10+c+65535)/65536),t10=v-65536*c,c=Math.floor((v=t11+c+65535)/65536),t11=v-65536*c,c=Math.floor((v=t12+c+65535)/65536),t12=v-65536*c,c=Math.floor((v=t13+c+65535)/65536),t13=v-65536*c,c=Math.floor((v=t14+c+65535)/65536),t14=v-65536*c,c=Math.floor((v=t15+c+65535)/65536),t15=v-65536*c,t0+=c-1+37*(c-1),o[0]=t0,o[1]=t1,o[2]=t2,o[3]=t3,o[4]=t4,o[5]=t5,o[6]=t6,o[7]=t7,o[8]=t8,o[9]=t9,o[10]=t10,o[11]=t11,o[12]=t12,o[13]=t13,o[14]=t14,o[15]=t15}function edadd(p,q){let a=gf(),b=gf(),c=gf(),d=gf(),e=gf(),f=gf(),g=gf(),h=gf(),t=gf();sub(a,p[1],p[0]),sub(t,q[1],q[0]),mul(a,a,t),add(b,p[0],p[1]),add(t,q[0],q[1]),mul(b,b,t),mul(c,p[3],q[3]),mul(c,c,D2),mul(d,p[2],q[2]),add(d,d,d),sub(e,b,a),sub(f,d,c),add(g,d,c),add(h,b,a),mul(p[0],e,f),mul(p[1],h,g),mul(p[2],g,f),mul(p[3],e,h)}function cswap(p,q,b){for(let i=0;i<4;i++)sel25519(p[i],q[i],b)}function pack(r,p){let tx=gf(),ty=gf(),zi=gf();(function(o,i){let a;let c=gf();for(a=0;a<16;a++)c[a]=i[a];for(a=253;a>=0;a--)mul(c,c,c),2!==a&&4!==a&&mul(c,c,i);for(a=0;a<16;a++)o[a]=c[a]})(zi,p[2]),mul(tx,p[0],zi),mul(ty,p[1],zi),pack25519(r,ty),r[31]^=function(a){let d=new Uint8Array(32);return pack25519(d,a),1&d[0]}(tx)<<7}function scalarbase(p,s){let q=[gf(),gf(),gf(),gf()];set25519(q[0],X),set25519(q[1],Y),set25519(q[2],gf1),mul(q[3],X,Y),function(p,q,s){set25519(p[0],gf0),set25519(p[1],gf1),set25519(p[2],gf1),set25519(p[3],gf0);for(let i=255;i>=0;--i){let b=s[i/8|0]>>(7&i)&1;cswap(p,q,b),edadd(q,p),edadd(p,p),cswap(p,q,b)}}(p,q,s)}exports._w=function(seed){if(seed.length!==exports.aP)throw Error(`ed25519: seed must be ${exports.aP} bytes`);let d=(0,sha512_1.hash)(seed);d[0]&=248,d[31]&=127,d[31]|=64;let publicKey=new Uint8Array(32),p=[gf(),gf(),gf(),gf()];scalarbase(p,d),pack(publicKey,p);let secretKey=new Uint8Array(64);return secretKey.set(seed),secretKey.set(publicKey,32),{publicKey,secretKey}};let L=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function modL(r,x){let carry,i,j,k;for(i=63;i>=32;--i){for(carry=0,j=i-32,k=i-12;j<k;++j)x[j]+=carry-16*x[i]*L[j-(i-32)],carry=Math.floor((x[j]+128)/256),x[j]-=256*carry;x[j]+=carry,x[i]=0}for(j=0,carry=0;j<32;j++)x[j]+=carry-(x[31]>>4)*L[j],carry=x[j]>>8,x[j]&=255;for(j=0;j<32;j++)x[j]-=carry*L[j];for(i=0;i<32;i++)x[i+1]+=x[i]>>8,r[i]=255&x[i]}function reduce(r){let x=new Float64Array(64);for(let i=0;i<64;i++)x[i]=r[i];for(let i1=0;i1<64;i1++)r[i1]=0;modL(r,x)}exports.Xx=function(secretKey,message){let x=new Float64Array(64),p=[gf(),gf(),gf(),gf()],d=(0,sha512_1.hash)(secretKey.subarray(0,32));d[0]&=248,d[31]&=127,d[31]|=64;let signature=new Uint8Array(64);signature.set(d.subarray(32),32);let hs=new sha512_1.SHA512;hs.update(signature.subarray(32)),hs.update(message);let r=hs.digest();hs.clean(),reduce(r),scalarbase(p,r),pack(signature,p),hs.reset(),hs.update(signature.subarray(0,32)),hs.update(secretKey.subarray(32)),hs.update(message);let h=hs.digest();reduce(h);for(let i=0;i<32;i++)x[i]=r[i];for(let i1=0;i1<32;i1++)for(let j=0;j<32;j++)x[i1+j]+=h[i1]*d[j];return modL(signature.subarray(32),x),signature}},79984:function(__unused_webpack_module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isSerializableHash=function(h){return void 0!==h.saveState&&void 0!==h.restoreState&&void 0!==h.cleanSavedState}},512:function(__unused_webpack_module,exports,__webpack_require__){"use strict";var hmac_1=__webpack_require__(25629),wipe_1=__webpack_require__(17309),HKDF=function(){function HKDF(hash,key,salt,info){void 0===salt&&(salt=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=hash,this._info=info;var okm=hmac_1.hmac(this._hash,salt,key);this._hmac=new hmac_1.HMAC(hash,okm),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return HKDF.prototype._fillBuffer=function(){this._counter[0]++;var ctr=this._counter[0];if(0===ctr)throw Error("hkdf: cannot expand more");this._hmac.reset(),ctr>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},HKDF.prototype.expand=function(length){for(var out=new Uint8Array(length),i=0;i<out.length;i++)this._bufpos===this._buffer.length&&this._fillBuffer(),out[i]=this._buffer[this._bufpos++];return out},HKDF.prototype.clean=function(){this._hmac.clean(),wipe_1.wipe(this._buffer),wipe_1.wipe(this._counter),this._bufpos=0},HKDF}();exports.t=HKDF},25629:function(__unused_webpack_module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var hash_1=__webpack_require__(79984),constant_time_1=__webpack_require__(4153),wipe_1=__webpack_require__(17309),HMAC=function(){function HMAC(hash,key){this._finished=!1,this._inner=new hash,this._outer=new hash,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var pad=new Uint8Array(this.blockSize);key.length>this.blockSize?this._inner.update(key).finish(pad).clean():pad.set(key);for(var i=0;i<pad.length;i++)pad[i]^=54;this._inner.update(pad);for(var i=0;i<pad.length;i++)pad[i]^=106;this._outer.update(pad),hash_1.isSerializableHash(this._inner)&&hash_1.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),wipe_1.wipe(pad)}return HMAC.prototype.reset=function(){if(!hash_1.isSerializableHash(this._inner)||!hash_1.isSerializableHash(this._outer))throw Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},HMAC.prototype.clean=function(){hash_1.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),hash_1.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},HMAC.prototype.update=function(data){return this._inner.update(data),this},HMAC.prototype.finish=function(out){return this._finished?(this._outer.finish(out),this):(this._inner.finish(out),this._outer.update(out.subarray(0,this.digestLength)).finish(out),this._finished=!0,this)},HMAC.prototype.digest=function(){var out=new Uint8Array(this.digestLength);return this.finish(out),out},HMAC.prototype.saveState=function(){if(!hash_1.isSerializableHash(this._inner))throw Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},HMAC.prototype.restoreState=function(savedState){if(!hash_1.isSerializableHash(this._inner)||!hash_1.isSerializableHash(this._outer))throw Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(savedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},HMAC.prototype.cleanSavedState=function(savedState){if(!hash_1.isSerializableHash(this._inner))throw Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(savedState)},HMAC}();exports.HMAC=HMAC,exports.hmac=function(hash,key,data){var h=new HMAC(hash,key);h.update(data);var digest=h.digest();return h.clean(),digest},exports.equal=constant_time_1.equal},97117:function(__unused_webpack_module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mul=Math.imul||function(a,b){var al=65535&a,bl=65535&b;return al*bl+((a>>>16&65535)*bl+al*(b>>>16&65535)<<16>>>0)|0},exports.add=function(a,b){return a+b|0},exports.sub=function(a,b){return a-b|0},exports.rotl=function(x,n){return x<<n|x>>>32-n},exports.rotr=function(x,n){return x<<32-n|x>>>n},exports.isInteger=Number.isInteger||function(n){return"number"==typeof n&&isFinite(n)&&Math.floor(n)===n},exports.MAX_SAFE_INTEGER=9007199254740991,exports.isSafeInteger=function(n){return exports.isInteger(n)&&n>=-exports.MAX_SAFE_INTEGER&&n<=exports.MAX_SAFE_INTEGER}},63027:function(__unused_webpack_module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var constant_time_1=__webpack_require__(4153),wipe_1=__webpack_require__(17309);exports.DIGEST_LENGTH=16;var Poly1305=function(){function Poly1305(key){this.digestLength=exports.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var t0=key[0]|key[1]<<8;this._r[0]=8191&t0;var t1=key[2]|key[3]<<8;this._r[1]=(t0>>>13|t1<<3)&8191;var t2=key[4]|key[5]<<8;this._r[2]=(t1>>>10|t2<<6)&7939;var t3=key[6]|key[7]<<8;this._r[3]=(t2>>>7|t3<<9)&8191;var t4=key[8]|key[9]<<8;this._r[4]=(t3>>>4|t4<<12)&255,this._r[5]=t4>>>1&8190;var t5=key[10]|key[11]<<8;this._r[6]=(t4>>>14|t5<<2)&8191;var t6=key[12]|key[13]<<8;this._r[7]=(t5>>>11|t6<<5)&8065;var t7=key[14]|key[15]<<8;this._r[8]=(t6>>>8|t7<<8)&8191,this._r[9]=t7>>>5&127,this._pad[0]=key[16]|key[17]<<8,this._pad[1]=key[18]|key[19]<<8,this._pad[2]=key[20]|key[21]<<8,this._pad[3]=key[22]|key[23]<<8,this._pad[4]=key[24]|key[25]<<8,this._pad[5]=key[26]|key[27]<<8,this._pad[6]=key[28]|key[29]<<8,this._pad[7]=key[30]|key[31]<<8}return Poly1305.prototype._blocks=function(m,mpos,bytes){for(var hibit=this._fin?0:2048,h0=this._h[0],h1=this._h[1],h2=this._h[2],h3=this._h[3],h4=this._h[4],h5=this._h[5],h6=this._h[6],h7=this._h[7],h8=this._h[8],h9=this._h[9],r0=this._r[0],r1=this._r[1],r2=this._r[2],r3=this._r[3],r4=this._r[4],r5=this._r[5],r6=this._r[6],r7=this._r[7],r8=this._r[8],r9=this._r[9];bytes>=16;){var d0,t0=m[mpos+0]|m[mpos+1]<<8;h0+=8191&t0;var t1=m[mpos+2]|m[mpos+3]<<8;h1+=(t0>>>13|t1<<3)&8191;var t2=m[mpos+4]|m[mpos+5]<<8;h2+=(t1>>>10|t2<<6)&8191;var t3=m[mpos+6]|m[mpos+7]<<8;h3+=(t2>>>7|t3<<9)&8191;var t4=m[mpos+8]|m[mpos+9]<<8;h4+=(t3>>>4|t4<<12)&8191,h5+=t4>>>1&8191;var t5=m[mpos+10]|m[mpos+11]<<8;h6+=(t4>>>14|t5<<2)&8191;var t6=m[mpos+12]|m[mpos+13]<<8;h7+=(t5>>>11|t6<<5)&8191;var t7=m[mpos+14]|m[mpos+15]<<8;h8+=(t6>>>8|t7<<8)&8191,h9+=t7>>>5|hibit;var c=0;c=(d0=0+h0*r0+h1*(5*r9)+h2*(5*r8)+h3*(5*r7)+h4*(5*r6))>>>13,d0&=8191,c+=(d0=h5*(5*r5)+h6*(5*r4)+h7*(5*r3)+h8*(5*r2)+h9*(5*r1))>>>13,d0&=8191;var d1=c;c=(d1=h0*r1+h1*r0+h2*(5*r9)+h3*(5*r8)+h4*(5*r7))>>>13,d1&=8191,c+=(d1=h5*(5*r6)+h6*(5*r5)+h7*(5*r4)+h8*(5*r3)+h9*(5*r2))>>>13,d1&=8191;var d2=c;c=(d2=h0*r2+h1*r1+h2*r0+h3*(5*r9)+h4*(5*r8))>>>13,d2&=8191,c+=(d2=h5*(5*r7)+h6*(5*r6)+h7*(5*r5)+h8*(5*r4)+h9*(5*r3))>>>13,d2&=8191;var d3=c;c=(d3=h0*r3+h1*r2+h2*r1+h3*r0+h4*(5*r9))>>>13,d3&=8191,c+=(d3=h5*(5*r8)+h6*(5*r7)+h7*(5*r6)+h8*(5*r5)+h9*(5*r4))>>>13,d3&=8191;var d4=c;c=(d4=h0*r4+h1*r3+h2*r2+h3*r1+h4*r0)>>>13,d4&=8191,c+=(d4=h5*(5*r9)+h6*(5*r8)+h7*(5*r7)+h8*(5*r6)+h9*(5*r5))>>>13,d4&=8191;var d5=c;c=(d5=h0*r5+h1*r4+h2*r3+h3*r2+h4*r1)>>>13,d5&=8191,c+=(d5=h5*r0+h6*(5*r9)+h7*(5*r8)+h8*(5*r7)+h9*(5*r6))>>>13,d5&=8191;var d6=c;c=(d6=h0*r6+h1*r5+h2*r4+h3*r3+h4*r2)>>>13,d6&=8191,c+=(d6=h5*r1+h6*r0+h7*(5*r9)+h8*(5*r8)+h9*(5*r7))>>>13,d6&=8191;var d7=c;c=(d7=h0*r7+h1*r6+h2*r5+h3*r4+h4*r3)>>>13,d7&=8191,c+=(d7=h5*r2+h6*r1+h7*r0+h8*(5*r9)+h9*(5*r8))>>>13,d7&=8191;var d8=c;c=(d8=h0*r8+h1*r7+h2*r6+h3*r5+h4*r4)>>>13,d8&=8191,c+=(d8=h5*r3+h6*r2+h7*r1+h8*r0+h9*(5*r9))>>>13,d8&=8191;var d9=c;c=(d9=h0*r9+h1*r8+h2*r7+h3*r6+h4*r5)>>>13,d9&=8191,c+=(d9=h5*r4+h6*r3+h7*r2+h8*r1+h9*r0)>>>13,d9&=8191,d0=8191&(c=(c=(c<<2)+c|0)+d0|0),c>>>=13,d1+=c,h0=d0,h1=d1,h2=d2,h3=d3,h4=d4,h5=d5,h6=d6,h7=d7,h8=d8,h9=d9,mpos+=16,bytes-=16}this._h[0]=h0,this._h[1]=h1,this._h[2]=h2,this._h[3]=h3,this._h[4]=h4,this._h[5]=h5,this._h[6]=h6,this._h[7]=h7,this._h[8]=h8,this._h[9]=h9},Poly1305.prototype.finish=function(mac,macpos){void 0===macpos&&(macpos=0);var c,mask,f,i,g=new Uint16Array(10);if(this._leftover){for(i=this._leftover,this._buffer[i++]=1;i<16;i++)this._buffer[i]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(c=this._h[1]>>>13,this._h[1]&=8191,i=2;i<10;i++)this._h[i]+=c,c=this._h[i]>>>13,this._h[i]&=8191;for(this._h[0]+=5*c,c=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=c,c=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=c,g[0]=this._h[0]+5,c=g[0]>>>13,g[0]&=8191,i=1;i<10;i++)g[i]=this._h[i]+c,c=g[i]>>>13,g[i]&=8191;for(g[9]-=8192,mask=(1^c)-1,i=0;i<10;i++)g[i]&=mask;for(i=0,mask=~mask;i<10;i++)this._h[i]=this._h[i]&mask|g[i];for(i=1,this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,f=this._h[0]+this._pad[0],this._h[0]=65535&f;i<8;i++)f=(this._h[i]+this._pad[i]|0)+(f>>>16)|0,this._h[i]=65535&f;return mac[macpos+0]=this._h[0]>>>0,mac[macpos+1]=this._h[0]>>>8,mac[macpos+2]=this._h[1]>>>0,mac[macpos+3]=this._h[1]>>>8,mac[macpos+4]=this._h[2]>>>0,mac[macpos+5]=this._h[2]>>>8,mac[macpos+6]=this._h[3]>>>0,mac[macpos+7]=this._h[3]>>>8,mac[macpos+8]=this._h[4]>>>0,mac[macpos+9]=this._h[4]>>>8,mac[macpos+10]=this._h[5]>>>0,mac[macpos+11]=this._h[5]>>>8,mac[macpos+12]=this._h[6]>>>0,mac[macpos+13]=this._h[6]>>>8,mac[macpos+14]=this._h[7]>>>0,mac[macpos+15]=this._h[7]>>>8,this._finished=!0,this},Poly1305.prototype.update=function(m){var want,mpos=0,bytes=m.length;if(this._leftover){(want=16-this._leftover)>bytes&&(want=bytes);for(var i=0;i<want;i++)this._buffer[this._leftover+i]=m[mpos+i];if(bytes-=want,mpos+=want,this._leftover+=want,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(bytes>=16&&(want=bytes-bytes%16,this._blocks(m,mpos,want),mpos+=want,bytes-=want),bytes){for(var i=0;i<bytes;i++)this._buffer[this._leftover+i]=m[mpos+i];this._leftover+=bytes}return this},Poly1305.prototype.digest=function(){if(this._finished)throw Error("Poly1305 was finished");var mac=new Uint8Array(16);return this.finish(mac),mac},Poly1305.prototype.clean=function(){return wipe_1.wipe(this._buffer),wipe_1.wipe(this._r),wipe_1.wipe(this._h),wipe_1.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},Poly1305}();exports.Poly1305=Poly1305,exports.oneTimeAuth=function(key,data){var h=new Poly1305(key);h.update(data);var digest=h.digest();return h.clean(),digest},exports.equal=function(a,b){return a.length===exports.DIGEST_LENGTH&&b.length===exports.DIGEST_LENGTH&&constant_time_1.equal(a,b)}},31416:function(__unused_webpack_module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.randomStringForEntropy=exports.randomString=exports.randomUint32=exports.randomBytes=exports.defaultRandomSource=void 0;let system_1=__webpack_require__(46008),binary_1=__webpack_require__(98099),wipe_1=__webpack_require__(17309);function randomBytes(length,prng=exports.defaultRandomSource){return prng.randomBytes(length)}exports.defaultRandomSource=new system_1.SystemRandomSource,exports.randomBytes=randomBytes,exports.randomUint32=function(prng=exports.defaultRandomSource){let buf=randomBytes(4,prng),result=(0,binary_1.readUint32LE)(buf);return(0,wipe_1.wipe)(buf),result};let ALPHANUMERIC="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function randomString(length,charset=ALPHANUMERIC,prng=exports.defaultRandomSource){if(charset.length<2)throw Error("randomString charset is too short");if(charset.length>256)throw Error("randomString charset is too long");let out="",charsLen=charset.length,maxByte=256-256%charsLen;for(;length>0;){let buf=randomBytes(Math.ceil(256*length/maxByte),prng);for(let i=0;i<buf.length&&length>0;i++){let randomByte=buf[i];randomByte<maxByte&&(out+=charset.charAt(randomByte%charsLen),length--)}(0,wipe_1.wipe)(buf)}return out}exports.randomString=randomString,exports.randomStringForEntropy=function(bits,charset=ALPHANUMERIC,prng=exports.defaultRandomSource){let length=Math.ceil(bits/(Math.log(charset.length)/Math.LN2));return randomString(length,charset,prng)}},75455:function(__unused_webpack_module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BrowserRandomSource=void 0,exports.BrowserRandomSource=class{constructor(){this.isAvailable=!1,this.isInstantiated=!1;let browserCrypto="undefined"!=typeof self?self.crypto||self.msCrypto:null;browserCrypto&&void 0!==browserCrypto.getRandomValues&&(this._crypto=browserCrypto,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(length){if(!this.isAvailable||!this._crypto)throw Error("Browser random byte generator is not available.");let out=new Uint8Array(length);for(let i=0;i<out.length;i+=65536)this._crypto.getRandomValues(out.subarray(i,i+Math.min(out.length-i,65536)));return out}}},58871:function(__unused_webpack_module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.NodeRandomSource=void 0;let wipe_1=__webpack_require__(17309);exports.NodeRandomSource=class{constructor(){this.isAvailable=!1,this.isInstantiated=!1;{let nodeCrypto=__webpack_require__(35883);nodeCrypto&&nodeCrypto.randomBytes&&(this._crypto=nodeCrypto,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(length){if(!this.isAvailable||!this._crypto)throw Error("Node.js random byte generator is not available.");let buffer=this._crypto.randomBytes(length);if(buffer.length!==length)throw Error("NodeRandomSource: got fewer bytes than requested");let out=new Uint8Array(length);for(let i=0;i<out.length;i++)out[i]=buffer[i];return(0,wipe_1.wipe)(buffer),out}}},46008:function(__unused_webpack_module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SystemRandomSource=void 0;let browser_1=__webpack_require__(75455),node_1=__webpack_require__(58871);exports.SystemRandomSource=class{constructor(){if(this.isAvailable=!1,this.name="",this._source=new browser_1.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new node_1.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(length){if(!this.isAvailable)throw Error("System random byte generator is not available.");return this._source.randomBytes(length)}}},73294:function(__unused_webpack_module,exports,__webpack_require__){"use strict";var binary_1=__webpack_require__(98099),wipe_1=__webpack_require__(17309);exports.k=32,exports.cn=64;var SHA256=function(){function SHA256(){this.digestLength=exports.k,this.blockSize=exports.cn,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return SHA256.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},SHA256.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},SHA256.prototype.clean=function(){wipe_1.wipe(this._buffer),wipe_1.wipe(this._temp),this.reset()},SHA256.prototype.update=function(data,dataLength){if(void 0===dataLength&&(dataLength=data.length),this._finished)throw Error("SHA256: can't update because hash was finished.");var dataPos=0;if(this._bytesHashed+=dataLength,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&dataLength>0;)this._buffer[this._bufferLength++]=data[dataPos++],dataLength--;this._bufferLength===this.blockSize&&(hashBlocks(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(dataLength>=this.blockSize&&(dataPos=hashBlocks(this._temp,this._state,data,dataPos,dataLength),dataLength%=this.blockSize);dataLength>0;)this._buffer[this._bufferLength++]=data[dataPos++],dataLength--;return this},SHA256.prototype.finish=function(out){if(!this._finished){var bytesHashed=this._bytesHashed,left=this._bufferLength,padLength=bytesHashed%64<56?64:128;this._buffer[left]=128;for(var i=left+1;i<padLength-8;i++)this._buffer[i]=0;binary_1.writeUint32BE(bytesHashed/536870912|0,this._buffer,padLength-8),binary_1.writeUint32BE(bytesHashed<<3,this._buffer,padLength-4),hashBlocks(this._temp,this._state,this._buffer,0,padLength),this._finished=!0}for(var i=0;i<this.digestLength/4;i++)binary_1.writeUint32BE(this._state[i],out,4*i);return this},SHA256.prototype.digest=function(){var out=new Uint8Array(this.digestLength);return this.finish(out),out},SHA256.prototype.saveState=function(){if(this._finished)throw Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},SHA256.prototype.restoreState=function(savedState){return this._state.set(savedState.state),this._bufferLength=savedState.bufferLength,savedState.buffer&&this._buffer.set(savedState.buffer),this._bytesHashed=savedState.bytesHashed,this._finished=!1,this},SHA256.prototype.cleanSavedState=function(savedState){wipe_1.wipe(savedState.state),savedState.buffer&&wipe_1.wipe(savedState.buffer),savedState.bufferLength=0,savedState.bytesHashed=0},SHA256}();exports.mE=SHA256;var K=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function hashBlocks(w,v,p,pos,len){for(;len>=64;){for(var a=v[0],b=v[1],c=v[2],d=v[3],e=v[4],f=v[5],g=v[6],h=v[7],i=0;i<16;i++){var j=pos+4*i;w[i]=binary_1.readUint32BE(p,j)}for(var i=16;i<64;i++){var u=w[i-2],t1=(u>>>17|u<<15)^(u>>>19|u<<13)^u>>>10,t2=((u=w[i-15])>>>7|u<<25)^(u>>>18|u<<14)^u>>>3;w[i]=(t1+w[i-7]|0)+(t2+w[i-16]|0)}for(var i=0;i<64;i++){var t1=(((e>>>6|e<<26)^(e>>>11|e<<21)^(e>>>25|e<<7))+(e&f^~e&g)|0)+(h+(K[i]+w[i]|0)|0)|0,t2=((a>>>2|a<<30)^(a>>>13|a<<19)^(a>>>22|a<<10))+(a&b^a&c^b&c)|0;h=g,g=f,f=e,e=d+t1|0,d=c,c=b,b=a,a=t1+t2|0}v[0]+=a,v[1]+=b,v[2]+=c,v[3]+=d,v[4]+=e,v[5]+=f,v[6]+=g,v[7]+=h,pos+=64,len-=64}return pos}exports.vp=function(data){var h=new SHA256;h.update(data);var digest=h.digest();return h.clean(),digest}},93350:function(__unused_webpack_module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var binary_1=__webpack_require__(98099),wipe_1=__webpack_require__(17309);exports.DIGEST_LENGTH=64,exports.BLOCK_SIZE=128;var SHA512=function(){function SHA512(){this.digestLength=exports.DIGEST_LENGTH,this.blockSize=exports.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return SHA512.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},SHA512.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},SHA512.prototype.clean=function(){wipe_1.wipe(this._buffer),wipe_1.wipe(this._tempHi),wipe_1.wipe(this._tempLo),this.reset()},SHA512.prototype.update=function(data,dataLength){if(void 0===dataLength&&(dataLength=data.length),this._finished)throw Error("SHA512: can't update because hash was finished.");var dataPos=0;if(this._bytesHashed+=dataLength,this._bufferLength>0){for(;this._bufferLength<exports.BLOCK_SIZE&&dataLength>0;)this._buffer[this._bufferLength++]=data[dataPos++],dataLength--;this._bufferLength===this.blockSize&&(hashBlocks(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(dataLength>=this.blockSize&&(dataPos=hashBlocks(this._tempHi,this._tempLo,this._stateHi,this._stateLo,data,dataPos,dataLength),dataLength%=this.blockSize);dataLength>0;)this._buffer[this._bufferLength++]=data[dataPos++],dataLength--;return this},SHA512.prototype.finish=function(out){if(!this._finished){var bytesHashed=this._bytesHashed,left=this._bufferLength,padLength=bytesHashed%128<112?128:256;this._buffer[left]=128;for(var i=left+1;i<padLength-8;i++)this._buffer[i]=0;binary_1.writeUint32BE(bytesHashed/536870912|0,this._buffer,padLength-8),binary_1.writeUint32BE(bytesHashed<<3,this._buffer,padLength-4),hashBlocks(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,padLength),this._finished=!0}for(var i=0;i<this.digestLength/8;i++)binary_1.writeUint32BE(this._stateHi[i],out,8*i),binary_1.writeUint32BE(this._stateLo[i],out,8*i+4);return this},SHA512.prototype.digest=function(){var out=new Uint8Array(this.digestLength);return this.finish(out),out},SHA512.prototype.saveState=function(){if(this._finished)throw Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},SHA512.prototype.restoreState=function(savedState){return this._stateHi.set(savedState.stateHi),this._stateLo.set(savedState.stateLo),this._bufferLength=savedState.bufferLength,savedState.buffer&&this._buffer.set(savedState.buffer),this._bytesHashed=savedState.bytesHashed,this._finished=!1,this},SHA512.prototype.cleanSavedState=function(savedState){wipe_1.wipe(savedState.stateHi),wipe_1.wipe(savedState.stateLo),savedState.buffer&&wipe_1.wipe(savedState.buffer),savedState.bufferLength=0,savedState.bytesHashed=0},SHA512}();exports.SHA512=SHA512;var K=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function hashBlocks(wh,wl,hh,hl,m,pos,len){for(var h,l,th,tl,a,b,c,d,ah0=hh[0],ah1=hh[1],ah2=hh[2],ah3=hh[3],ah4=hh[4],ah5=hh[5],ah6=hh[6],ah7=hh[7],al0=hl[0],al1=hl[1],al2=hl[2],al3=hl[3],al4=hl[4],al5=hl[5],al6=hl[6],al7=hl[7];len>=128;){for(var i=0;i<16;i++){var j=8*i+pos;wh[i]=binary_1.readUint32BE(m,j),wl[i]=binary_1.readUint32BE(m,j+4)}for(var i=0;i<80;i++){var bh0=ah0,bh1=ah1,bh2=ah2,bh3=ah3,bh4=ah4,bh5=ah5,bh6=ah6,bh7=ah7,bl0=al0,bl1=al1,bl2=al2,bl3=al3,bl4=al4,bl5=al5,bl6=al6,bl7=al7;if(h=ah7,a=65535&(l=al7),b=l>>>16,c=65535&h,d=h>>>16,h=(ah4>>>14|al4<<18)^(ah4>>>18|al4<<14)^(al4>>>9|ah4<<23),a+=65535&(l=(al4>>>14|ah4<<18)^(al4>>>18|ah4<<14)^(ah4>>>9|al4<<23)),b+=l>>>16,c+=65535&h,d+=h>>>16,h=ah4&ah5^~ah4&ah6,a+=65535&(l=al4&al5^~al4&al6),b+=l>>>16,c+=65535&h,d+=h>>>16,h=K[2*i],a+=65535&(l=K[2*i+1]),b+=l>>>16,c+=65535&h,d+=h>>>16,h=wh[i%16],a+=65535&(l=wl[i%16]),b+=l>>>16,c+=65535&h,d+=h>>>16,b+=a>>>16,c+=b>>>16,d+=c>>>16,th=65535&c|d<<16,tl=65535&a|b<<16,h=th,a=65535&(l=tl),b=l>>>16,c=65535&h,d=h>>>16,h=(ah0>>>28|al0<<4)^(al0>>>2|ah0<<30)^(al0>>>7|ah0<<25),a+=65535&(l=(al0>>>28|ah0<<4)^(ah0>>>2|al0<<30)^(ah0>>>7|al0<<25)),b+=l>>>16,c+=65535&h,d+=h>>>16,h=ah0&ah1^ah0&ah2^ah1&ah2,a+=65535&(l=al0&al1^al0&al2^al1&al2),b+=l>>>16,c+=65535&h,d+=h>>>16,b+=a>>>16,c+=b>>>16,d+=c>>>16,bh7=65535&c|d<<16,bl7=65535&a|b<<16,h=bh3,a=65535&(l=bl3),b=l>>>16,c=65535&h,d=h>>>16,h=th,a+=65535&(l=tl),b+=l>>>16,c+=65535&h,d+=h>>>16,b+=a>>>16,c+=b>>>16,d+=c>>>16,bh3=65535&c|d<<16,bl3=65535&a|b<<16,ah1=bh0,ah2=bh1,ah3=bh2,ah4=bh3,ah5=bh4,ah6=bh5,ah7=bh6,ah0=bh7,al1=bl0,al2=bl1,al3=bl2,al4=bl3,al5=bl4,al6=bl5,al7=bl6,al0=bl7,i%16==15)for(var j=0;j<16;j++)h=wh[j],a=65535&(l=wl[j]),b=l>>>16,c=65535&h,d=h>>>16,h=wh[(j+9)%16],a+=65535&(l=wl[(j+9)%16]),b+=l>>>16,c+=65535&h,d+=h>>>16,h=((th=wh[(j+1)%16])>>>1|(tl=wl[(j+1)%16])<<31)^(th>>>8|tl<<24)^th>>>7,a+=65535&(l=(tl>>>1|th<<31)^(tl>>>8|th<<24)^(tl>>>7|th<<25)),b+=l>>>16,c+=65535&h,d+=h>>>16,h=((th=wh[(j+14)%16])>>>19|(tl=wl[(j+14)%16])<<13)^(tl>>>29|th<<3)^th>>>6,a+=65535&(l=(tl>>>19|th<<13)^(th>>>29|tl<<3)^(tl>>>6|th<<26)),b+=l>>>16,c+=65535&h,d+=h>>>16,b+=a>>>16,c+=b>>>16,d+=c>>>16,wh[j]=65535&c|d<<16,wl[j]=65535&a|b<<16}h=ah0,a=65535&(l=al0),b=l>>>16,c=65535&h,d=h>>>16,h=hh[0],a+=65535&(l=hl[0]),b+=l>>>16,c+=65535&h,d+=h>>>16,b+=a>>>16,c+=b>>>16,d+=c>>>16,hh[0]=ah0=65535&c|d<<16,hl[0]=al0=65535&a|b<<16,h=ah1,a=65535&(l=al1),b=l>>>16,c=65535&h,d=h>>>16,h=hh[1],a+=65535&(l=hl[1]),b+=l>>>16,c+=65535&h,d+=h>>>16,b+=a>>>16,c+=b>>>16,d+=c>>>16,hh[1]=ah1=65535&c|d<<16,hl[1]=al1=65535&a|b<<16,h=ah2,a=65535&(l=al2),b=l>>>16,c=65535&h,d=h>>>16,h=hh[2],a+=65535&(l=hl[2]),b+=l>>>16,c+=65535&h,d+=h>>>16,b+=a>>>16,c+=b>>>16,d+=c>>>16,hh[2]=ah2=65535&c|d<<16,hl[2]=al2=65535&a|b<<16,h=ah3,a=65535&(l=al3),b=l>>>16,c=65535&h,d=h>>>16,h=hh[3],a+=65535&(l=hl[3]),b+=l>>>16,c+=65535&h,d+=h>>>16,b+=a>>>16,c+=b>>>16,d+=c>>>16,hh[3]=ah3=65535&c|d<<16,hl[3]=al3=65535&a|b<<16,h=ah4,a=65535&(l=al4),b=l>>>16,c=65535&h,d=h>>>16,h=hh[4],a+=65535&(l=hl[4]),b+=l>>>16,c+=65535&h,d+=h>>>16,b+=a>>>16,c+=b>>>16,d+=c>>>16,hh[4]=ah4=65535&c|d<<16,hl[4]=al4=65535&a|b<<16,h=ah5,a=65535&(l=al5),b=l>>>16,c=65535&h,d=h>>>16,h=hh[5],a+=65535&(l=hl[5]),b+=l>>>16,c+=65535&h,d+=h>>>16,b+=a>>>16,c+=b>>>16,d+=c>>>16,hh[5]=ah5=65535&c|d<<16,hl[5]=al5=65535&a|b<<16,h=ah6,a=65535&(l=al6),b=l>>>16,c=65535&h,d=h>>>16,h=hh[6],a+=65535&(l=hl[6]),b+=l>>>16,c+=65535&h,d+=h>>>16,b+=a>>>16,c+=b>>>16,d+=c>>>16,hh[6]=ah6=65535&c|d<<16,hl[6]=al6=65535&a|b<<16,h=ah7,a=65535&(l=al7),b=l>>>16,c=65535&h,d=h>>>16,h=hh[7],a+=65535&(l=hl[7]),b+=l>>>16,c+=65535&h,d+=h>>>16,b+=a>>>16,c+=b>>>16,d+=c>>>16,hh[7]=ah7=65535&c|d<<16,hl[7]=al7=65535&a|b<<16,pos+=128,len-=128}return pos}exports.hash=function(data){var h=new SHA512;h.update(data);var digest=h.digest();return h.clean(),digest}},17309:function(__unused_webpack_module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.wipe=function(array){for(var i=0;i<array.length;i++)array[i]=0;return array}},57664:function(__unused_webpack_module,exports,__webpack_require__){"use strict";exports.gi=exports.Au=exports.KS=exports.kz=void 0;let random_1=__webpack_require__(31416),wipe_1=__webpack_require__(17309);function gf(init){let r=new Float64Array(16);if(init)for(let i=0;i<init.length;i++)r[i]=init[i];return r}exports.kz=32,exports.KS=32;let _9=new Uint8Array(32);_9[0]=9;let _121665=gf([56129,1]);function car25519(o){let c=1;for(let i=0;i<16;i++){let v=o[i]+c+65535;c=Math.floor(v/65536),o[i]=v-65536*c}o[0]+=c-1+37*(c-1)}function sel25519(p,q,b){let c=~(b-1);for(let i=0;i<16;i++){let t=c&(p[i]^q[i]);p[i]^=t,q[i]^=t}}function add(o,a,b){for(let i=0;i<16;i++)o[i]=a[i]+b[i]}function sub(o,a,b){for(let i=0;i<16;i++)o[i]=a[i]-b[i]}function mul(o,a,b){let v,c,t0=0,t1=0,t2=0,t3=0,t4=0,t5=0,t6=0,t7=0,t8=0,t9=0,t10=0,t11=0,t12=0,t13=0,t14=0,t15=0,t16=0,t17=0,t18=0,t19=0,t20=0,t21=0,t22=0,t23=0,t24=0,t25=0,t26=0,t27=0,t28=0,t29=0,t30=0,b0=b[0],b1=b[1],b2=b[2],b3=b[3],b4=b[4],b5=b[5],b6=b[6],b7=b[7],b8=b[8],b9=b[9],b10=b[10],b11=b[11],b12=b[12],b13=b[13],b14=b[14],b15=b[15];t0+=(v=a[0])*b0,t1+=v*b1,t2+=v*b2,t3+=v*b3,t4+=v*b4,t5+=v*b5,t6+=v*b6,t7+=v*b7,t8+=v*b8,t9+=v*b9,t10+=v*b10,t11+=v*b11,t12+=v*b12,t13+=v*b13,t14+=v*b14,t15+=v*b15,t1+=(v=a[1])*b0,t2+=v*b1,t3+=v*b2,t4+=v*b3,t5+=v*b4,t6+=v*b5,t7+=v*b6,t8+=v*b7,t9+=v*b8,t10+=v*b9,t11+=v*b10,t12+=v*b11,t13+=v*b12,t14+=v*b13,t15+=v*b14,t16+=v*b15,t2+=(v=a[2])*b0,t3+=v*b1,t4+=v*b2,t5+=v*b3,t6+=v*b4,t7+=v*b5,t8+=v*b6,t9+=v*b7,t10+=v*b8,t11+=v*b9,t12+=v*b10,t13+=v*b11,t14+=v*b12,t15+=v*b13,t16+=v*b14,t17+=v*b15,t3+=(v=a[3])*b0,t4+=v*b1,t5+=v*b2,t6+=v*b3,t7+=v*b4,t8+=v*b5,t9+=v*b6,t10+=v*b7,t11+=v*b8,t12+=v*b9,t13+=v*b10,t14+=v*b11,t15+=v*b12,t16+=v*b13,t17+=v*b14,t18+=v*b15,t4+=(v=a[4])*b0,t5+=v*b1,t6+=v*b2,t7+=v*b3,t8+=v*b4,t9+=v*b5,t10+=v*b6,t11+=v*b7,t12+=v*b8,t13+=v*b9,t14+=v*b10,t15+=v*b11,t16+=v*b12,t17+=v*b13,t18+=v*b14,t19+=v*b15,t5+=(v=a[5])*b0,t6+=v*b1,t7+=v*b2,t8+=v*b3,t9+=v*b4,t10+=v*b5,t11+=v*b6,t12+=v*b7,t13+=v*b8,t14+=v*b9,t15+=v*b10,t16+=v*b11,t17+=v*b12,t18+=v*b13,t19+=v*b14,t20+=v*b15,t6+=(v=a[6])*b0,t7+=v*b1,t8+=v*b2,t9+=v*b3,t10+=v*b4,t11+=v*b5,t12+=v*b6,t13+=v*b7,t14+=v*b8,t15+=v*b9,t16+=v*b10,t17+=v*b11,t18+=v*b12,t19+=v*b13,t20+=v*b14,t21+=v*b15,t7+=(v=a[7])*b0,t8+=v*b1,t9+=v*b2,t10+=v*b3,t11+=v*b4,t12+=v*b5,t13+=v*b6,t14+=v*b7,t15+=v*b8,t16+=v*b9,t17+=v*b10,t18+=v*b11,t19+=v*b12,t20+=v*b13,t21+=v*b14,t22+=v*b15,t8+=(v=a[8])*b0,t9+=v*b1,t10+=v*b2,t11+=v*b3,t12+=v*b4,t13+=v*b5,t14+=v*b6,t15+=v*b7,t16+=v*b8,t17+=v*b9,t18+=v*b10,t19+=v*b11,t20+=v*b12,t21+=v*b13,t22+=v*b14,t23+=v*b15,t9+=(v=a[9])*b0,t10+=v*b1,t11+=v*b2,t12+=v*b3,t13+=v*b4,t14+=v*b5,t15+=v*b6,t16+=v*b7,t17+=v*b8,t18+=v*b9,t19+=v*b10,t20+=v*b11,t21+=v*b12,t22+=v*b13,t23+=v*b14,t24+=v*b15,t10+=(v=a[10])*b0,t11+=v*b1,t12+=v*b2,t13+=v*b3,t14+=v*b4,t15+=v*b5,t16+=v*b6,t17+=v*b7,t18+=v*b8,t19+=v*b9,t20+=v*b10,t21+=v*b11,t22+=v*b12,t23+=v*b13,t24+=v*b14,t25+=v*b15,t11+=(v=a[11])*b0,t12+=v*b1,t13+=v*b2,t14+=v*b3,t15+=v*b4,t16+=v*b5,t17+=v*b6,t18+=v*b7,t19+=v*b8,t20+=v*b9,t21+=v*b10,t22+=v*b11,t23+=v*b12,t24+=v*b13,t25+=v*b14,t26+=v*b15,t12+=(v=a[12])*b0,t13+=v*b1,t14+=v*b2,t15+=v*b3,t16+=v*b4,t17+=v*b5,t18+=v*b6,t19+=v*b7,t20+=v*b8,t21+=v*b9,t22+=v*b10,t23+=v*b11,t24+=v*b12,t25+=v*b13,t26+=v*b14,t27+=v*b15,t13+=(v=a[13])*b0,t14+=v*b1,t15+=v*b2,t16+=v*b3,t17+=v*b4,t18+=v*b5,t19+=v*b6,t20+=v*b7,t21+=v*b8,t22+=v*b9,t23+=v*b10,t24+=v*b11,t25+=v*b12,t26+=v*b13,t27+=v*b14,t28+=v*b15,t14+=(v=a[14])*b0,t15+=v*b1,t16+=v*b2,t17+=v*b3,t18+=v*b4,t19+=v*b5,t20+=v*b6,t21+=v*b7,t22+=v*b8,t23+=v*b9,t24+=v*b10,t25+=v*b11,t26+=v*b12,t27+=v*b13,t28+=v*b14,t29+=v*b15,t15+=(v=a[15])*b0,t16+=v*b1,t17+=v*b2,t18+=v*b3,t19+=v*b4,t20+=v*b5,t21+=v*b6,t22+=v*b7,t23+=v*b8,t24+=v*b9,t25+=v*b10,t26+=v*b11,t27+=v*b12,t28+=v*b13,t29+=v*b14,t30+=v*b15,t0+=38*t16,t1+=38*t17,t2+=38*t18,t3+=38*t19,t4+=38*t20,t5+=38*t21,t6+=38*t22,t7+=38*t23,t8+=38*t24,t9+=38*t25,t10+=38*t26,t11+=38*t27,t12+=38*t28,t13+=38*t29,t14+=38*t30,c=Math.floor((v=t0+(c=1)+65535)/65536),t0=v-65536*c,c=Math.floor((v=t1+c+65535)/65536),t1=v-65536*c,c=Math.floor((v=t2+c+65535)/65536),t2=v-65536*c,c=Math.floor((v=t3+c+65535)/65536),t3=v-65536*c,c=Math.floor((v=t4+c+65535)/65536),t4=v-65536*c,c=Math.floor((v=t5+c+65535)/65536),t5=v-65536*c,c=Math.floor((v=t6+c+65535)/65536),t6=v-65536*c,c=Math.floor((v=t7+c+65535)/65536),t7=v-65536*c,c=Math.floor((v=t8+c+65535)/65536),t8=v-65536*c,c=Math.floor((v=t9+c+65535)/65536),t9=v-65536*c,c=Math.floor((v=t10+c+65535)/65536),t10=v-65536*c,c=Math.floor((v=t11+c+65535)/65536),t11=v-65536*c,c=Math.floor((v=t12+c+65535)/65536),t12=v-65536*c,c=Math.floor((v=t13+c+65535)/65536),t13=v-65536*c,c=Math.floor((v=t14+c+65535)/65536),t14=v-65536*c,c=Math.floor((v=t15+c+65535)/65536),t15=v-65536*c,t0+=c-1+37*(c-1),c=Math.floor((v=t0+(c=1)+65535)/65536),t0=v-65536*c,c=Math.floor((v=t1+c+65535)/65536),t1=v-65536*c,c=Math.floor((v=t2+c+65535)/65536),t2=v-65536*c,c=Math.floor((v=t3+c+65535)/65536),t3=v-65536*c,c=Math.floor((v=t4+c+65535)/65536),t4=v-65536*c,c=Math.floor((v=t5+c+65535)/65536),t5=v-65536*c,c=Math.floor((v=t6+c+65535)/65536),t6=v-65536*c,c=Math.floor((v=t7+c+65535)/65536),t7=v-65536*c,c=Math.floor((v=t8+c+65535)/65536),t8=v-65536*c,c=Math.floor((v=t9+c+65535)/65536),t9=v-65536*c,c=Math.floor((v=t10+c+65535)/65536),t10=v-65536*c,c=Math.floor((v=t11+c+65535)/65536),t11=v-65536*c,c=Math.floor((v=t12+c+65535)/65536),t12=v-65536*c,c=Math.floor((v=t13+c+65535)/65536),t13=v-65536*c,c=Math.floor((v=t14+c+65535)/65536),t14=v-65536*c,c=Math.floor((v=t15+c+65535)/65536),t15=v-65536*c,t0+=c-1+37*(c-1),o[0]=t0,o[1]=t1,o[2]=t2,o[3]=t3,o[4]=t4,o[5]=t5,o[6]=t6,o[7]=t7,o[8]=t8,o[9]=t9,o[10]=t10,o[11]=t11,o[12]=t12,o[13]=t13,o[14]=t14,o[15]=t15}function scalarMult(n,p){let z=new Uint8Array(32),x=new Float64Array(80),a=gf(),b=gf(),c=gf(),d=gf(),e=gf(),f=gf();for(let i=0;i<31;i++)z[i]=n[i];z[31]=127&n[31]|64,z[0]&=248,function(o,n){for(let i=0;i<16;i++)o[i]=n[2*i]+(n[2*i+1]<<8);o[15]&=32767}(x,p);for(let i1=0;i1<16;i1++)b[i1]=x[i1];a[0]=d[0]=1;for(let i2=254;i2>=0;--i2){let r=z[i2>>>3]>>>(7&i2)&1;sel25519(a,b,r),sel25519(c,d,r),add(e,a,c),sub(a,a,c),add(c,b,d),sub(b,b,d),mul(d,e,e),mul(f,a,a),mul(a,c,a),mul(c,b,e),add(e,a,c),sub(a,a,c),mul(b,a,a),sub(c,d,f),mul(a,c,_121665),add(a,a,d),mul(c,c,a),mul(a,d,f),mul(d,b,x),mul(b,e,e),sel25519(a,b,r),sel25519(c,d,r)}for(let i3=0;i3<16;i3++)x[i3+16]=a[i3],x[i3+32]=c[i3],x[i3+48]=b[i3],x[i3+64]=d[i3];let x32=x.subarray(32),x16=x.subarray(16);!function(o,inp){let c=gf();for(let i=0;i<16;i++)c[i]=inp[i];for(let i1=253;i1>=0;i1--)mul(c,c,c),2!==i1&&4!==i1&&mul(c,c,inp);for(let i2=0;i2<16;i2++)o[i2]=c[i2]}(x32,x32),mul(x16,x16,x32);let q=new Uint8Array(32);return!function(o,n){let m=gf(),t=gf();for(let i=0;i<16;i++)t[i]=n[i];car25519(t),car25519(t),car25519(t);for(let j=0;j<2;j++){m[0]=t[0]-65517;for(let i1=1;i1<15;i1++)m[i1]=t[i1]-65535-(m[i1-1]>>16&1),m[i1-1]&=65535;m[15]=t[15]-32767-(m[14]>>16&1);let b=m[15]>>16&1;m[14]&=65535,sel25519(t,m,1-b)}for(let i2=0;i2<16;i2++)o[2*i2]=255&t[i2],o[2*i2+1]=t[i2]>>8}(q,x16),q}exports.Au=function(prng){let seed=(0,random_1.randomBytes)(32,prng),result=function(seed){if(seed.length!==exports.KS)throw Error(`x25519: seed must be ${exports.KS} bytes`);let secretKey=new Uint8Array(seed),publicKey=scalarMult(secretKey,_9);return{publicKey,secretKey}}(seed);return(0,wipe_1.wipe)(seed),result},exports.gi=function(mySecretKey,theirPublicKey,rejectZero=!1){if(mySecretKey.length!==exports.kz)throw Error("X25519: incorrect secret key length");if(theirPublicKey.length!==exports.kz)throw Error("X25519: incorrect public key length");let result=scalarMult(mySecretKey,theirPublicKey);if(rejectZero){let zeros=0;for(let i=0;i<result.length;i++)zeros|=result[i];if(0===zeros)throw Error("X25519: invalid shared key")}return result}},38200:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{q:function(){return IEvents}});class IEvents{}},30997:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{IEvents:function(){return _events__WEBPACK_IMPORTED_MODULE_0__.q}});var _events__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(38200)},32568:function(__unused_webpack_module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.HEARTBEAT_EVENTS=exports.HEARTBEAT_INTERVAL=void 0;let time_1=__webpack_require__(66736);exports.HEARTBEAT_INTERVAL=time_1.FIVE_SECONDS,exports.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"}},53401:function(__unused_webpack_module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});let tslib_1=__webpack_require__(39653);tslib_1.__exportStar(__webpack_require__(32568),exports)},38969:function(__unused_webpack_module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.HeartBeat=void 0;let tslib_1=__webpack_require__(39653),events_1=__webpack_require__(17187),time_1=__webpack_require__(66736),types_1=__webpack_require__(1614),constants_1=__webpack_require__(53401);class HeartBeat extends types_1.IHeartBeat{constructor(opts){super(opts),this.events=new events_1.EventEmitter,this.interval=constants_1.HEARTBEAT_INTERVAL,this.interval=(null==opts?void 0:opts.interval)||constants_1.HEARTBEAT_INTERVAL}static init(opts){return tslib_1.__awaiter(this,void 0,void 0,function*(){let heartbeat=new HeartBeat(opts);return yield heartbeat.init(),heartbeat})}init(){return tslib_1.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(event,listener){this.events.on(event,listener)}once(event,listener){this.events.once(event,listener)}off(event,listener){this.events.off(event,listener)}removeListener(event,listener){this.events.removeListener(event,listener)}initialize(){return tslib_1.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),time_1.toMiliseconds(this.interval))})}pulse(){this.events.emit(constants_1.HEARTBEAT_EVENTS.pulse)}}exports.HeartBeat=HeartBeat},90772:function(__unused_webpack_module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});let tslib_1=__webpack_require__(39653);tslib_1.__exportStar(__webpack_require__(38969),exports),tslib_1.__exportStar(__webpack_require__(1614),exports),tslib_1.__exportStar(__webpack_require__(53401),exports)},44174:function(__unused_webpack_module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.IHeartBeat=void 0;let events_1=__webpack_require__(30997);class IHeartBeat extends events_1.IEvents{constructor(opts){super()}}exports.IHeartBeat=IHeartBeat},1614:function(__unused_webpack_module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});let tslib_1=__webpack_require__(39653);tslib_1.__exportStar(__webpack_require__(44174),exports)},39653:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{__assign:function(){return __assign},__asyncDelegator:function(){return __asyncDelegator},__asyncGenerator:function(){return __asyncGenerator},__asyncValues:function(){return __asyncValues},__await:function(){return __await},__awaiter:function(){return __awaiter},__classPrivateFieldGet:function(){return __classPrivateFieldGet},__classPrivateFieldSet:function(){return __classPrivateFieldSet},__createBinding:function(){return __createBinding},__decorate:function(){return __decorate},__exportStar:function(){return __exportStar},__extends:function(){return __extends},__generator:function(){return __generator},__importDefault:function(){return __importDefault},__importStar:function(){return __importStar},__makeTemplateObject:function(){return __makeTemplateObject},__metadata:function(){return __metadata},__param:function(){return __param},__read:function(){return __read},__rest:function(){return __rest},__spread:function(){return __spread},__spreadArrays:function(){return __spreadArrays},__values:function(){return __values}});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */ var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)};function __extends(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}var __assign=function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};function __rest(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&0>e.indexOf(p)&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,p=Object.getOwnPropertySymbols(s);i<p.length;i++)0>e.indexOf(p[i])&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]]);return t}function __decorate(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r}function __param(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}}function __metadata(metadataKey,metadataValue){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(metadataKey,metadataValue)}function __awaiter(thisArg,_arguments,P,generator){return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):((value=result.value)instanceof P?value:new P(function(resolve){resolve(value)})).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})}function __generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}}function __createBinding(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}function __exportStar(m,exports){for(var p in m)"default"===p||exports.hasOwnProperty(p)||(exports[p]=m[p])}function __values(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar}function __spread(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read(arguments[i]));return ar}function __spreadArrays(){for(var s=0,i=0,il=arguments.length;i<il;i++)s+=arguments[i].length;for(var r=Array(s),k=0,i=0;i<il;i++)for(var a=arguments[i],j=0,jl=a.length;j<jl;j++,k++)r[k]=a[j];return r}function __await(v){return this instanceof __await?(this.v=v,this):new __await(v)}function __asyncGenerator(thisArg,_arguments,generator){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var i,g=generator.apply(thisArg,_arguments||[]),q=[];return i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i;function verb(n){g[n]&&(i[n]=function(v){return new Promise(function(a,b){q.push([n,v,a,b])>1||resume(n,v)})})}function resume(n,v){try{var r;(r=g[n](v)).value instanceof __await?Promise.resolve(r.value.v).then(fulfill,reject):settle(q[0][2],r)}catch(e){settle(q[0][3],e)}}function fulfill(value){resume("next",value)}function reject(value){resume("throw",value)}function settle(f,v){f(v),q.shift(),q.length&&resume(q[0][0],q[0][1])}}function __asyncDelegator(o){var i,p;return i={},verb("next"),verb("throw",function(e){throw e}),verb("return"),i[Symbol.iterator]=function(){return this},i;function verb(n,f){i[n]=o[n]?function(v){return(p=!p)?{value:__await(o[n](v)),done:"return"===n}:f?f(v):v}:f}}function __asyncValues(o){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var i,m=o[Symbol.asyncIterator];return m?m.call(o):(o=__values(o),i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i);function verb(n){i[n]=o[n]&&function(v){return new Promise(function(resolve,reject){!function(resolve,reject,d,v){Promise.resolve(v).then(function(v){resolve({value:v,done:d})},reject)}(resolve,reject,(v=o[n](v)).done,v.value)})}}}function __makeTemplateObject(cooked,raw){return Object.defineProperty?Object.defineProperty(cooked,"raw",{value:raw}):cooked.raw=raw,cooked}function __importStar(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)Object.hasOwnProperty.call(mod,k)&&(result[k]=mod[k]);return result.default=mod,result}function __importDefault(mod){return mod&&mod.__esModule?mod:{default:mod}}function __classPrivateFieldGet(receiver,privateMap){if(!privateMap.has(receiver))throw TypeError("attempted to get private field on non-instance");return privateMap.get(receiver)}function __classPrivateFieldSet(receiver,privateMap,value){if(!privateMap.has(receiver))throw TypeError("attempted to set private field on non-instance");return privateMap.set(receiver,value),value}},72030:function(module){"use strict";module.exports=function(){throw Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},85150:function(__unused_webpack_module,exports,__webpack_require__){"use strict";let tslib_1=__webpack_require__(33893),safe_json_utils_1=__webpack_require__(63954),localStorage_1=tslib_1.__importDefault(__webpack_require__(30653)),shared_1=__webpack_require__(59728);exports.ZP=class{constructor(){this.localStorage=localStorage_1.default}getKeys(){return tslib_1.__awaiter(this,void 0,void 0,function*(){return Object.keys(this.localStorage)})}getEntries(){return tslib_1.__awaiter(this,void 0,void 0,function*(){return Object.entries(this.localStorage).map(shared_1.parseEntry)})}getItem(key){return tslib_1.__awaiter(this,void 0,void 0,function*(){let item=this.localStorage.getItem(key);if(null!==item)return safe_json_utils_1.safeJsonParse(item)})}setItem(key,value){return tslib_1.__awaiter(this,void 0,void 0,function*(){this.localStorage.setItem(key,safe_json_utils_1.safeJsonStringify(value))})}removeItem(key){return tslib_1.__awaiter(this,void 0,void 0,function*(){this.localStorage.removeItem(key)})}}},30653:function(module,__unused_webpack_exports,__webpack_require__){"use strict";!function(){let db;function LocalStorage(){}(db=LocalStorage).prototype.getItem=function(key){return this.hasOwnProperty(key)?String(this[key]):null},db.prototype.setItem=function(key,val){this[key]=String(val)},db.prototype.removeItem=function(key){delete this[key]},db.prototype.clear=function(){let self1=this;Object.keys(self1).forEach(function(key){self1[key]=void 0,delete self1[key]})},db.prototype.key=function(i){return i=i||0,Object.keys(this)[i]},db.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),void 0!==__webpack_require__.g&&__webpack_require__.g.localStorage?module.exports=__webpack_require__.g.localStorage:"undefined"!=typeof window&&window.localStorage?module.exports=window.localStorage:module.exports=new LocalStorage}()},59728:function(__unused_webpack_module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});let tslib_1=__webpack_require__(33893);tslib_1.__exportStar(__webpack_require__(39076),exports),tslib_1.__exportStar(__webpack_require__(20496),exports)},39076:function(__unused_webpack_module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.IKeyValueStorage=void 0,exports.IKeyValueStorage=class{}},20496:function(__unused_webpack_module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseEntry=void 0;let safe_json_utils_1=__webpack_require__(63954);exports.parseEntry=function(entry){var _a;return[entry[0],safe_json_utils_1.safeJsonParse(null!==(_a=entry[1])&&void 0!==_a?_a:"")]}},33893:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{__assign:function(){return __assign},__asyncDelegator:function(){return __asyncDelegator},__asyncGenerator:function(){return __asyncGenerator},__asyncValues:function(){return __asyncValues},__await:function(){return __await},__awaiter:function(){return __awaiter},__classPrivateFieldGet:function(){return __classPrivateFieldGet},__classPrivateFieldSet:function(){return __classPrivateFieldSet},__createBinding:function(){return __createBinding},__decorate:function(){return __decorate},__exportStar:function(){return __exportStar},__extends:function(){return __extends},__generator:function(){return __generator},__importDefault:function(){return __importDefault},__importStar:function(){return __importStar},__makeTemplateObject:function(){return __makeTemplateObject},__metadata:function(){return __metadata},__param:function(){return __param},__read:function(){return __read},__rest:function(){return __rest},__spread:function(){return __spread},__spreadArrays:function(){return __spreadArrays},__values:function(){return __values}});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */ var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)};function __extends(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}var __assign=function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};function __rest(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&0>e.indexOf(p)&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,p=Object.getOwnPropertySymbols(s);i<p.length;i++)0>e.indexOf(p[i])&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]]);return t}function __decorate(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r}function __param(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}}function __metadata(metadataKey,metadataValue){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(metadataKey,metadataValue)}function __awaiter(thisArg,_arguments,P,generator){return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):((value=result.value)instanceof P?value:new P(function(resolve){resolve(value)})).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})}function __generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}}function __createBinding(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}function __exportStar(m,exports){for(var p in m)"default"===p||exports.hasOwnProperty(p)||(exports[p]=m[p])}function __values(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar}function __spread(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read(arguments[i]));return ar}function __spreadArrays(){for(var s=0,i=0,il=arguments.length;i<il;i++)s+=arguments[i].length;for(var r=Array(s),k=0,i=0;i<il;i++)for(var a=arguments[i],j=0,jl=a.length;j<jl;j++,k++)r[k]=a[j];return r}function __await(v){return this instanceof __await?(this.v=v,this):new __await(v)}function __asyncGenerator(thisArg,_arguments,generator){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var i,g=generator.apply(thisArg,_arguments||[]),q=[];return i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i;function verb(n){g[n]&&(i[n]=function(v){return new Promise(function(a,b){q.push([n,v,a,b])>1||resume(n,v)})})}function resume(n,v){try{var r;(r=g[n](v)).value instanceof __await?Promise.resolve(r.value.v).then(fulfill,reject):settle(q[0][2],r)}catch(e){settle(q[0][3],e)}}function fulfill(value){resume("next",value)}function reject(value){resume("throw",value)}function settle(f,v){f(v),q.shift(),q.length&&resume(q[0][0],q[0][1])}}function __asyncDelegator(o){var i,p;return i={},verb("next"),verb("throw",function(e){throw e}),verb("return"),i[Symbol.iterator]=function(){return this},i;function verb(n,f){i[n]=o[n]?function(v){return(p=!p)?{value:__await(o[n](v)),done:"return"===n}:f?f(v):v}:f}}function __asyncValues(o){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var i,m=o[Symbol.asyncIterator];return m?m.call(o):(o=__values(o),i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i);function verb(n){i[n]=o[n]&&function(v){return new Promise(function(resolve,reject){!function(resolve,reject,d,v){Promise.resolve(v).then(function(v){resolve({value:v,done:d})},reject)}(resolve,reject,(v=o[n](v)).done,v.value)})}}}function __makeTemplateObject(cooked,raw){return Object.defineProperty?Object.defineProperty(cooked,"raw",{value:raw}):cooked.raw=raw,cooked}function __importStar(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)Object.hasOwnProperty.call(mod,k)&&(result[k]=mod[k]);return result.default=mod,result}function __importDefault(mod){return mod&&mod.__esModule?mod:{default:mod}}function __classPrivateFieldGet(receiver,privateMap){if(!privateMap.has(receiver))throw TypeError("attempted to get private field on non-instance");return privateMap.get(receiver)}function __classPrivateFieldSet(receiver,privateMap,value){if(!privateMap.has(receiver))throw TypeError("attempted to set private field on non-instance");return privateMap.set(receiver,value),value}},65727:function(__unused_webpack_module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PINO_CUSTOM_CONTEXT_KEY=exports.PINO_LOGGER_DEFAULTS=void 0,exports.PINO_LOGGER_DEFAULTS={level:"info"},exports.PINO_CUSTOM_CONTEXT_KEY="custom_context"},9107:function(__unused_webpack_module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pino=void 0;let tslib_1=__webpack_require__(57121),pino_1=tslib_1.__importDefault(__webpack_require__(36559));Object.defineProperty(exports,"pino",{enumerable:!0,get:function(){return pino_1.default}}),tslib_1.__exportStar(__webpack_require__(65727),exports),tslib_1.__exportStar(__webpack_require__(58048),exports)},58048:function(__unused_webpack_module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.generateChildLogger=exports.formatChildLoggerContext=exports.getLoggerContext=exports.setBrowserLoggerContext=exports.getBrowserLoggerContext=exports.getDefaultLoggerOptions=void 0;let constants_1=__webpack_require__(65727);function getBrowserLoggerContext(logger,customContextKey=constants_1.PINO_CUSTOM_CONTEXT_KEY){return logger[customContextKey]||""}function setBrowserLoggerContext(logger,context,customContextKey=constants_1.PINO_CUSTOM_CONTEXT_KEY){return logger[customContextKey]=context,logger}function getLoggerContext(logger,customContextKey=constants_1.PINO_CUSTOM_CONTEXT_KEY){return void 0===logger.bindings?getBrowserLoggerContext(logger,customContextKey):logger.bindings().context||""}function formatChildLoggerContext(logger,childContext,customContextKey=constants_1.PINO_CUSTOM_CONTEXT_KEY){let parentContext=getLoggerContext(logger,customContextKey),context=parentContext.trim()?`${parentContext}/${childContext}`:childContext;return context}exports.getDefaultLoggerOptions=function(opts){return Object.assign(Object.assign({},opts),{level:(null==opts?void 0:opts.level)||constants_1.PINO_LOGGER_DEFAULTS.level})},exports.getBrowserLoggerContext=getBrowserLoggerContext,exports.setBrowserLoggerContext=setBrowserLoggerContext,exports.getLoggerContext=getLoggerContext,exports.formatChildLoggerContext=formatChildLoggerContext,exports.generateChildLogger=function(logger,childContext,customContextKey=constants_1.PINO_CUSTOM_CONTEXT_KEY){let context=formatChildLoggerContext(logger,childContext,customContextKey),child=logger.child({context});return setBrowserLoggerContext(child,context,customContextKey)}},57121:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{__assign:function(){return __assign},__asyncDelegator:function(){return __asyncDelegator},__asyncGenerator:function(){return __asyncGenerator},__asyncValues:function(){return __asyncValues},__await:function(){return __await},__awaiter:function(){return __awaiter},__classPrivateFieldGet:function(){return __classPrivateFieldGet},__classPrivateFieldSet:function(){return __classPrivateFieldSet},__createBinding:function(){return __createBinding},__decorate:function(){return __decorate},__exportStar:function(){return __exportStar},__extends:function(){return __extends},__generator:function(){return __generator},__importDefault:function(){return __importDefault},__importStar:function(){return __importStar},__makeTemplateObject:function(){return __makeTemplateObject},__metadata:function(){return __metadata},__param:function(){return __param},__read:function(){return __read},__rest:function(){return __rest},__spread:function(){return __spread},__spreadArrays:function(){return __spreadArrays},__values:function(){return __values}});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */ var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)};function __extends(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}var __assign=function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};function __rest(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&0>e.indexOf(p)&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,p=Object.getOwnPropertySymbols(s);i<p.length;i++)0>e.indexOf(p[i])&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]]);return t}function __decorate(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r}function __param(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}}function __metadata(metadataKey,metadataValue){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(metadataKey,metadataValue)}function __awaiter(thisArg,_arguments,P,generator){return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):((value=result.value)instanceof P?value:new P(function(resolve){resolve(value)})).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})}function __generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}}function __createBinding(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}function __exportStar(m,exports){for(var p in m)"default"===p||exports.hasOwnProperty(p)||(exports[p]=m[p])}function __values(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar}function __spread(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read(arguments[i]));return ar}function __spreadArrays(){for(var s=0,i=0,il=arguments.length;i<il;i++)s+=arguments[i].length;for(var r=Array(s),k=0,i=0;i<il;i++)for(var a=arguments[i],j=0,jl=a.length;j<jl;j++,k++)r[k]=a[j];return r}function __await(v){return this instanceof __await?(this.v=v,this):new __await(v)}function __asyncGenerator(thisArg,_arguments,generator){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var i,g=generator.apply(thisArg,_arguments||[]),q=[];return i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i;function verb(n){g[n]&&(i[n]=function(v){return new Promise(function(a,b){q.push([n,v,a,b])>1||resume(n,v)})})}function resume(n,v){try{var r;(r=g[n](v)).value instanceof __await?Promise.resolve(r.value.v).then(fulfill,reject):settle(q[0][2],r)}catch(e){settle(q[0][3],e)}}function fulfill(value){resume("next",value)}function reject(value){resume("throw",value)}function settle(f,v){f(v),q.shift(),q.length&&resume(q[0][0],q[0][1])}}function __asyncDelegator(o){var i,p;return i={},verb("next"),verb("throw",function(e){throw e}),verb("return"),i[Symbol.iterator]=function(){return this},i;function verb(n,f){i[n]=o[n]?function(v){return(p=!p)?{value:__await(o[n](v)),done:"return"===n}:f?f(v):v}:f}}function __asyncValues(o){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var i,m=o[Symbol.asyncIterator];return m?m.call(o):(o=__values(o),i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i);function verb(n){i[n]=o[n]&&function(v){return new Promise(function(resolve,reject){!function(resolve,reject,d,v){Promise.resolve(v).then(function(v){resolve({value:v,done:d})},reject)}(resolve,reject,(v=o[n](v)).done,v.value)})}}}function __makeTemplateObject(cooked,raw){return Object.defineProperty?Object.defineProperty(cooked,"raw",{value:raw}):cooked.raw=raw,cooked}function __importStar(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)Object.hasOwnProperty.call(mod,k)&&(result[k]=mod[k]);return result.default=mod,result}function __importDefault(mod){return mod&&mod.__esModule?mod:{default:mod}}function __classPrivateFieldGet(receiver,privateMap){if(!privateMap.has(receiver))throw TypeError("attempted to get private field on non-instance");return privateMap.get(receiver)}function __classPrivateFieldSet(receiver,privateMap,value){if(!privateMap.has(receiver))throw TypeError("attempted to set private field on non-instance");return privateMap.set(receiver,value),value}},61882:function(){},43014:function(){},18495:function(__unused_webpack_module,exports){"use strict";function getFromWindow(name){let res;return"undefined"!=typeof window&&void 0!==window[name]&&(res=window[name]),res}function getFromWindowOrThrow(name){let res=getFromWindow(name);if(!res)throw Error(`${name} is not defined in Window`);return res}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getLocalStorage=exports.getLocalStorageOrThrow=exports.getCrypto=exports.getCryptoOrThrow=exports.getLocation=exports.getLocationOrThrow=exports.getNavigator=exports.getNavigatorOrThrow=exports.getDocument=exports.getDocumentOrThrow=exports.getFromWindowOrThrow=exports.getFromWindow=void 0,exports.getFromWindow=getFromWindow,exports.getFromWindowOrThrow=getFromWindowOrThrow,exports.getDocumentOrThrow=function(){return getFromWindowOrThrow("document")},exports.getDocument=function(){return getFromWindow("document")},exports.getNavigatorOrThrow=function(){return getFromWindowOrThrow("navigator")},exports.getNavigator=function(){return getFromWindow("navigator")},exports.getLocationOrThrow=function(){return getFromWindowOrThrow("location")},exports.getLocation=function(){return getFromWindow("location")},exports.getCryptoOrThrow=function(){return getFromWindowOrThrow("crypto")},exports.getCrypto=function(){return getFromWindow("crypto")},exports.getLocalStorageOrThrow=function(){return getFromWindowOrThrow("localStorage")},exports.getLocalStorage=function(){return getFromWindow("localStorage")}},20416:function(__unused_webpack_module,exports,__webpack_require__){"use strict";exports.D=void 0;let window_getters_1=__webpack_require__(18495);exports.D=function(){let doc,loc,name;try{doc=window_getters_1.getDocumentOrThrow(),loc=window_getters_1.getLocationOrThrow()}catch(e){return null}function getWindowMetadataOfAny(...args){let metaTags=doc.getElementsByTagName("meta");for(let i=0;i<metaTags.length;i++){let tag=metaTags[i],attributes=["itemprop","property","name"].map(target=>tag.getAttribute(target)).filter(attr=>!!attr&&args.includes(attr));if(attributes.length&&attributes){let content=tag.getAttribute("content");if(content)return content}}return""}let name1=((name=getWindowMetadataOfAny("name","og:site_name","og:title","twitter:title"))||(name=doc.title),name),description=function(){let description=getWindowMetadataOfAny("description","og:description","twitter:description","keywords");return description}(),url=loc.origin,icons=function(){let links=doc.getElementsByTagName("link"),icons=[];for(let i=0;i<links.length;i++){let link=links[i],rel=link.getAttribute("rel");if(rel&&rel.toLowerCase().indexOf("icon")>-1){let href=link.getAttribute("href");if(href){if(-1===href.toLowerCase().indexOf("https:")&&-1===href.toLowerCase().indexOf("http:")&&0!==href.indexOf("//")){let absoluteHref=loc.protocol+"//"+loc.host;if(0===href.indexOf("/"))absoluteHref+=href;else{let path=loc.pathname.split("/");path.pop();let finalPath=path.join("/");absoluteHref+=finalPath+"/"+href}icons.push(absoluteHref)}else if(0===href.indexOf("//")){let absoluteUrl=loc.protocol+href;icons.push(absoluteUrl)}else icons.push(href)}}}return icons}();return{description,url,icons,name:name1}}},87338:function(__unused_webpack_module,exports,__webpack_require__){"use strict";let strictUriEncode=__webpack_require__(70610),decodeComponent=__webpack_require__(44020),splitOnFirst=__webpack_require__(80500),filterObject=__webpack_require__(92806),isNullOrUndefined=value=>null==value,encodeFragmentIdentifier=Symbol("encodeFragmentIdentifier");function validateArrayFormatSeparator(value){if("string"!=typeof value||1!==value.length)throw TypeError("arrayFormatSeparator must be single character string")}function encode(value,options){return options.encode?options.strict?strictUriEncode(value):encodeURIComponent(value):value}function decode(value,options){return options.decode?decodeComponent(value):value}function removeHash(input){let hashStart=input.indexOf("#");return -1!==hashStart&&(input=input.slice(0,hashStart)),input}function extract(input){input=removeHash(input);let queryStart=input.indexOf("?");return -1===queryStart?"":input.slice(queryStart+1)}function parseValue(value,options){return options.parseNumbers&&!Number.isNaN(Number(value))&&"string"==typeof value&&""!==value.trim()?value=Number(value):options.parseBooleans&&null!==value&&("true"===value.toLowerCase()||"false"===value.toLowerCase())&&(value="true"===value.toLowerCase()),value}function parse(query,options){validateArrayFormatSeparator((options=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},options)).arrayFormatSeparator);let formatter=function(options){let result;switch(options.arrayFormat){case"index":return(key,value,accumulator)=>{if(result=/\[(\d*)\]$/.exec(key),key=key.replace(/\[\d*\]$/,""),!result){accumulator[key]=value;return}void 0===accumulator[key]&&(accumulator[key]={}),accumulator[key][result[1]]=value};case"bracket":return(key,value,accumulator)=>{if(result=/(\[\])$/.exec(key),key=key.replace(/\[\]$/,""),!result){accumulator[key]=value;return}if(void 0===accumulator[key]){accumulator[key]=[value];return}accumulator[key]=[].concat(accumulator[key],value)};case"colon-list-separator":return(key,value,accumulator)=>{if(result=/(:list)$/.exec(key),key=key.replace(/:list$/,""),!result){accumulator[key]=value;return}if(void 0===accumulator[key]){accumulator[key]=[value];return}accumulator[key]=[].concat(accumulator[key],value)};case"comma":case"separator":return(key,value,accumulator)=>{let isArray="string"==typeof value&&value.includes(options.arrayFormatSeparator),isEncodedArray="string"==typeof value&&!isArray&&decode(value,options).includes(options.arrayFormatSeparator);value=isEncodedArray?decode(value,options):value;let newValue=isArray||isEncodedArray?value.split(options.arrayFormatSeparator).map(item=>decode(item,options)):null===value?value:decode(value,options);accumulator[key]=newValue};case"bracket-separator":return(key,value,accumulator)=>{let isArray=/(\[\])$/.test(key);if(key=key.replace(/\[\]$/,""),!isArray){accumulator[key]=value?decode(value,options):value;return}let arrayValue=null===value?[]:value.split(options.arrayFormatSeparator).map(item=>decode(item,options));if(void 0===accumulator[key]){accumulator[key]=arrayValue;return}accumulator[key]=[].concat(accumulator[key],arrayValue)};default:return(key,value,accumulator)=>{if(void 0===accumulator[key]){accumulator[key]=value;return}accumulator[key]=[].concat(accumulator[key],value)}}}(options),ret=Object.create(null);if("string"!=typeof query||!(query=query.trim().replace(/^[?#&]/,"")))return ret;for(let param of query.split("&")){if(""===param)continue;let[key,value]=splitOnFirst(options.decode?param.replace(/\+/g," "):param,"=");value=void 0===value?null:["comma","separator","bracket-separator"].includes(options.arrayFormat)?value:decode(value,options),formatter(decode(key,options),value,ret)}for(let key1 of Object.keys(ret)){let value1=ret[key1];if("object"==typeof value1&&null!==value1)for(let k of Object.keys(value1))value1[k]=parseValue(value1[k],options);else ret[key1]=parseValue(value1,options)}return!1===options.sort?ret:(!0===options.sort?Object.keys(ret).sort():Object.keys(ret).sort(options.sort)).reduce((result,key)=>{let value=ret[key];return Boolean(value)&&"object"==typeof value&&!Array.isArray(value)?result[key]=function keysSorter(input){return Array.isArray(input)?input.sort():"object"==typeof input?keysSorter(Object.keys(input)).sort((a,b)=>Number(a)-Number(b)).map(key=>input[key]):input}(value):result[key]=value,result},Object.create(null))}exports.extract=extract,exports.parse=parse,exports.stringify=(object,options)=>{if(!object)return"";validateArrayFormatSeparator((options=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},options)).arrayFormatSeparator);let shouldFilter=key=>options.skipNull&&isNullOrUndefined(object[key])||options.skipEmptyString&&""===object[key],formatter=function(options){switch(options.arrayFormat){case"index":return key=>(result,value)=>{let index=result.length;return void 0===value||options.skipNull&&null===value||options.skipEmptyString&&""===value?result:null===value?[...result,[encode(key,options),"[",index,"]"].join("")]:[...result,[encode(key,options),"[",encode(index,options),"]=",encode(value,options)].join("")]};case"bracket":return key=>(result,value)=>void 0===value||options.skipNull&&null===value||options.skipEmptyString&&""===value?result:null===value?[...result,[encode(key,options),"[]"].join("")]:[...result,[encode(key,options),"[]=",encode(value,options)].join("")];case"colon-list-separator":return key=>(result,value)=>void 0===value||options.skipNull&&null===value||options.skipEmptyString&&""===value?result:null===value?[...result,[encode(key,options),":list="].join("")]:[...result,[encode(key,options),":list=",encode(value,options)].join("")];case"comma":case"separator":case"bracket-separator":{let keyValueSep="bracket-separator"===options.arrayFormat?"[]=":"=";return key=>(result,value)=>void 0===value||options.skipNull&&null===value||options.skipEmptyString&&""===value?result:(value=null===value?"":value,0===result.length)?[[encode(key,options),keyValueSep,encode(value,options)].join("")]:[[result,encode(value,options)].join(options.arrayFormatSeparator)]}default:return key=>(result,value)=>void 0===value||options.skipNull&&null===value||options.skipEmptyString&&""===value?result:null===value?[...result,encode(key,options)]:[...result,[encode(key,options),"=",encode(value,options)].join("")]}}(options),objectCopy={};for(let key of Object.keys(object))shouldFilter(key)||(objectCopy[key]=object[key]);let keys=Object.keys(objectCopy);return!1!==options.sort&&keys.sort(options.sort),keys.map(key=>{let value=object[key];return void 0===value?"":null===value?encode(key,options):Array.isArray(value)?0===value.length&&"bracket-separator"===options.arrayFormat?encode(key,options)+"[]":value.reduce(formatter(key),[]).join("&"):encode(key,options)+"="+encode(value,options)}).filter(x=>x.length>0).join("&")},exports.parseUrl=(url,options)=>{options=Object.assign({decode:!0},options);let[url_,hash]=splitOnFirst(url,"#");return Object.assign({url:url_.split("?")[0]||"",query:parse(extract(url),options)},options&&options.parseFragmentIdentifier&&hash?{fragmentIdentifier:decode(hash,options)}:{})},exports.stringifyUrl=(object,options)=>{options=Object.assign({encode:!0,strict:!0,[encodeFragmentIdentifier]:!0},options);let url=removeHash(object.url).split("?")[0]||"",queryFromUrl=exports.extract(object.url),parsedQueryFromUrl=exports.parse(queryFromUrl,{sort:!1}),query=Object.assign(parsedQueryFromUrl,object.query),queryString=exports.stringify(query,options);queryString&&(queryString=`?${queryString}`);let hash=function(url){let hash="",hashStart=url.indexOf("#");return -1!==hashStart&&(hash=url.slice(hashStart)),hash}(object.url);return object.fragmentIdentifier&&(hash=`#${options[encodeFragmentIdentifier]?encode(object.fragmentIdentifier,options):object.fragmentIdentifier}`),`${url}${queryString}${hash}`},exports.pick=(input,filter,options)=>{options=Object.assign({parseFragmentIdentifier:!0,[encodeFragmentIdentifier]:!1},options);let{url,query,fragmentIdentifier}=exports.parseUrl(input,options);return exports.stringifyUrl({url,query:filterObject(query,filter),fragmentIdentifier},options)},exports.exclude=(input,filter,options)=>{let exclusionFilter=Array.isArray(filter)?key=>!filter.includes(key):(key,value)=>!filter(key,value);return exports.pick(input,exclusionFilter,options)}},36900:function(__unused_webpack_module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});let tslib_1=__webpack_require__(30004);tslib_1.__exportStar(__webpack_require__(46869),exports),tslib_1.__exportStar(__webpack_require__(88033),exports)},46869:function(__unused_webpack_module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ONE_THOUSAND=exports.ONE_HUNDRED=void 0,exports.ONE_HUNDRED=100,exports.ONE_THOUSAND=1e3},88033:function(__unused_webpack_module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ONE_YEAR=exports.FOUR_WEEKS=exports.THREE_WEEKS=exports.TWO_WEEKS=exports.ONE_WEEK=exports.THIRTY_DAYS=exports.SEVEN_DAYS=exports.FIVE_DAYS=exports.THREE_DAYS=exports.ONE_DAY=exports.TWENTY_FOUR_HOURS=exports.TWELVE_HOURS=exports.SIX_HOURS=exports.THREE_HOURS=exports.ONE_HOUR=exports.SIXTY_MINUTES=exports.THIRTY_MINUTES=exports.TEN_MINUTES=exports.FIVE_MINUTES=exports.ONE_MINUTE=exports.SIXTY_SECONDS=exports.THIRTY_SECONDS=exports.TEN_SECONDS=exports.FIVE_SECONDS=exports.ONE_SECOND=void 0,exports.ONE_SECOND=1,exports.FIVE_SECONDS=5,exports.TEN_SECONDS=10,exports.THIRTY_SECONDS=30,exports.SIXTY_SECONDS=60,exports.ONE_MINUTE=exports.SIXTY_SECONDS,exports.FIVE_MINUTES=5*exports.ONE_MINUTE,exports.TEN_MINUTES=10*exports.ONE_MINUTE,exports.THIRTY_MINUTES=30*exports.ONE_MINUTE,exports.SIXTY_MINUTES=60*exports.ONE_MINUTE,exports.ONE_HOUR=exports.SIXTY_MINUTES,exports.THREE_HOURS=3*exports.ONE_HOUR,exports.SIX_HOURS=6*exports.ONE_HOUR,exports.TWELVE_HOURS=12*exports.ONE_HOUR,exports.TWENTY_FOUR_HOURS=24*exports.ONE_HOUR,exports.ONE_DAY=exports.TWENTY_FOUR_HOURS,exports.THREE_DAYS=3*exports.ONE_DAY,exports.FIVE_DAYS=5*exports.ONE_DAY,exports.SEVEN_DAYS=7*exports.ONE_DAY,exports.THIRTY_DAYS=30*exports.ONE_DAY,exports.ONE_WEEK=exports.SEVEN_DAYS,exports.TWO_WEEKS=2*exports.ONE_WEEK,exports.THREE_WEEKS=3*exports.ONE_WEEK,exports.FOUR_WEEKS=4*exports.ONE_WEEK,exports.ONE_YEAR=365*exports.ONE_DAY},66736:function(__unused_webpack_module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});let tslib_1=__webpack_require__(30004);tslib_1.__exportStar(__webpack_require__(44273),exports),tslib_1.__exportStar(__webpack_require__(47001),exports),tslib_1.__exportStar(__webpack_require__(52939),exports),tslib_1.__exportStar(__webpack_require__(36900),exports)},52939:function(__unused_webpack_module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});let tslib_1=__webpack_require__(30004);tslib_1.__exportStar(__webpack_require__(88766),exports)},88766:function(__unused_webpack_module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.IWatch=void 0,exports.IWatch=class{}},83207:function(__unused_webpack_module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fromMiliseconds=exports.toMiliseconds=void 0;let constants_1=__webpack_require__(36900);exports.toMiliseconds=function(seconds){return seconds*constants_1.ONE_THOUSAND},exports.fromMiliseconds=function(miliseconds){return Math.floor(miliseconds/constants_1.ONE_THOUSAND)}},83873:function(__unused_webpack_module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.delay=void 0,exports.delay=function(timeout){return new Promise(resolve=>{setTimeout(()=>{resolve(!0)},timeout)})}},44273:function(__unused_webpack_module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});let tslib_1=__webpack_require__(30004);tslib_1.__exportStar(__webpack_require__(83873),exports),tslib_1.__exportStar(__webpack_require__(83207),exports)},47001:function(__unused_webpack_module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Watch=void 0;class Watch{constructor(){this.timestamps=new Map}start(label){if(this.timestamps.has(label))throw Error(`Watch already started for label: ${label}`);this.timestamps.set(label,{started:Date.now()})}stop(label){let timestamp=this.get(label);if(void 0!==timestamp.elapsed)throw Error(`Watch already stopped for label: ${label}`);let elapsed=Date.now()-timestamp.started;this.timestamps.set(label,{started:timestamp.started,elapsed})}get(label){let timestamp=this.timestamps.get(label);if(void 0===timestamp)throw Error(`No timestamp found for label: ${label}`);return timestamp}elapsed(label){let timestamp=this.get(label),elapsed=timestamp.elapsed||Date.now()-timestamp.started;return elapsed}}exports.Watch=Watch,exports.default=Watch},30004:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{__assign:function(){return __assign},__asyncDelegator:function(){return __asyncDelegator},__asyncGenerator:function(){return __asyncGenerator},__asyncValues:function(){return __asyncValues},__await:function(){return __await},__awaiter:function(){return __awaiter},__classPrivateFieldGet:function(){return __classPrivateFieldGet},__classPrivateFieldSet:function(){return __classPrivateFieldSet},__createBinding:function(){return __createBinding},__decorate:function(){return __decorate},__exportStar:function(){return __exportStar},__extends:function(){return __extends},__generator:function(){return __generator},__importDefault:function(){return __importDefault},__importStar:function(){return __importStar},__makeTemplateObject:function(){return __makeTemplateObject},__metadata:function(){return __metadata},__param:function(){return __param},__read:function(){return __read},__rest:function(){return __rest},__spread:function(){return __spread},__spreadArrays:function(){return __spreadArrays},__values:function(){return __values}});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */ var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)};function __extends(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}var __assign=function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};function __rest(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&0>e.indexOf(p)&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,p=Object.getOwnPropertySymbols(s);i<p.length;i++)0>e.indexOf(p[i])&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]]);return t}function __decorate(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r}function __param(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}}function __metadata(metadataKey,metadataValue){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(metadataKey,metadataValue)}function __awaiter(thisArg,_arguments,P,generator){return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):((value=result.value)instanceof P?value:new P(function(resolve){resolve(value)})).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})}function __generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}}function __createBinding(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}function __exportStar(m,exports){for(var p in m)"default"===p||exports.hasOwnProperty(p)||(exports[p]=m[p])}function __values(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar}function __spread(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read(arguments[i]));return ar}function __spreadArrays(){for(var s=0,i=0,il=arguments.length;i<il;i++)s+=arguments[i].length;for(var r=Array(s),k=0,i=0;i<il;i++)for(var a=arguments[i],j=0,jl=a.length;j<jl;j++,k++)r[k]=a[j];return r}function __await(v){return this instanceof __await?(this.v=v,this):new __await(v)}function __asyncGenerator(thisArg,_arguments,generator){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var i,g=generator.apply(thisArg,_arguments||[]),q=[];return i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i;function verb(n){g[n]&&(i[n]=function(v){return new Promise(function(a,b){q.push([n,v,a,b])>1||resume(n,v)})})}function resume(n,v){try{var r;(r=g[n](v)).value instanceof __await?Promise.resolve(r.value.v).then(fulfill,reject):settle(q[0][2],r)}catch(e){settle(q[0][3],e)}}function fulfill(value){resume("next",value)}function reject(value){resume("throw",value)}function settle(f,v){f(v),q.shift(),q.length&&resume(q[0][0],q[0][1])}}function __asyncDelegator(o){var i,p;return i={},verb("next"),verb("throw",function(e){throw e}),verb("return"),i[Symbol.iterator]=function(){return this},i;function verb(n,f){i[n]=o[n]?function(v){return(p=!p)?{value:__await(o[n](v)),done:"return"===n}:f?f(v):v}:f}}function __asyncValues(o){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var i,m=o[Symbol.asyncIterator];return m?m.call(o):(o=__values(o),i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i);function verb(n){i[n]=o[n]&&function(v){return new Promise(function(resolve,reject){!function(resolve,reject,d,v){Promise.resolve(v).then(function(v){resolve({value:v,done:d})},reject)}(resolve,reject,(v=o[n](v)).done,v.value)})}}}function __makeTemplateObject(cooked,raw){return Object.defineProperty?Object.defineProperty(cooked,"raw",{value:raw}):cooked.raw=raw,cooked}function __importStar(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)Object.hasOwnProperty.call(mod,k)&&(result[k]=mod[k]);return result.default=mod,result}function __importDefault(mod){return mod&&mod.__esModule?mod:{default:mod}}function __classPrivateFieldGet(receiver,privateMap){if(!privateMap.has(receiver))throw TypeError("attempted to get private field on non-instance");return privateMap.get(receiver)}function __classPrivateFieldSet(receiver,privateMap,value){if(!privateMap.has(receiver))throw TypeError("attempted to set private field on non-instance");return privateMap.set(receiver,value),value}},78573:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{UniversalProvider:function(){return universal_provider_dist_index_es_U},default:function(){return o}});var identity_namespaceObject={};__webpack_require__.r(identity_namespaceObject),__webpack_require__.d(identity_namespaceObject,{identity:function(){return identity}});var base2_namespaceObject={};__webpack_require__.r(base2_namespaceObject),__webpack_require__.d(base2_namespaceObject,{base2:function(){return base2}});var base8_namespaceObject={};__webpack_require__.r(base8_namespaceObject),__webpack_require__.d(base8_namespaceObject,{base8:function(){return base8}});var base10_namespaceObject={};__webpack_require__.r(base10_namespaceObject),__webpack_require__.d(base10_namespaceObject,{base10:function(){return base10}});var base16_namespaceObject={};__webpack_require__.r(base16_namespaceObject),__webpack_require__.d(base16_namespaceObject,{base16:function(){return base16},base16upper:function(){return base16upper}});var base32_namespaceObject={};__webpack_require__.r(base32_namespaceObject),__webpack_require__.d(base32_namespaceObject,{base32:function(){return base32_base32},base32hex:function(){return base32hex},base32hexpad:function(){return base32hexpad},base32hexpadupper:function(){return base32hexpadupper},base32hexupper:function(){return base32hexupper},base32pad:function(){return base32pad},base32padupper:function(){return base32padupper},base32upper:function(){return base32upper},base32z:function(){return base32z}});var base36_namespaceObject={};__webpack_require__.r(base36_namespaceObject),__webpack_require__.d(base36_namespaceObject,{base36:function(){return base36},base36upper:function(){return base36upper}});var base58_namespaceObject={};__webpack_require__.r(base58_namespaceObject),__webpack_require__.d(base58_namespaceObject,{base58btc:function(){return base58_base58btc},base58flickr:function(){return base58flickr}});var base64_namespaceObject={};__webpack_require__.r(base64_namespaceObject),__webpack_require__.d(base64_namespaceObject,{base64:function(){return base64},base64pad:function(){return base64pad},base64url:function(){return base64url},base64urlpad:function(){return base64urlpad}});var base256emoji_namespaceObject={};__webpack_require__.r(base256emoji_namespaceObject),__webpack_require__.d(base256emoji_namespaceObject,{base256emoji:function(){return base256emoji}});var sha2_browser_namespaceObject={};__webpack_require__.r(sha2_browser_namespaceObject),__webpack_require__.d(sha2_browser_namespaceObject,{sha256:function(){return sha256},sha512:function(){return sha512}});var hashes_identity_namespaceObject={};__webpack_require__.r(hashes_identity_namespaceObject),__webpack_require__.d(hashes_identity_namespaceObject,{identity:function(){return identity_identity}});var raw_namespaceObject={};__webpack_require__.r(raw_namespaceObject),__webpack_require__.d(raw_namespaceObject,{code:function(){return raw_code},decode:function(){return raw_decode},encode:function(){return raw_encode},name:function(){return raw_name}});var json_namespaceObject={};__webpack_require__.r(json_namespaceObject),__webpack_require__.d(json_namespaceObject,{code:function(){return json_code},decode:function(){return json_decode},encode:function(){return json_encode},name:function(){return json_name}});var browser=__webpack_require__(36559),browser_default=__webpack_require__.n(browser),events=__webpack_require__(17187),events_default=__webpack_require__.n(events),cjs_browser=__webpack_require__(85150),cjs=__webpack_require__(90772),dist_cjs=__webpack_require__(9107),esm_events=__webpack_require__(38200);class n extends esm_events.q{constructor(s){super(),this.opts=s,this.protocol="wc",this.version=2}}class h extends esm_events.q{constructor(s,t){super(),this.core=s,this.logger=t,this.records=new Map}}class a{constructor(s,t){this.logger=s,this.core=t}}class u extends esm_events.q{constructor(s,t){super(),this.relayer=s,this.logger=t}}class g extends esm_events.q{constructor(s){super()}}class p{constructor(s,t,o,S){this.core=s,this.logger=t,this.name=o}}class x extends esm_events.q{constructor(s,t){super(),this.relayer=s,this.logger=t}}class E extends esm_events.q{constructor(s,t){super(),this.core=s,this.logger=t}}class y{constructor(s){this.opts=s,this.protocol="wc",this.version=2}}class C{constructor(s){this.client=s}}var esm=__webpack_require__(85094),lib_ed25519=__webpack_require__(31050),random=__webpack_require__(31416),time_dist_cjs=__webpack_require__(66736);let constants_JWT_ENCODING="base64url",constants_MULTICODEC_ED25519_ENCODING="base58btc";function allocUnsafe(size=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?globalThis.Buffer.allocUnsafe(size):new Uint8Array(size)}function concat(arrays,length){length||(length=arrays.reduce((acc,curr)=>acc+curr.length,0));let output=allocUnsafe(length),offset=0;for(let arr of arrays)output.set(arr,offset),offset+=arr.length;return output}var base_x=function(ALPHABET,name){if(ALPHABET.length>=255)throw TypeError("Alphabet too long");for(var BASE_MAP=new Uint8Array(256),j=0;j<BASE_MAP.length;j++)BASE_MAP[j]=255;for(var i=0;i<ALPHABET.length;i++){var x=ALPHABET.charAt(i),xc=x.charCodeAt(0);if(255!==BASE_MAP[xc])throw TypeError(x+" is ambiguous");BASE_MAP[xc]=i}var BASE=ALPHABET.length,LEADER=ALPHABET.charAt(0),FACTOR=Math.log(BASE)/Math.log(256),iFACTOR=Math.log(256)/Math.log(BASE);function decodeUnsafe(source){if("string"!=typeof source)throw TypeError("Expected String");if(0===source.length)return new Uint8Array;var psz=0;if(" "!==source[0]){for(var zeroes=0,length=0;source[psz]===LEADER;)zeroes++,psz++;for(var size=(source.length-psz)*FACTOR+1>>>0,b256=new Uint8Array(size);source[psz];){var carry=BASE_MAP[source.charCodeAt(psz)];if(255===carry)return;for(var i=0,it3=size-1;(0!==carry||i<length)&&-1!==it3;it3--,i++)carry+=BASE*b256[it3]>>>0,b256[it3]=carry%256>>>0,carry=carry/256>>>0;if(0!==carry)throw Error("Non-zero carry");length=i,psz++}if(" "!==source[psz]){for(var it4=size-length;it4!==size&&0===b256[it4];)it4++;for(var vch=new Uint8Array(zeroes+(size-it4)),j=zeroes;it4!==size;)vch[j++]=b256[it4++];return vch}}}return{encode:function(source){if(source instanceof Uint8Array||(ArrayBuffer.isView(source)?source=new Uint8Array(source.buffer,source.byteOffset,source.byteLength):Array.isArray(source)&&(source=Uint8Array.from(source))),!(source instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===source.length)return"";for(var zeroes=0,length=0,pbegin=0,pend=source.length;pbegin!==pend&&0===source[pbegin];)pbegin++,zeroes++;for(var size=(pend-pbegin)*iFACTOR+1>>>0,b58=new Uint8Array(size);pbegin!==pend;){for(var carry=source[pbegin],i=0,it1=size-1;(0!==carry||i<length)&&-1!==it1;it1--,i++)carry+=256*b58[it1]>>>0,b58[it1]=carry%BASE>>>0,carry=carry/BASE>>>0;if(0!==carry)throw Error("Non-zero carry");length=i,pbegin++}for(var it2=size-length;it2!==size&&0===b58[it2];)it2++;for(var str=LEADER.repeat(zeroes);it2<size;++it2)str+=ALPHABET.charAt(b58[it2]);return str},decodeUnsafe:decodeUnsafe,decode:function(string){var buffer=decodeUnsafe(string);if(buffer)return buffer;throw Error(`Non-${name} character`)}}};new Uint8Array(0);let bytes_coerce=o=>{if(o instanceof Uint8Array&&"Uint8Array"===o.constructor.name)return o;if(o instanceof ArrayBuffer)return new Uint8Array(o);if(ArrayBuffer.isView(o))return new Uint8Array(o.buffer,o.byteOffset,o.byteLength);throw Error("Unknown type, must be binary type")},bytes_fromString=str=>new TextEncoder().encode(str),bytes_toString=b=>new TextDecoder().decode(b);class Encoder{constructor(name,prefix,baseEncode){this.name=name,this.prefix=prefix,this.baseEncode=baseEncode}encode(bytes){if(bytes instanceof Uint8Array)return`${this.prefix}${this.baseEncode(bytes)}`;throw Error("Unknown type, must be binary type")}}class Decoder{constructor(name,prefix,baseDecode){if(this.name=name,this.prefix=prefix,void 0===prefix.codePointAt(0))throw Error("Invalid prefix character");this.prefixCodePoint=prefix.codePointAt(0),this.baseDecode=baseDecode}decode(text){if("string"==typeof text){if(text.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(text)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(text.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(decoder){return or(this,decoder)}}class ComposedDecoder{constructor(decoders){this.decoders=decoders}or(decoder){return or(this,decoder)}decode(input){let prefix=input[0],decoder=this.decoders[prefix];if(decoder)return decoder.decode(input);throw RangeError(`Unable to decode multibase string ${JSON.stringify(input)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}let or=(left,right)=>new ComposedDecoder({...left.decoders||{[left.prefix]:left},...right.decoders||{[right.prefix]:right}});class Codec{constructor(name,prefix,baseEncode,baseDecode){this.name=name,this.prefix=prefix,this.baseEncode=baseEncode,this.baseDecode=baseDecode,this.encoder=new Encoder(name,prefix,baseEncode),this.decoder=new Decoder(name,prefix,baseDecode)}encode(input){return this.encoder.encode(input)}decode(input){return this.decoder.decode(input)}}let from=({name,prefix,encode,decode})=>new Codec(name,prefix,encode,decode),baseX=({prefix,name,alphabet})=>{let{encode,decode}=base_x(alphabet,name);return from({prefix,name,encode,decode:text=>bytes_coerce(decode(text))})},decode=(string,alphabet,bitsPerChar,name)=>{let codes={};for(let i=0;i<alphabet.length;++i)codes[alphabet[i]]=i;let end=string.length;for(;"="===string[end-1];)--end;let out=new Uint8Array(end*bitsPerChar/8|0),bits=0,buffer=0,written=0;for(let i1=0;i1<end;++i1){let value=codes[string[i1]];if(void 0===value)throw SyntaxError(`Non-${name} character`);buffer=buffer<<bitsPerChar|value,(bits+=bitsPerChar)>=8&&(bits-=8,out[written++]=255&buffer>>bits)}if(bits>=bitsPerChar||255&buffer<<8-bits)throw SyntaxError("Unexpected end of data");return out},encode=(data,alphabet,bitsPerChar)=>{let pad="="===alphabet[alphabet.length-1],mask=(1<<bitsPerChar)-1,out="",bits=0,buffer=0;for(let i=0;i<data.length;++i)for(buffer=buffer<<8|data[i],bits+=8;bits>bitsPerChar;)bits-=bitsPerChar,out+=alphabet[mask&buffer>>bits];if(bits&&(out+=alphabet[mask&buffer<<bitsPerChar-bits]),pad)for(;out.length*bitsPerChar&7;)out+="=";return out},rfc4648=({name,prefix,bitsPerChar,alphabet})=>from({prefix,name,encode:input=>encode(input,alphabet,bitsPerChar),decode:input=>decode(input,alphabet,bitsPerChar,name)}),identity=from({prefix:"\0",name:"identity",encode:buf=>bytes_toString(buf),decode:str=>bytes_fromString(str)}),base2=rfc4648({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),base8=rfc4648({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),base10=baseX({prefix:"9",name:"base10",alphabet:"0123456789"}),base16=rfc4648({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),base16upper=rfc4648({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),base32_base32=rfc4648({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),base32upper=rfc4648({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),base32pad=rfc4648({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),base32padupper=rfc4648({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),base32hex=rfc4648({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),base32hexupper=rfc4648({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),base32hexpad=rfc4648({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),base32hexpadupper=rfc4648({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),base32z=rfc4648({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),base36=baseX({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),base36upper=baseX({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),base58_base58btc=baseX({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),base58flickr=baseX({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),base64=rfc4648({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),base64pad=rfc4648({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),base64url=rfc4648({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),base64urlpad=rfc4648({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),alphabet=Array.from("\uD83D\uDE80\uD83E\uDE90☄\uD83D\uDEF0\uD83C\uDF0C\uD83C\uDF11\uD83C\uDF12\uD83C\uDF13\uD83C\uDF14\uD83C\uDF15\uD83C\uDF16\uD83C\uDF17\uD83C\uDF18\uD83C\uDF0D\uD83C\uDF0F\uD83C\uDF0E\uD83D\uDC09☀\uD83D\uDCBB\uD83D\uDDA5\uD83D\uDCBE\uD83D\uDCBF\uD83D\uDE02❤\uD83D\uDE0D\uD83E\uDD23\uD83D\uDE0A\uD83D\uDE4F\uD83D\uDC95\uD83D\uDE2D\uD83D\uDE18\uD83D\uDC4D\uD83D\uDE05\uD83D\uDC4F\uD83D\uDE01\uD83D\uDD25\uD83E\uDD70\uD83D\uDC94\uD83D\uDC96\uD83D\uDC99\uD83D\uDE22\uD83E\uDD14\uD83D\uDE06\uD83D\uDE44\uD83D\uDCAA\uD83D\uDE09☺\uD83D\uDC4C\uD83E\uDD17\uD83D\uDC9C\uD83D\uDE14\uD83D\uDE0E\uD83D\uDE07\uD83C\uDF39\uD83E\uDD26\uD83C\uDF89\uD83D\uDC9E✌✨\uD83E\uDD37\uD83D\uDE31\uD83D\uDE0C\uD83C\uDF38\uD83D\uDE4C\uD83D\uDE0B\uD83D\uDC97\uD83D\uDC9A\uD83D\uDE0F\uD83D\uDC9B\uD83D\uDE42\uD83D\uDC93\uD83E\uDD29\uD83D\uDE04\uD83D\uDE00\uD83D\uDDA4\uD83D\uDE03\uD83D\uDCAF\uD83D\uDE48\uD83D\uDC47\uD83C\uDFB6\uD83D\uDE12\uD83E\uDD2D❣\uD83D\uDE1C\uD83D\uDC8B\uD83D\uDC40\uD83D\uDE2A\uD83D\uDE11\uD83D\uDCA5\uD83D\uDE4B\uD83D\uDE1E\uD83D\uDE29\uD83D\uDE21\uD83E\uDD2A\uD83D\uDC4A\uD83E\uDD73\uD83D\uDE25\uD83E\uDD24\uD83D\uDC49\uD83D\uDC83\uD83D\uDE33✋\uD83D\uDE1A\uD83D\uDE1D\uD83D\uDE34\uD83C\uDF1F\uD83D\uDE2C\uD83D\uDE43\uD83C\uDF40\uD83C\uDF37\uD83D\uDE3B\uD83D\uDE13⭐✅\uD83E\uDD7A\uD83C\uDF08\uD83D\uDE08\uD83E\uDD18\uD83D\uDCA6✔\uD83D\uDE23\uD83C\uDFC3\uD83D\uDC90☹\uD83C\uDF8A\uD83D\uDC98\uD83D\uDE20☝\uD83D\uDE15\uD83C\uDF3A\uD83C\uDF82\uD83C\uDF3B\uD83D\uDE10\uD83D\uDD95\uD83D\uDC9D\uD83D\uDE4A\uD83D\uDE39\uD83D\uDDE3\uD83D\uDCAB\uD83D\uDC80\uD83D\uDC51\uD83C\uDFB5\uD83E\uDD1E\uD83D\uDE1B\uD83D\uDD34\uD83D\uDE24\uD83C\uDF3C\uD83D\uDE2B⚽\uD83E\uDD19☕\uD83C\uDFC6\uD83E\uDD2B\uD83D\uDC48\uD83D\uDE2E\uD83D\uDE46\uD83C\uDF7B\uD83C\uDF43\uD83D\uDC36\uD83D\uDC81\uD83D\uDE32\uD83C\uDF3F\uD83E\uDDE1\uD83C\uDF81⚡\uD83C\uDF1E\uD83C\uDF88❌✊\uD83D\uDC4B\uD83D\uDE30\uD83E\uDD28\uD83D\uDE36\uD83E\uDD1D\uD83D\uDEB6\uD83D\uDCB0\uD83C\uDF53\uD83D\uDCA2\uD83E\uDD1F\uD83D\uDE41\uD83D\uDEA8\uD83D\uDCA8\uD83E\uDD2C✈\uD83C\uDF80\uD83C\uDF7A\uD83E\uDD13\uD83D\uDE19\uD83D\uDC9F\uD83C\uDF31\uD83D\uDE16\uD83D\uDC76\uD83E\uDD74▶➡❓\uD83D\uDC8E\uD83D\uDCB8⬇\uD83D\uDE28\uD83C\uDF1A\uD83E\uDD8B\uD83D\uDE37\uD83D\uDD7A⚠\uD83D\uDE45\uD83D\uDE1F\uD83D\uDE35\uD83D\uDC4E\uD83E\uDD32\uD83E\uDD20\uD83E\uDD27\uD83D\uDCCC\uD83D\uDD35\uD83D\uDC85\uD83E\uDDD0\uD83D\uDC3E\uD83C\uDF52\uD83D\uDE17\uD83E\uDD11\uD83C\uDF0A\uD83E\uDD2F\uD83D\uDC37☎\uD83D\uDCA7\uD83D\uDE2F\uD83D\uDC86\uD83D\uDC46\uD83C\uDFA4\uD83D\uDE47\uD83C\uDF51❄\uD83C\uDF34\uD83D\uDCA3\uD83D\uDC38\uD83D\uDC8C\uD83D\uDCCD\uD83E\uDD40\uD83E\uDD22\uD83D\uDC45\uD83D\uDCA1\uD83D\uDCA9\uD83D\uDC50\uD83D\uDCF8\uD83D\uDC7B\uD83E\uDD10\uD83E\uDD2E\uD83C\uDFBC\uD83E\uDD75\uD83D\uDEA9\uD83C\uDF4E\uD83C\uDF4A\uD83D\uDC7C\uD83D\uDC8D\uD83D\uDCE3\uD83E\uDD42"),alphabetBytesToChars=alphabet.reduce((p,c,i)=>(p[i]=c,p),[]),alphabetCharsToBytes=alphabet.reduce((p,c,i)=>(p[c.codePointAt(0)]=i,p),[]),base256emoji=from({prefix:"\uD83D\uDE80",name:"base256emoji",encode:function(data){return data.reduce((p,c)=>p+=alphabetBytesToChars[c],"")},decode:function(str){let byts=[];for(let char of str){let byt=alphabetCharsToBytes[char.codePointAt(0)];if(void 0===byt)throw Error(`Non-base256emoji character: ${char}`);byts.push(byt)}return new Uint8Array(byts)}});function varint_encode(num,out,offset){out=out||[];for(var oldOffset=offset=offset||0;num>=2147483648;)out[offset++]=255&num|128,num/=128;for(;-128&num;)out[offset++]=255&num|128,num>>>=7;return out[offset]=0|num,varint_encode.bytes=offset-oldOffset+1,out}function read(buf,offset){var b,res=0,offset=offset||0,shift=0,counter=offset,l=buf.length;do{if(counter>=l)throw read.bytes=0,RangeError("Could not decode varint");b=buf[counter++],res+=shift<28?(127&b)<<shift:(127&b)*Math.pow(2,shift),shift+=7}while(b>=128);return read.bytes=counter-offset,res}var vendor_varint={encode:varint_encode,decode:read,encodingLength:function(value){return value<128?1:value<16384?2:value<2097152?3:value<268435456?4:value<34359738368?5:value<4398046511104?6:value<562949953421312?7:value<72057594037927940?8:value<0x7fffffffffffffff?9:10}};let encodeTo=(int,target,offset=0)=>(vendor_varint.encode(int,target,offset),target),encodingLength=int=>vendor_varint.encodingLength(int),create=(code,digest)=>{let size=digest.byteLength,sizeOffset=encodingLength(code),digestOffset=sizeOffset+encodingLength(size),bytes=new Uint8Array(digestOffset+size);return encodeTo(code,bytes,0),encodeTo(size,bytes,sizeOffset),bytes.set(digest,digestOffset),new digest_Digest(code,size,digest,bytes)};class digest_Digest{constructor(code,size,digest,bytes){this.code=code,this.size=size,this.digest=digest,this.bytes=bytes}}let hasher_from=({name,code,encode})=>new Hasher(name,code,encode);class Hasher{constructor(name,code,encode){this.name=name,this.code=code,this.encode=encode}digest(input){if(input instanceof Uint8Array){let result=this.encode(input);return result instanceof Uint8Array?create(this.code,result):result.then(digest=>create(this.code,digest))}throw Error("Unknown type, must be binary type")}}let sha=name=>async data=>new Uint8Array(await crypto.subtle.digest(name,data)),sha256=hasher_from({name:"sha2-256",code:18,encode:sha("SHA-256")}),sha512=hasher_from({name:"sha2-512",code:19,encode:sha("SHA-512")}),digest=input=>create(0,bytes_coerce(input)),identity_identity={code:0,name:"identity",encode:bytes_coerce,digest},raw_name="raw",raw_code=85,raw_encode=node=>bytes_coerce(node),raw_decode=data=>bytes_coerce(data),textEncoder=new TextEncoder,textDecoder=new TextDecoder,json_name="json",json_code=512,json_encode=node=>textEncoder.encode(JSON.stringify(node)),json_decode=data=>JSON.parse(textDecoder.decode(data));class CID{constructor(version,code,multihash,bytes){this.code=code,this.version=version,this.multihash=multihash,this.bytes=bytes,this.byteOffset=bytes.byteOffset,this.byteLength=bytes.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:cid_hidden,byteLength:cid_hidden,code:readonly,version:readonly,multihash:readonly,bytes:readonly,_baseCache:cid_hidden,asCID:cid_hidden})}toV0(){if(0===this.version)return this;{let{code,multihash}=this;if(code!==DAG_PB_CODE)throw Error("Cannot convert a non dag-pb CID to CIDv0");if(multihash.code!==SHA_256_CODE)throw Error("Cannot convert non sha2-256 multihash CID to CIDv0");return CID.createV0(multihash)}}toV1(){switch(this.version){case 0:{let{code,digest}=this.multihash,multihash=Digest.create(code,digest);return CID.createV1(this.code,multihash)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(other){return other&&this.code===other.code&&this.version===other.version&&Digest.equals(this.multihash,other.multihash)}toString(base){let{bytes,version,_baseCache}=this;return 0===version?toStringV0(bytes,_baseCache,base||base58btc.encoder):toStringV1(bytes,_baseCache,base||base32.encoder)}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(value){return deprecate(/^0\.0/,IS_CID_DEPRECATION),!!(value&&(value[cidSymbol]||value.asCID===value))}get toBaseEncodedString(){throw Error("Deprecated, use .toString()")}get codec(){throw Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw Error('"multibaseName" property is deprecated')}get prefix(){throw Error('"prefix" property is deprecated')}static asCID(value){if(value instanceof CID)return value;if(null!=value&&value.asCID===value){let{version,code,multihash,bytes}=value;return new CID(version,code,multihash,bytes||encodeCID(version,code,multihash.bytes))}if(null==value||!0!==value[cidSymbol])return null;{let{version:version1,multihash:multihash1,code:code1}=value,digest=Digest.decode(multihash1);return CID.create(version1,code1,digest)}}static create(version,code,digest){if("number"!=typeof code)throw Error("String codecs are no longer supported");switch(version){case 0:if(code===DAG_PB_CODE)return new CID(version,code,digest,digest.bytes);throw Error(`Version 0 CID must use dag-pb (code: ${DAG_PB_CODE}) block encoding`);case 1:{let bytes=encodeCID(version,code,digest.bytes);return new CID(version,code,digest,bytes)}default:throw Error("Invalid version")}}static createV0(digest){return CID.create(0,DAG_PB_CODE,digest)}static createV1(code,digest){return CID.create(1,code,digest)}static decode(bytes){let[cid,remainder]=CID.decodeFirst(bytes);if(remainder.length)throw Error("Incorrect length");return cid}static decodeFirst(bytes){let specs=CID.inspectBytes(bytes),prefixSize=specs.size-specs.multihashSize,multihashBytes=coerce(bytes.subarray(prefixSize,prefixSize+specs.multihashSize));if(multihashBytes.byteLength!==specs.multihashSize)throw Error("Incorrect length");let digestBytes=multihashBytes.subarray(specs.multihashSize-specs.digestSize),digest=new Digest.Digest(specs.multihashCode,specs.digestSize,digestBytes,multihashBytes),cid=0===specs.version?CID.createV0(digest):CID.createV1(specs.codec,digest);return[cid,bytes.subarray(specs.size)]}static inspectBytes(initialBytes){let offset=0,next=()=>{let[i,length]=varint.decode(initialBytes.subarray(offset));return offset+=length,i},version=next(),codec=DAG_PB_CODE;if(18===version?(version=0,offset=0):1===version&&(codec=next()),0!==version&&1!==version)throw RangeError(`Invalid CID version ${version}`);let prefixSize=offset,multihashCode=next(),digestSize=next(),size=offset+digestSize;return{version,codec,multihashCode,digestSize,multihashSize:size-prefixSize,size}}static parse(source,base){let[prefix,bytes]=parseCIDtoBytes(source,base),cid=CID.decode(bytes);return cid._baseCache.set(prefix,source),cid}}let parseCIDtoBytes=(source,base)=>{switch(source[0]){case"Q":{let decoder=base||base58btc;return[base58btc.prefix,decoder.decode(`${base58btc.prefix}${source}`)]}case base58btc.prefix:{let decoder1=base||base58btc;return[base58btc.prefix,decoder1.decode(source)]}case base32.prefix:{let decoder2=base||base32;return[base32.prefix,decoder2.decode(source)]}default:if(null==base)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[source[0],base.decode(source)]}},toStringV0=(bytes,cache,base)=>{let{prefix}=base;if(prefix!==base58btc.prefix)throw Error(`Cannot string encode V0 in ${base.name} encoding`);let cid=cache.get(prefix);if(null!=cid)return cid;{let cid1=base.encode(bytes).slice(1);return cache.set(prefix,cid1),cid1}},toStringV1=(bytes,cache,base)=>{let{prefix}=base,cid=cache.get(prefix);if(null!=cid)return cid;{let cid1=base.encode(bytes);return cache.set(prefix,cid1),cid1}},DAG_PB_CODE=112,SHA_256_CODE=18,encodeCID=(version,code,multihash)=>{let codeOffset=varint.encodingLength(version),hashOffset=codeOffset+varint.encodingLength(code),bytes=new Uint8Array(hashOffset+multihash.byteLength);return varint.encodeTo(version,bytes,0),varint.encodeTo(code,bytes,codeOffset),bytes.set(multihash,hashOffset),bytes},cidSymbol=Symbol.for("@ipld/js-cid/CID"),readonly={writable:!1,configurable:!1,enumerable:!0},cid_hidden={writable:!1,enumerable:!1,configurable:!1},deprecate=(range,message)=>{if(range.test("0.0.0-dev"))console.warn(message);else throw Error(message)},IS_CID_DEPRECATION=null,bases={...identity_namespaceObject,...base2_namespaceObject,...base8_namespaceObject,...base10_namespaceObject,...base16_namespaceObject,...base32_namespaceObject,...base36_namespaceObject,...base58_namespaceObject,...base64_namespaceObject,...base256emoji_namespaceObject};function createCodec(name,prefix,encode,decode){return{name,prefix,encoder:{name,prefix,encode},decoder:{decode}}}let string=createCodec("utf8","u",buf=>{let decoder=new TextDecoder("utf8");return"u"+decoder.decode(buf)},str=>{let encoder=new TextEncoder;return encoder.encode(str.substring(1))}),ascii=createCodec("ascii","a",buf=>{let string="a";for(let i=0;i<buf.length;i++)string+=String.fromCharCode(buf[i]);return string},str=>{str=str.substring(1);let buf=allocUnsafe(str.length);for(let i=0;i<str.length;i++)buf[i]=str.charCodeAt(i);return buf}),BASES={utf8:string,"utf-8":string,hex:bases.base16,latin1:ascii,ascii:ascii,binary:ascii,...bases};function to_string_toString(array,encoding="utf8"){let base=BASES[encoding];if(!base)throw Error(`Unsupported encoding "${encoding}"`);return("utf8"===encoding||"utf-8"===encoding)&&null!=globalThis.Buffer&&null!=globalThis.Buffer.from?globalThis.Buffer.from(array.buffer,array.byteOffset,array.byteLength).toString("utf8"):base.encoder.encode(array).substring(1)}function from_string_fromString(string,encoding="utf8"){let base=BASES[encoding];if(!base)throw Error(`Unsupported encoding "${encoding}"`);return("utf8"===encoding||"utf-8"===encoding)&&null!=globalThis.Buffer&&null!=globalThis.Buffer.from?globalThis.Buffer.from(string,"utf8"):base.decoder.decode(`${base.prefix}${string}`)}function encodeJSON(val){return to_string_toString(from_string_fromString((0,esm.u)(val),"utf8"),constants_JWT_ENCODING)}function encodeIss(publicKey){let header=from_string_fromString("K36",constants_MULTICODEC_ED25519_ENCODING),multicodec="z"+to_string_toString(concat([header,publicKey]),constants_MULTICODEC_ED25519_ENCODING);return["did","key",multicodec].join(":")}function generateKeyPair(seed=(0,random.randomBytes)(32)){return lib_ed25519._w(seed)}async function signJWT(sub,aud,ttl,keyPair,iat=(0,time_dist_cjs.fromMiliseconds)(Date.now())){var params,params1;let header={alg:"EdDSA",typ:"JWT"},iss=encodeIss(keyPair.publicKey),payload={iss,sub,aud,iat,exp:iat+ttl},data=from_string_fromString([encodeJSON((params={header,payload}).header),encodeJSON(params.payload)].join("."),"utf8"),signature=lib_ed25519.Xx(keyPair.secretKey,data);return[encodeJSON((params1={header,payload,signature}).header),encodeJSON(params1.payload),to_string_toString(params1.signature,constants_JWT_ENCODING)].join(".")}__webpack_require__(43014);var chacha20poly1305=__webpack_require__(15501),hkdf=__webpack_require__(512),lib_sha256=__webpack_require__(73294),x25519=__webpack_require__(57664),process=__webpack_require__(83454),__spreadArray=function(to,from,pack){if(pack||2==arguments.length)for(var ar,i=0,l=from.length;i<l;i++)!ar&&i in from||(ar||(ar=Array.prototype.slice.call(from,0,i)),ar[i]=from[i]);return to.concat(ar||Array.prototype.slice.call(from))},BrowserInfo=function(name,version,os){this.name=name,this.version=version,this.os=os,this.type="browser"},NodeInfo=function(version){this.version=version,this.type="node",this.name="node",this.os=process.platform},SearchBotDeviceInfo=function(name,version,os,bot){this.name=name,this.version=version,this.os=os,this.bot=bot,this.type="bot-device"},BotInfo=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},ReactNativeInfo=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},SEARCHBOT_OS_REGEX=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,userAgentRules=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],operatingSystemRules=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function parseUserAgent(ua){var matchedRule=""!==ua&&userAgentRules.reduce(function(matched,_a){var browser=_a[0],regex=_a[1];if(matched)return matched;var uaMatch=regex.exec(ua);return!!uaMatch&&[browser,uaMatch]},!1);if(!matchedRule)return null;var name=matchedRule[0],match=matchedRule[1];if("searchbot"===name)return new BotInfo;var versionParts=match[1]&&match[1].split(".").join("_").split("_").slice(0,3);versionParts?versionParts.length<3&&(versionParts=__spreadArray(__spreadArray([],versionParts,!0),function(count){for(var output=[],ii=0;ii<count;ii++)output.push("0");return output}(3-versionParts.length),!0)):versionParts=[];var version=versionParts.join("."),os=function(ua){for(var ii=0,count=operatingSystemRules.length;ii<count;ii++){var _a=operatingSystemRules[ii],os=_a[0];if(_a[1].exec(ua))return os}return null}(ua),searchBotMatch=SEARCHBOT_OS_REGEX.exec(ua);return searchBotMatch&&searchBotMatch[1]?new SearchBotDeviceInfo(name,version,os,searchBotMatch[1]):new BrowserInfo(name,version,os)}var window_getters_dist_cjs=__webpack_require__(18495),window_metadata_dist_cjs=__webpack_require__(20416),query_string=__webpack_require__(87338);__webpack_require__(61882);let RELAY_JSONRPC={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}};var index_es_process=__webpack_require__(83454);let V="base10",index_es_c="base16",R="base64pad",_="utf8";function an(){let e=(0,random.randomBytes)(32);return to_string_toString(e,index_es_c)}function ln(e){let n=(0,lib_sha256.vp)(from_string_fromString(e,_));return to_string_toString(n,index_es_c)}function S(e){return Number(to_string_toString(e,V))}function L(e){let n=from_string_fromString(e,R),t=n.slice(0,1);if(1===S(t)){let g=n.slice(1,33),O=n.slice(33,45),p=n.slice(45);return{type:t,sealed:p,iv:O,senderPublicKey:g}}let s=n.slice(1,13),i=n.slice(13);return{type:t,sealed:i,iv:s}}function pe(e){let n=e?.type||0;if(1===n){if(typeof e?.senderPublicKey>"u")throw Error("missing sender public key");if(typeof e?.receiverPublicKey>"u")throw Error("missing receiver public key")}return{type:n,senderPublicKey:e?.senderPublicKey,receiverPublicKey:e?.receiverPublicKey}}function yn(e){return 1===e.type&&"string"==typeof e.senderPublicKey&&"string"==typeof e.receiverPublicKey}var En=Object.defineProperty,me=Object.getOwnPropertySymbols,gn=Object.prototype.hasOwnProperty,hn=Object.prototype.propertyIsEnumerable,ye=(e,n,t)=>n in e?En(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,Ee=(e,n)=>{for(var t in n||(n={}))gn.call(n,t)&&ye(e,t,n[t]);if(me)for(var t of me(n))hn.call(n,t)&&ye(e,t,n[t]);return e};let index_es_v={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"};function F(){return"u">typeof index_es_process&&"u">typeof index_es_process.versions&&"u">typeof index_es_process.versions.node}function index_es_m(e,n){return e.filter(t=>n.includes(t)).length===e.length}function Un(e){return Object.fromEntries(e.entries())}function Rn(e){return new Map(Object.entries(e))}function Cn(e,n){return(0,time_dist_cjs.fromMiliseconds)((n||Date.now())+(0,time_dist_cjs.toMiliseconds)(e))}function Dn(e){return(0,time_dist_cjs.fromMiliseconds)(Date.now())>=(0,time_dist_cjs.toMiliseconds)(e)}function $n(e){let t,r,o;let n=(0,time_dist_cjs.toMiliseconds)(e||time_dist_cjs.FIVE_MINUTES);return{resolve(s){o&&t&&(clearTimeout(o),t(s))},reject(s){o&&r&&(clearTimeout(o),r(s))},done:()=>new Promise((s,i)=>{o=setTimeout(i,n),t=s,r=i})}}function jn(e,n){return new Promise(async(t,r)=>{let o=setTimeout(()=>r(),n),s=await e;clearTimeout(o),t(s)})}function q(e,n){if("string"==typeof n&&n.startsWith(`${e}:`))return n;if("topic"===e.toLowerCase()){if("string"!=typeof n)throw Error('Value must be "string" for expirer target type: topic');return`topic:${n}`}if("id"===e.toLowerCase()){if("number"!=typeof n)throw Error('Value must be "number" for expirer target type: id');return`id:${n}`}throw Error(`Unknown expirer target type: ${e}`)}function Kn(e){let[n,t]=e.split(":"),r={id:void 0,topic:void 0};if("topic"===n&&"string"==typeof t)r.topic=t;else if("id"===n&&Number.isInteger(Number(t)))r.id=Number(t);else throw Error(`Invalid target, expected id:number or topic:string, got ${n}:${t}`);return r}function kn(e,n){return`${e}${n?`:${n}`:""}`}function Ln(e){return e?.relay||{protocol:"irn"}}function xn(e){let n=RELAY_JSONRPC[e];if(typeof n>"u")throw Error(`Relay Protocol not supported: ${e}`);return n}var Fn=Object.defineProperty,Ae=Object.getOwnPropertySymbols,Hn=Object.prototype.hasOwnProperty,qn=Object.prototype.propertyIsEnumerable,we=(e,n,t)=>n in e?Fn(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,Bn=(e,n)=>{for(var t in n||(n={}))Hn.call(n,t)&&we(e,t,n[t]);if(Ae)for(var t of Ae(n))qn.call(n,t)&&we(e,t,n[t]);return e};function index_es_b(e){let n=[];return e.forEach(t=>{let[r,o]=t.split(":");n.push(`${r}:${o}`)}),n}let Wn={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},Jn={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function index_es_y(e,n){let{message:t,code:r}=Jn[e];return{message:n?`${t} ${n}`:t,code:r}}function index_es_h(e,n){let{message:t,code:r}=Wn[e];return{message:n?`${t} ${n}`:t,code:r}}function index_es_I(e,n){return!!Array.isArray(e)&&(!("u">typeof n)||!e.length||e.every(n))}function B(e){return Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length}function index_es_E(e){return typeof e>"u"}function index_es_a(e,n){return!!(n&&index_es_E(e))||"string"==typeof e&&Boolean(e.trim().length)}function w(e,n){return!!(n&&index_es_E(e))||"number"==typeof e&&!isNaN(e)}function index_es_C(e){return!!(index_es_a(e,!1)&&e.includes(":"))&&2===e.split(":").length}function G(e){let n=!0;return index_es_I(e)?e.length&&(n=e.every(t=>index_es_a(t,!1))):n=!1,n}function index_es_z(e,n){let t=null;return Object.values(e).forEach(r=>{var n1;let t1;if(t)return;let o=(n1=`${n}, namespace`,t1=null,G(r?.methods)?G(r?.events)||(t1=index_es_h("UNSUPPORTED_EVENTS",`${n1}, events should be an array of strings or empty array for no events`)):t1=index_es_h("UNSUPPORTED_METHODS",`${n1}, methods should be an array of strings or empty array for no methods`),t1);o&&(t=o)}),t}function He(e,n){let t=null;if(e&&B(e)){let t1;let r=index_es_z(e,n);r&&(t=r);let o=(t1=null,Object.values(e).forEach(r=>{var e,n1;let t;if(t1)return;let o=(e=r?.accounts,n1=`${n} namespace`,t=null,index_es_I(e)?e.forEach(r=>{t||function(e){if(index_es_a(e,!1)&&e.includes(":")){let n=e.split(":");if(3===n.length){let t=n[0]+":"+n[1];return!!n[2]&&index_es_C(t)}}return!1}(r)||(t=index_es_h("UNSUPPORTED_ACCOUNTS",`${n1}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):t=index_es_h("UNSUPPORTED_ACCOUNTS",`${n1}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),t);o&&(t1=o)}),t1);o&&(t=o)}else t=index_es_y("MISSING_OR_INVALID",`${n}, namespaces should be an object with data`);return t}function qe(e){return index_es_a(e.protocol,!0)}function st(e){return"u">typeof e}function dt(e,n){return!(!index_es_C(n)||!(function(e){let n=[];return Object.values(e).forEach(t=>{n.push(...index_es_b(t.accounts))}),n})(e).includes(n))}function pt(e,n,t){let r=null,o=Object.keys(e),s=Object.keys(n);return index_es_m(o,s)?o.forEach(i=>{if(r)return;let u=e[i].chains,f=index_es_b(n[i].accounts);index_es_m(u,f)?index_es_m(e[i].methods,n[i].methods)?index_es_m(e[i].events,n[i].events)||(r=index_es_y("NON_CONFORMING_NAMESPACES",`${t} namespaces events don't satisfy requiredNamespaces events for ${i}`)):r=index_es_y("NON_CONFORMING_NAMESPACES",`${t} namespaces methods don't satisfy requiredNamespaces methods for ${i}`):r=index_es_y("NON_CONFORMING_NAMESPACES",`${t} namespaces accounts don't satisfy requiredNamespaces chains for ${i}`)}):r=index_es_y("NON_CONFORMING_NAMESPACES",`${t} namespaces keys don't satisfy requiredNamespaces`),r}var dist_esm=__webpack_require__(46160),jsonrpc_utils_dist_esm=__webpack_require__(56186);let isBrowser=()=>"undefined"!=typeof window,WS=void 0!==__webpack_require__.g&&void 0!==__webpack_require__.g.WebSocket?__webpack_require__.g.WebSocket:"undefined"!=typeof window&&void 0!==window.WebSocket?window.WebSocket:__webpack_require__(72030);var ws=class{constructor(url){if(this.url=url,this.events=new events.EventEmitter,this.registering=!1,!(0,jsonrpc_utils_dist_esm.isWsUrl)(url))throw Error(`Provided URL is not compatible with WebSocket connection: ${url}`);this.url=url}get connected(){return void 0!==this.socket}get connecting(){return this.registering}on(event,listener){this.events.on(event,listener)}once(event,listener){this.events.once(event,listener)}off(event,listener){this.events.off(event,listener)}removeListener(event,listener){this.events.removeListener(event,listener)}async open(url=this.url){await this.register(url)}async close(){return new Promise((resolve,reject)=>{if(void 0===this.socket){reject(Error("Connection already closed"));return}this.socket.onclose=()=>{this.onClose(),resolve()},this.socket.close()})}async send(payload,context){void 0===this.socket&&(this.socket=await this.register());try{this.socket.send((0,esm.u)(payload))}catch(e){this.onError(payload.id,e)}}register(url=this.url){if(!(0,jsonrpc_utils_dist_esm.isWsUrl)(url))throw Error(`Provided URL is not compatible with WebSocket connection: ${url}`);if(this.registering){let currentMaxListeners=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=currentMaxListeners||this.events.listenerCount("open")>=currentMaxListeners)&&this.events.setMaxListeners(currentMaxListeners+1),new Promise((resolve,reject)=>{this.events.once("register_error",error=>{this.resetMaxListeners(),reject(error)}),this.events.once("open",()=>{if(this.resetMaxListeners(),void 0===this.socket)return reject(Error("WebSocket connection is missing or invalid"));resolve(this.socket)})})}return this.url=url,this.registering=!0,new Promise((resolve,reject)=>{let opts=(0,jsonrpc_utils_dist_esm.isReactNative)()?void 0:{rejectUnauthorized:!(0,jsonrpc_utils_dist_esm.isLocalhostUrl)(url)},socket=new WS(url,[],opts);isBrowser()?socket.onerror=event=>{reject(this.emitError(event.error))}:socket.on("error",errorEvent=>{reject(this.emitError(errorEvent))}),socket.onopen=()=>{this.onOpen(socket),resolve(socket)}})}onOpen(socket){socket.onmessage=event=>this.onPayload(event),socket.onclose=()=>this.onClose(),this.socket=socket,this.registering=!1,this.events.emit("open")}onClose(){this.socket=void 0,this.registering=!1,this.events.emit("close")}onPayload(e){if(void 0===e.data)return;let payload="string"==typeof e.data?(0,esm.D)(e.data):e.data;this.events.emit("payload",payload)}onError(id,e){let error=this.parseError(e),message=error.message||error.toString(),payload=(0,jsonrpc_utils_dist_esm.formatJsonRpcError)(id,message);this.events.emit("payload",payload)}parseError(e,url=this.url){return(0,jsonrpc_utils_dist_esm.parseConnectionError)(e,url,"WS")}resetMaxListeners(){this.events.getMaxListeners()>10&&this.events.setMaxListeners(10)}emitError(errorEvent){let error=this.parseError(Error((null==errorEvent?void 0:errorEvent.message)||`WebSocket connection failed for URL: ${this.url}`));return this.events.emit("register_error",error),error}},lodash_isequal=__webpack_require__(72307),lodash_isequal_default=__webpack_require__.n(lodash_isequal),Ii=function(r,e){if(r.length>=255)throw TypeError("Alphabet too long");for(var t=new Uint8Array(256),i=0;i<t.length;i++)t[i]=255;for(var s=0;s<r.length;s++){var n=r.charAt(s),a=n.charCodeAt(0);if(255!==t[a])throw TypeError(n+" is ambiguous");t[a]=s}var o=r.length,h=r.charAt(0),d=Math.log(o)/Math.log(256),l=Math.log(256)/Math.log(o);function U(u){if("string"!=typeof u)throw TypeError("Expected String");if(0===u.length)return new Uint8Array;var y=0;if(" "!==u[0]){for(var O=0,E=0;u[y]===h;)O++,y++;for(var _=(u.length-y)*d+1>>>0,R=new Uint8Array(_);u[y];){var b=t[u.charCodeAt(y)];if(255===b)return;for(var S=0,x=_-1;(0!==b||S<E)&&-1!==x;x--,S++)b+=o*R[x]>>>0,R[x]=b%256>>>0,b=b/256>>>0;if(0!==b)throw Error("Non-zero carry");E=S,y++}if(" "!==u[y]){for(var f=_-E;f!==_&&0===R[f];)f++;for(var T=new Uint8Array(O+(_-f)),K=O;f!==_;)T[K++]=R[f++];return T}}}return{encode:function(u){if(u instanceof Uint8Array||(ArrayBuffer.isView(u)?u=new Uint8Array(u.buffer,u.byteOffset,u.byteLength):Array.isArray(u)&&(u=Uint8Array.from(u))),!(u instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===u.length)return"";for(var y=0,O=0,E=0,_=u.length;E!==_&&0===u[E];)E++,y++;for(var R=(_-E)*l+1>>>0,b=new Uint8Array(R);E!==_;){for(var S=u[E],x=0,f=R-1;(0!==S||x<O)&&-1!==f;f--,x++)S+=256*b[f]>>>0,b[f]=S%o>>>0,S=S/o>>>0;if(0!==S)throw Error("Non-zero carry");O=x,E++}for(var T=R-O;T!==R&&0===b[T];)T++;for(var K=h.repeat(y);T<R;++T)K+=r.charAt(b[T]);return K},decodeUnsafe:U,decode:function(u){var y=U(u);if(y)return y;throw Error(`Non-${e} character`)}}};let index_es_Ie=r=>{if(r instanceof Uint8Array&&"Uint8Array"===r.constructor.name)return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw Error("Unknown type, must be binary type")},Ci=r=>new TextEncoder().encode(r),_i=r=>new TextDecoder().decode(r);class Ri{constructor(e,t,i){this.name=e,this.prefix=t,this.baseEncode=i}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Si{constructor(e,t,i){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=i}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return index_es_Ce(this,e)}}class Ti{constructor(e){this.decoders=e}or(e){return index_es_Ce(this,e)}decode(e){let t=e[0],i=this.decoders[t];if(i)return i.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}let index_es_Ce=(r,e)=>new Ti({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}});class Pi{constructor(e,t,i,s){this.name=e,this.prefix=t,this.baseEncode=i,this.baseDecode=s,this.encoder=new Ri(e,t,i),this.decoder=new Si(e,t,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}let index_es_k=({name:r,prefix:e,encode:t,decode:i})=>new Pi(r,e,t,i),index_es_F=({prefix:r,name:e,alphabet:t})=>{let{encode:i,decode:s}=Ii(t,e);return index_es_k({prefix:r,name:e,encode:i,decode:n=>index_es_Ie(s(n))})},xi=(r,e,t,i)=>{let s={};for(let l=0;l<e.length;++l)s[e[l]]=l;let n=r.length;for(;"="===r[n-1];)--n;let a=new Uint8Array(n*t/8|0),o=0,h=0,d=0;for(let l1=0;l1<n;++l1){let g=s[r[l1]];if(void 0===g)throw SyntaxError(`Non-${i} character`);h=h<<t|g,(o+=t)>=8&&(o-=8,a[d++]=255&h>>o)}if(o>=t||255&h<<8-o)throw SyntaxError("Unexpected end of data");return a},Oi=(r,e,t)=>{let i="="===e[e.length-1],s=(1<<t)-1,n="",a=0,o=0;for(let h=0;h<r.length;++h)for(o=o<<8|r[h],a+=8;a>t;)a-=t,n+=e[s&o>>a];if(a&&(n+=e[s&o<<t-a]),i)for(;n.length*t&7;)n+="=";return n},index_es_p=({name:r,prefix:e,bitsPerChar:t,alphabet:i})=>index_es_k({prefix:e,name:r,encode:s=>Oi(s,i,t),decode:s=>xi(s,i,t,r)}),Ai=index_es_k({prefix:"\0",name:"identity",encode:r=>_i(r),decode:r=>Ci(r)});var zi=Object.freeze({__proto__:null,identity:Ai});let Ni=index_es_p({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Ui=Object.freeze({__proto__:null,base2:Ni});let Li=index_es_p({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Fi=Object.freeze({__proto__:null,base8:Li});let Mi=index_es_F({prefix:"9",name:"base10",alphabet:"0123456789"});var Ki=Object.freeze({__proto__:null,base10:Mi});let $i=index_es_p({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),ki=index_es_p({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Bi=Object.freeze({__proto__:null,base16:$i,base16upper:ki});let ji=index_es_p({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Vi=index_es_p({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),qi=index_es_p({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Gi=index_es_p({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Yi=index_es_p({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Ji=index_es_p({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Hi=index_es_p({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Xi=index_es_p({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Wi=index_es_p({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Zi=Object.freeze({__proto__:null,base32:ji,base32upper:Vi,base32pad:qi,base32padupper:Gi,base32hex:Yi,base32hexupper:Ji,base32hexpad:Hi,base32hexpadupper:Xi,base32z:Wi});let Qi=index_es_F({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),es=index_es_F({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var ts=Object.freeze({__proto__:null,base36:Qi,base36upper:es});let is=index_es_F({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),ss=index_es_F({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var rs=Object.freeze({__proto__:null,base58btc:is,base58flickr:ss});let ns=index_es_p({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),as=index_es_p({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),os=index_es_p({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),hs=index_es_p({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var cs=Object.freeze({__proto__:null,base64:ns,base64pad:as,base64url:os,base64urlpad:hs});let index_es_e=Array.from("\uD83D\uDE80\uD83E\uDE90☄\uD83D\uDEF0\uD83C\uDF0C\uD83C\uDF11\uD83C\uDF12\uD83C\uDF13\uD83C\uDF14\uD83C\uDF15\uD83C\uDF16\uD83C\uDF17\uD83C\uDF18\uD83C\uDF0D\uD83C\uDF0F\uD83C\uDF0E\uD83D\uDC09☀\uD83D\uDCBB\uD83D\uDDA5\uD83D\uDCBE\uD83D\uDCBF\uD83D\uDE02❤\uD83D\uDE0D\uD83E\uDD23\uD83D\uDE0A\uD83D\uDE4F\uD83D\uDC95\uD83D\uDE2D\uD83D\uDE18\uD83D\uDC4D\uD83D\uDE05\uD83D\uDC4F\uD83D\uDE01\uD83D\uDD25\uD83E\uDD70\uD83D\uDC94\uD83D\uDC96\uD83D\uDC99\uD83D\uDE22\uD83E\uDD14\uD83D\uDE06\uD83D\uDE44\uD83D\uDCAA\uD83D\uDE09☺\uD83D\uDC4C\uD83E\uDD17\uD83D\uDC9C\uD83D\uDE14\uD83D\uDE0E\uD83D\uDE07\uD83C\uDF39\uD83E\uDD26\uD83C\uDF89\uD83D\uDC9E✌✨\uD83E\uDD37\uD83D\uDE31\uD83D\uDE0C\uD83C\uDF38\uD83D\uDE4C\uD83D\uDE0B\uD83D\uDC97\uD83D\uDC9A\uD83D\uDE0F\uD83D\uDC9B\uD83D\uDE42\uD83D\uDC93\uD83E\uDD29\uD83D\uDE04\uD83D\uDE00\uD83D\uDDA4\uD83D\uDE03\uD83D\uDCAF\uD83D\uDE48\uD83D\uDC47\uD83C\uDFB6\uD83D\uDE12\uD83E\uDD2D❣\uD83D\uDE1C\uD83D\uDC8B\uD83D\uDC40\uD83D\uDE2A\uD83D\uDE11\uD83D\uDCA5\uD83D\uDE4B\uD83D\uDE1E\uD83D\uDE29\uD83D\uDE21\uD83E\uDD2A\uD83D\uDC4A\uD83E\uDD73\uD83D\uDE25\uD83E\uDD24\uD83D\uDC49\uD83D\uDC83\uD83D\uDE33✋\uD83D\uDE1A\uD83D\uDE1D\uD83D\uDE34\uD83C\uDF1F\uD83D\uDE2C\uD83D\uDE43\uD83C\uDF40\uD83C\uDF37\uD83D\uDE3B\uD83D\uDE13⭐✅\uD83E\uDD7A\uD83C\uDF08\uD83D\uDE08\uD83E\uDD18\uD83D\uDCA6✔\uD83D\uDE23\uD83C\uDFC3\uD83D\uDC90☹\uD83C\uDF8A\uD83D\uDC98\uD83D\uDE20☝\uD83D\uDE15\uD83C\uDF3A\uD83C\uDF82\uD83C\uDF3B\uD83D\uDE10\uD83D\uDD95\uD83D\uDC9D\uD83D\uDE4A\uD83D\uDE39\uD83D\uDDE3\uD83D\uDCAB\uD83D\uDC80\uD83D\uDC51\uD83C\uDFB5\uD83E\uDD1E\uD83D\uDE1B\uD83D\uDD34\uD83D\uDE24\uD83C\uDF3C\uD83D\uDE2B⚽\uD83E\uDD19☕\uD83C\uDFC6\uD83E\uDD2B\uD83D\uDC48\uD83D\uDE2E\uD83D\uDE46\uD83C\uDF7B\uD83C\uDF43\uD83D\uDC36\uD83D\uDC81\uD83D\uDE32\uD83C\uDF3F\uD83E\uDDE1\uD83C\uDF81⚡\uD83C\uDF1E\uD83C\uDF88❌✊\uD83D\uDC4B\uD83D\uDE30\uD83E\uDD28\uD83D\uDE36\uD83E\uDD1D\uD83D\uDEB6\uD83D\uDCB0\uD83C\uDF53\uD83D\uDCA2\uD83E\uDD1F\uD83D\uDE41\uD83D\uDEA8\uD83D\uDCA8\uD83E\uDD2C✈\uD83C\uDF80\uD83C\uDF7A\uD83E\uDD13\uD83D\uDE19\uD83D\uDC9F\uD83C\uDF31\uD83D\uDE16\uD83D\uDC76\uD83E\uDD74▶➡❓\uD83D\uDC8E\uD83D\uDCB8⬇\uD83D\uDE28\uD83C\uDF1A\uD83E\uDD8B\uD83D\uDE37\uD83D\uDD7A⚠\uD83D\uDE45\uD83D\uDE1F\uD83D\uDE35\uD83D\uDC4E\uD83E\uDD32\uD83E\uDD20\uD83E\uDD27\uD83D\uDCCC\uD83D\uDD35\uD83D\uDC85\uD83E\uDDD0\uD83D\uDC3E\uD83C\uDF52\uD83D\uDE17\uD83E\uDD11\uD83C\uDF0A\uD83E\uDD2F\uD83D\uDC37☎\uD83D\uDCA7\uD83D\uDE2F\uD83D\uDC86\uD83D\uDC46\uD83C\uDFA4\uD83D\uDE47\uD83C\uDF51❄\uD83C\uDF34\uD83D\uDCA3\uD83D\uDC38\uD83D\uDC8C\uD83D\uDCCD\uD83E\uDD40\uD83E\uDD22\uD83D\uDC45\uD83D\uDCA1\uD83D\uDCA9\uD83D\uDC50\uD83D\uDCF8\uD83D\uDC7B\uD83E\uDD10\uD83E\uDD2E\uD83C\uDFBC\uD83E\uDD75\uD83D\uDEA9\uD83C\uDF4E\uD83C\uDF4A\uD83D\uDC7C\uD83D\uDC8D\uD83D\uDCE3\uD83E\uDD42"),us=index_es_e.reduce((r,e,t)=>(r[t]=e,r),[]),ls=index_es_e.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]),ps=index_es_k({prefix:"\uD83D\uDE80",name:"base256emoji",encode:function(r){return r.reduce((e,t)=>e+=us[t],"")},decode:function(r){let e=[];for(let t of r){let i=ls[t.codePointAt(0)];if(void 0===i)throw Error(`Non-base256emoji character: ${t}`);e.push(i)}return new Uint8Array(e)}});var Ds=Object.freeze({__proto__:null,base256emoji:ps});function index_es_Se(r,e,t){e=e||[],t=t||0;for(var i=t;r>=2147483648;)e[t++]=255&r|128,r/=128;for(;-128&r;)e[t++]=255&r|128,r>>>=7;return e[t]=0|r,index_es_Se.bytes=t-i+1,e}function index_es_ie(r,i){var a,t=0,i=i||0,s=0,n=i,o=r.length;do{if(n>=o)throw index_es_ie.bytes=0,RangeError("Could not decode varint");a=r[n++],t+=s<28?(127&a)<<s:(127&a)*Math.pow(2,s),s+=7}while(a>=128);return index_es_ie.bytes=n-i,t}var index_es_Pe={encode:index_es_Se,decode:index_es_ie,encodingLength:function(r){return r<128?1:r<16384?2:r<2097152?3:r<268435456?4:r<34359738368?5:r<4398046511104?6:r<562949953421312?7:r<72057594037927940?8:r<0x7fffffffffffffff?9:10}};let index_es_xe=(r,e,t=0)=>(index_es_Pe.encode(r,e,t),e),index_es_Oe=r=>index_es_Pe.encodingLength(r),index_es_se=(r,e)=>{let t=e.byteLength,i=index_es_Oe(r),s=i+index_es_Oe(t),n=new Uint8Array(s+t);return index_es_xe(r,n,0),index_es_xe(t,n,i),n.set(e,s),new zs(r,t,e,n)};class zs{constructor(e,t,i,s){this.code=e,this.size=t,this.digest=i,this.bytes=s}}let index_es_Ae=({name:r,code:e,encode:t})=>new Ns(r,e,t);class Ns{constructor(e,t,i){this.name=e,this.code=t,this.encode=i}digest(e){if(e instanceof Uint8Array){let t=this.encode(e);return t instanceof Uint8Array?index_es_se(this.code,t):t.then(i=>index_es_se(this.code,i))}throw Error("Unknown type, must be binary type")}}let index_es_ze=r=>async e=>new Uint8Array(await crypto.subtle.digest(r,e)),Us=index_es_Ae({name:"sha2-256",code:18,encode:index_es_ze("SHA-256")}),Ls=index_es_Ae({name:"sha2-512",code:19,encode:index_es_ze("SHA-512")});Object.freeze({__proto__:null,sha256:Us,sha512:Ls});let Ks=r=>index_es_se(0,index_es_Ie(r));Object.freeze({__proto__:null,identity:{code:0,name:"identity",encode:index_es_Ie,digest:Ks}}),new TextEncoder,new TextDecoder;let index_es_Le={...zi,...Ui,...Fi,...Ki,...Bi,...Zi,...ts,...rs,...cs,...Ds};function index_es_Fe(r,e,t,i){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:i}}}let index_es_Me=index_es_Fe("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),index_es_re=index_es_Fe("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);let e=function(r=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?globalThis.Buffer.allocUnsafe(r):new Uint8Array(r)}(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),js={utf8:index_es_Me,"utf-8":index_es_Me,hex:index_es_Le.base16,latin1:index_es_re,ascii:index_es_re,binary:index_es_re,...index_es_Le},index_es_B="core",index_es_P=`wc@2:${index_es_B}:`,index_es_$e={name:index_es_B,logger:"error"},index_es_ke={database:":memory:"},index_es_ae="client_ed25519_seed",index_es_je=time_dist_cjs.ONE_DAY,index_es_Je=time_dist_cjs.SIX_HOURS,index_es_D={message:"relayer_message",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},index_es_M={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},index_es_oe=time_dist_cjs.ONE_SECOND,dist_index_es_I={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},index_es_nt=1e3*time_dist_cjs.FIVE_SECONDS,index_es_N={wc_pairingDelete:{req:{ttl:time_dist_cjs.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:time_dist_cjs.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:time_dist_cjs.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:time_dist_cjs.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:time_dist_cjs.ONE_DAY,prompt:!1,tag:0},res:{ttl:time_dist_cjs.ONE_DAY,prompt:!1,tag:0}}},dist_index_es_C={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},dist_index_es_m={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"};class index_es_dt{constructor(e,t){this.core=e,this.logger=t,this.keychain=new Map,this.name="keychain",this.version="0.3",this.initialized=!1,this.storagePrefix=index_es_P,this.init=async()=>{if(!this.initialized){let i=await this.getKeyChain();"u">typeof i&&(this.keychain=i),this.initialized=!0}},this.has=i=>(this.isInitialized(),this.keychain.has(i)),this.set=async(i,s)=>{this.isInitialized(),this.keychain.set(i,s),await this.persist()},this.get=i=>{this.isInitialized();let s=this.keychain.get(i);if(typeof s>"u"){let{message:n}=index_es_y("NO_MATCHING_KEY",`${this.name}: ${i}`);throw Error(n)}return s},this.del=async i=>{this.isInitialized(),this.keychain.delete(i),await this.persist()},this.core=e,this.logger=(0,dist_cjs.generateChildLogger)(t,this.name)}get context(){return(0,dist_cjs.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,Un(e))}async getKeyChain(){let e=await this.core.storage.getItem(this.storageKey);return"u">typeof e?Rn(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){let{message:e}=index_es_y("NOT_INITIALIZED",this.name);throw Error(e)}}}class gt{constructor(e,t,i){this.core=e,this.logger=t,this.name="crypto",this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=s=>(this.isInitialized(),this.keychain.has(s)),this.getClientId=async()=>{this.isInitialized();let s=await this.getClientSeed(),n=generateKeyPair(s);return encodeIss(n.publicKey)},this.generateKeyPair=()=>{this.isInitialized();let s=function(){let e=x25519.Au();return{privateKey:to_string_toString(e.secretKey,index_es_c),publicKey:to_string_toString(e.publicKey,index_es_c)}}();return this.setPrivateKey(s.publicKey,s.privateKey)},this.signJWT=async s=>{this.isInitialized();let n=await this.getClientSeed(),a=generateKeyPair(n),o=an();return await signJWT(o,s,index_es_je,a)},this.generateSharedKey=(s,n,a)=>{this.isInitialized();let o=this.getPrivateKey(s),h=function(e,n){let t=x25519.gi(from_string_fromString(e,index_es_c),from_string_fromString(n,index_es_c)),r=new hkdf.t(lib_sha256.mE,t).expand(32);return to_string_toString(r,index_es_c)}(o,n);return this.setSymKey(h,a)},this.setSymKey=async(s,n)=>{this.isInitialized();let a=n||function(e){let n=(0,lib_sha256.vp)(from_string_fromString(e,index_es_c));return to_string_toString(n,index_es_c)}(s);return await this.keychain.set(a,s),a},this.deleteKeyPair=async s=>{this.isInitialized(),await this.keychain.del(s)},this.deleteSymKey=async s=>{this.isInitialized(),await this.keychain.del(s)},this.encode=async(s,n,a)=>{this.isInitialized();let o=pe(a),h=(0,esm.u)(n);if(yn(o)){let U=o.senderPublicKey,q=o.receiverPublicKey;s=await this.generateSharedKey(U,q)}let d=this.getSymKey(s),{type:l,senderPublicKey:g}=o;return function(e){let n=from_string_fromString(`${"u">typeof e.type?e.type:0}`,V);if(1===S(n)&&typeof e.senderPublicKey>"u")throw Error("Missing sender public key for type 1 envelope");let t="u">typeof e.senderPublicKey?from_string_fromString(e.senderPublicKey,index_es_c):void 0,r="u">typeof e.iv?from_string_fromString(e.iv,index_es_c):(0,random.randomBytes)(12),o=new chacha20poly1305.OK(from_string_fromString(e.symKey,index_es_c)).seal(r,from_string_fromString(e.message,_));return function(e){if(1===S(e.type)){if(typeof e.senderPublicKey>"u")throw Error("Missing sender public key for type 1 envelope");return to_string_toString(concat([e.type,e.senderPublicKey,e.iv,e.sealed]),R)}return to_string_toString(concat([e.type,e.iv,e.sealed]),R)}({type:n,sealed:o,iv:r,senderPublicKey:t})}({type:l,symKey:d,message:h,senderPublicKey:g})},this.decode=async(s,n,a)=>{this.isInitialized();let o=function(e,n){let t=L(e);return pe({type:S(t.type),senderPublicKey:"u">typeof t.senderPublicKey?to_string_toString(t.senderPublicKey,index_es_c):void 0,receiverPublicKey:n?.receiverPublicKey})}(n,a);if(yn(o)){let l=o.receiverPublicKey,g=o.senderPublicKey;s=await this.generateSharedKey(l,g)}let h=this.getSymKey(s),d=function(e){let n=new chacha20poly1305.OK(from_string_fromString(e.symKey,index_es_c)),{sealed:t,iv:r}=L(e.encoded),o=n.open(r,t);if(null===o)throw Error("Failed to decrypt");return to_string_toString(o,_)}({symKey:h,encoded:n});return(0,esm.D)(d)},this.core=e,this.logger=(0,dist_cjs.generateChildLogger)(t,this.name),this.keychain=i||new index_es_dt(this.core,this.logger)}get context(){return(0,dist_cjs.getLoggerContext)(this.logger)}getPayloadType(e){let t=L(e);return S(t.type)}async setPrivateKey(e,t){return await this.keychain.set(e,t),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(index_es_ae)}catch{await this.keychain.set(index_es_ae,e=an())}return function(r,e="utf8"){let t=js[e];if(!t)throw Error(`Unsupported encoding "${e}"`);return("utf8"===e||"utf-8"===e)&&null!=globalThis.Buffer&&null!=globalThis.Buffer.from?globalThis.Buffer.from(r,"utf8"):t.decoder.decode(`${t.prefix}${r}`)}(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){let{message:e}=index_es_y("NOT_INITIALIZED",this.name);throw Error(e)}}}class index_es_pt extends a{constructor(e,t){super(e,t),this.logger=e,this.core=t,this.messages=new Map,this.name="messages",this.version="0.3",this.initialized=!1,this.storagePrefix=index_es_P,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{let i=await this.getRelayerMessages();"u">typeof i&&(this.messages=i),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(i1){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(i1)}finally{this.initialized=!0}}},this.set=async(i,s)=>{this.isInitialized();let n=ln(s),a=this.messages.get(i);return typeof a>"u"&&(a={}),"u">typeof a[n]||(a[n]=s,this.messages.set(i,a),await this.persist()),n},this.get=i=>{this.isInitialized();let s=this.messages.get(i);return typeof s>"u"&&(s={}),s},this.has=(i,s)=>{this.isInitialized();let n=this.get(i),a=ln(s);return"u">typeof n[a]},this.del=async i=>{this.isInitialized(),this.messages.delete(i),await this.persist()},this.logger=(0,dist_cjs.generateChildLogger)(e,this.name),this.core=t}get context(){return(0,dist_cjs.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,Un(e))}async getRelayerMessages(){let e=await this.core.storage.getItem(this.storageKey);return"u">typeof e?Rn(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){let{message:e}=index_es_y("NOT_INITIALIZED",this.name);throw Error(e)}}}class Hs extends u{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.events=new events.EventEmitter,this.name="publisher",this.queue=new Map,this.publishTimeout=1e4,this.publish=async(i,s,n)=>{this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:i,message:s,opts:n}});try{let a=n?.ttl||index_es_Je,o=Ln(n),h=n?.prompt||!1,d=n?.tag||0,l={topic:i,message:s,opts:{ttl:a,relay:o,prompt:h,tag:d}},g=ln(s);this.queue.set(g,l);try{await await jn(this.rpcPublish(i,s,a,o,h,d),this.publishTimeout),this.relayer.events.emit(index_es_D.publish,l)}catch{this.logger.debug("Publishing Payload stalled"),this.relayer.events.emit(index_es_D.connection_stalled);return}this.onPublish(g,l),this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:i,message:s,opts:n}})}catch(a1){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(a1),a1}},this.on=(i,s)=>{this.events.on(i,s)},this.once=(i,s)=>{this.events.once(i,s)},this.off=(i,s)=>{this.events.off(i,s)},this.removeListener=(i,s)=>{this.events.removeListener(i,s)},this.relayer=e,this.logger=(0,dist_cjs.generateChildLogger)(t,this.name),this.registerEventListeners()}get context(){return(0,dist_cjs.getLoggerContext)(this.logger)}rpcPublish(e,t,i,s,n,a){var o,h,d,l;let g={method:xn(s.protocol).publish,params:{topic:e,message:t,ttl:i,prompt:n,tag:a}};return index_es_E(null==(o=g.params)?void 0:o.prompt)&&(null==(h=g.params)||delete h.prompt),index_es_E(null==(d=g.params)?void 0:d.tag)&&(null==(l=g.params)||delete l.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:g}),this.relayer.provider.request(g)}onPublish(e,t){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{let{topic:t,message:i,opts:s}=e;await this.publish(t,i,s)})}registerEventListeners(){this.relayer.core.heartbeat.on(cjs.HEARTBEAT_EVENTS.pulse,()=>{this.checkQueue()})}}class Xs{constructor(){this.map=new Map,this.set=(e,t)=>{let i=this.get(e);this.exists(e,t)||this.map.set(e,[...i,t])},this.get=e=>this.map.get(e)||[],this.exists=(e,t)=>this.get(e).includes(t),this.delete=(e,t)=>{if(typeof t>"u"){this.map.delete(e);return}if(!this.map.has(e))return;let i=this.get(e);if(!this.exists(e,t))return;let s=i.filter(n=>n!==t);if(!s.length){this.map.delete(e);return}this.map.set(e,s)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var Ws=Object.defineProperty,Zs=Object.defineProperties,Qs=Object.getOwnPropertyDescriptors,Dt=Object.getOwnPropertySymbols,er=Object.prototype.hasOwnProperty,tr=Object.prototype.propertyIsEnumerable,yt=(r,e,t)=>e in r?Ws(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,index_es_j=(r,e)=>{for(var t in e||(e={}))er.call(e,t)&&yt(r,t,e[t]);if(Dt)for(var t of Dt(e))tr.call(e,t)&&yt(r,t,e[t]);return r},index_es_he=(r,e)=>Zs(r,Qs(e));class bt extends x{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.subscriptions=new Map,this.topicMap=new Xs,this.events=new events.EventEmitter,this.name="subscription",this.version="0.3",this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pendingSubInterval=20,this.storagePrefix=index_es_P,this.subscribeTimeout=1e4,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restart(),this.registerEventListeners(),this.onEnable())},this.subscribe=async(i,s)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:i,opts:s}});try{let n=Ln(s),a={topic:i,relay:n};this.pending.set(i,a);let o=await this.rpcSubscribe(i,n);return this.onSubscribe(o,a),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:i,opts:s}}),o}catch(n1){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(n1),n1}},this.unsubscribe=async(i,s)=>{this.isInitialized(),"u">typeof s?.id?await this.unsubscribeById(i,s.id,s):await this.unsubscribeByTopic(i,s)},this.isSubscribed=async i=>!!this.topics.includes(i)||await new Promise((s,n)=>{let a=new time_dist_cjs.Watch;a.start(this.pendingSubscriptionWatchLabel);let o=setInterval(()=>{!this.pending.has(i)&&this.topics.includes(i)&&(clearInterval(o),a.stop(this.pendingSubscriptionWatchLabel),s(!0)),a.elapsed(this.pendingSubscriptionWatchLabel)>=index_es_nt&&(clearInterval(o),a.stop(this.pendingSubscriptionWatchLabel),n(!1))},this.pendingSubInterval)}),this.on=(i,s)=>{this.events.on(i,s)},this.once=(i,s)=>{this.events.once(i,s)},this.off=(i,s)=>{this.events.off(i,s)},this.removeListener=(i,s)=>{this.events.removeListener(i,s)},this.restart=async()=>{await this.restore(),await this.reset()},this.relayer=e,this.logger=(0,dist_cjs.generateChildLogger)(t,this.name)}get context(){return(0,dist_cjs.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,t){let i=!1;try{i=this.getSubscription(e).topic===t}catch{}return i}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear(),this.initialized=!1}async unsubscribeByTopic(e,t){let i=this.topicMap.get(e);await Promise.all(i.map(async s=>await this.unsubscribeById(e,s,t)))}async unsubscribeById(e,t,i){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:i}});try{let s=Ln(i);await this.rpcUnsubscribe(e,t,s);let n=index_es_h("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,t,n),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:i}})}catch(s1){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s1),s1}}async rpcSubscribe(e,t){let s;let i={method:xn(t.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});try{s=await await jn(this.relayer.provider.request(i),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(index_es_D.connection_stalled)}return s}rpcUnsubscribe(e,t,i){let s={method:xn(i.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.provider.request(s)}onSubscribe(e,t){this.setSubscription(e,index_es_he(index_es_j({},t),{id:e})),this.pending.delete(t.topic)}onResubscribe(e,t){this.addSubscription(e,index_es_he(index_es_j({},t),{id:e})),this.pending.delete(t.topic)}async onUnsubscribe(e,t,i){this.events.removeAllListeners(t),this.hasSubscription(t,e)&&this.deleteSubscription(t,i),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,t){this.subscriptions.has(e)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t))}addSubscription(e,t){this.subscriptions.set(e,index_es_j({},t)),this.topicMap.set(t.topic,e),this.events.emit(dist_index_es_I.created,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});let t=this.subscriptions.get(e);if(!t){let{message:i}=index_es_y("NO_MATCHING_KEY",`${this.name}: ${e}`);throw Error(i)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});let i=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(i.topic,e),this.events.emit(dist_index_es_I.deleted,index_es_he(index_es_j({},i),{reason:t}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(dist_index_es_I.sync)}async reset(){this.cached.length&&await Promise.all(this.cached.map(async e=>await this.resubscribe(e))),this.events.emit(dist_index_es_I.resubscribed)}async restore(){try{let e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){let{message:t}=index_es_y("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),Error(t)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e1){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e1)}}async resubscribe(e){if(!this.ids.includes(e.id)){let{topic:t,relay:i}=e,s={topic:t,relay:i};this.pending.set(s.topic,s);let n=await this.rpcSubscribe(s.topic,s.relay);this.onResubscribe(n,s)}}async onConnect(){await this.restart(),this.onEnable()}onDisconnect(){this.onDisable()}checkPending(){this.relayer.transportExplicitlyClosed||this.pending.forEach(async e=>{let t=await this.rpcSubscribe(e.topic,e.relay);this.onSubscribe(t,e)})}registerEventListeners(){this.relayer.core.heartbeat.on(cjs.HEARTBEAT_EVENTS.pulse,()=>{this.checkPending()}),this.relayer.on(index_es_D.connect,async()=>{await this.onConnect()}),this.relayer.on(index_es_D.disconnect,()=>{this.onDisconnect()}),this.events.on(dist_index_es_I.created,async e=>{let t=dist_index_es_I.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()}),this.events.on(dist_index_es_I.deleted,async e=>{let t=dist_index_es_I.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){let{message:e}=index_es_y("NOT_INITIALIZED",this.name);throw Error(e)}}}var ir=Object.defineProperty,index_es_mt=Object.getOwnPropertySymbols,sr=Object.prototype.hasOwnProperty,rr=Object.prototype.propertyIsEnumerable,Et=(r,e,t)=>e in r?ir(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,nr=(r,e)=>{for(var t in e||(e={}))sr.call(e,t)&&Et(r,t,e[t]);if(index_es_mt)for(var t of index_es_mt(e))rr.call(e,t)&&Et(r,t,e[t]);return r};class index_es_ft extends g{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new events.EventEmitter,this.name="relayer",this.transportExplicitlyClosed=!1,this.initialized=!1,this.core=e.core,this.logger="u">typeof e.logger&&"string"!=typeof e.logger?(0,dist_cjs.generateChildLogger)(e.logger,this.name):browser_default()((0,dist_cjs.getDefaultLoggerOptions)({level:e.logger||"error"})),this.messages=new index_es_pt(this.logger,e.core),this.subscriber=new bt(this,this.logger),this.publisher=new Hs(this,this.logger),this.relayUrl=e?.relayUrl||"wss://relay.walletconnect.com",this.projectId=e.projectId,this.provider={}}async init(){this.logger.trace("Initialized"),this.provider=await this.createProvider(),await Promise.all([this.messages.init(),this.transportOpen(),this.subscriber.init()]),this.registerEventListeners(),this.initialized=!0}get context(){return(0,dist_cjs.getLoggerContext)(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(e,t,i){this.isInitialized(),await this.publisher.publish(e,t,i),await this.recordMessageEvent({topic:e,message:t})}async subscribe(e,t){this.isInitialized();let i="";return await Promise.all([new Promise(s=>{this.subscriber.once(dist_index_es_I.created,n=>{n.topic===e&&s()})}),new Promise(async s=>{i=await this.subscriber.subscribe(e,t),s()})]),i}async unsubscribe(e,t){this.isInitialized(),await this.subscriber.unsubscribe(e,t)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async transportClose(){this.transportExplicitlyClosed=!0,this.connected&&(await this.provider.disconnect(),this.events.emit(index_es_D.transport_closed))}async transportOpen(e){this.relayUrl=e||this.relayUrl,this.transportExplicitlyClosed=!1;try{await Promise.all([new Promise(t=>{this.initialized||t(),this.subscriber.once(dist_index_es_I.resubscribed,()=>{t()})}),await Promise.race([this.provider.connect(),new Promise((t,i)=>this.once(index_es_D.transport_closed,()=>{i(Error("closeTransport called before connection was established"))}))])])}catch(t){if(!/socket hang up/i.test(t.message))throw Error(t.message);this.logger.error(t),this.events.emit(index_es_D.transport_closed)}}async restartTransport(e){await this.transportClose(),await new Promise(t=>setTimeout(t,index_es_oe)),await this.transportOpen(e)}async createProvider(){let e=await this.core.crypto.signJWT(this.relayUrl);return new dist_esm.r(new ws(function({protocol:e,version:n,relayUrl:t,sdkVersion:r,auth:o,projectId:s}){var e1;let t1;let i=t.split("?"),u=function(e,n,t){let r=function(){var userAgent;let e=userAgent?parseUserAgent(userAgent):"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new ReactNativeInfo:"undefined"!=typeof navigator?parseUserAgent(navigator.userAgent):void 0!==process&&process.version?new NodeInfo(process.version.slice(1)):null;if(null===e)return"unknown";let n=e.os?e.os.replace(" ","").toLowerCase():"unknown";return"browser"===e.type?[n,e.name,e.version].join("-"):[n,e.version].join("-")}(),o=function(){var e;let n=!(0,window_getters_dist_cjs.getDocument)()&&(0,window_getters_dist_cjs.getNavigator)()&&"ReactNative"===navigator.product?index_es_v.reactNative:F()?index_es_v.node:!F()&&(0,window_getters_dist_cjs.getNavigator)()?index_es_v.browser:index_es_v.unknown;return n===index_es_v.browser?[n,(null==(e=(0,window_getters_dist_cjs.getLocation)())?void 0:e.host)||"unknown"].join(":"):n}();return[[e,n].join("-"),["js",t].join("-"),r,o].join("/")}(e,n,r),g=(e1=i[1]||"",t1=Ee(Ee({},t1=query_string.parse(e1)),{auth:o,ua:u,projectId:s}),e1=query_string.stringify(t1));return i[0]+"?"+g}({sdkVersion:"2.3.3",protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e})))}async recordMessageEvent(e){let{topic:t,message:i}=e;await this.messages.set(t,i)}async shouldIgnoreMessageEvent(e){let{topic:t,message:i}=e;return!await this.subscriber.isSubscribed(t)||this.messages.has(t,i)}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),(0,jsonrpc_utils_dist_esm.isJsonRpcRequest)(e)){if(!e.method.endsWith("_subscription"))return;let t=e.params,{topic:i,message:s}=t.data,n={topic:i,message:s};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(nr({type:"event",event:t.id},n)),this.events.emit(t.id,n),await this.acknowledgePayload(e),await this.onMessageEvent(n)}}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(index_es_D.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){let t=(0,jsonrpc_utils_dist_esm.formatJsonRpcResult)(e.id,!0);await this.provider.connection.send(t)}registerEventListeners(){this.provider.on(index_es_M.payload,e=>this.onProviderPayload(e)),this.provider.on(index_es_M.connect,()=>{this.events.emit(index_es_D.connect)}),this.provider.on(index_es_M.disconnect,()=>{this.events.emit(index_es_D.disconnect),this.attemptToReconnect()}),this.provider.on(index_es_M.error,e=>this.events.emit(index_es_D.error,e)),this.events.on(index_es_D.connection_stalled,async()=>{await this.restartTransport()})}attemptToReconnect(){this.transportExplicitlyClosed||setTimeout(async()=>{await this.transportOpen()},(0,time_dist_cjs.toMiliseconds)(index_es_oe))}isInitialized(){if(!this.initialized){let{message:e}=index_es_y("NOT_INITIALIZED",this.name);throw Error(e)}}}var ar=Object.defineProperty,wt=Object.getOwnPropertySymbols,index_es_or=Object.prototype.hasOwnProperty,hr=Object.prototype.propertyIsEnumerable,vt=(r,e,t)=>e in r?ar(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,It=(r,e)=>{for(var t in e||(e={}))index_es_or.call(e,t)&&vt(r,t,e[t]);if(wt)for(var t of wt(e))hr.call(e,t)&&vt(r,t,e[t]);return r};class Ct extends p{constructor(e,t,i,s=index_es_P,n){super(e,t,i,s),this.core=e,this.logger=t,this.name=i,this.map=new Map,this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=index_es_P,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(a=>{var n;(null==(n=a?.proposer)?void 0:n.publicKey)?this.map.set(a.id,a):a?.topic?this.map.set(a.topic,a):this.getKey&&null!==a&&!index_es_E(a)&&this.map.set(this.getKey(a),a)}),this.cached=[],this.initialized=!0)},this.set=async(a,o)=>{this.isInitialized(),this.map.has(a)?await this.update(a,o):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:a,value:o}),this.map.set(a,o),await this.persist())},this.get=a=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:a}),this.getData(a)),this.getAll=a=>(this.isInitialized(),a?this.values.filter(o=>Object.keys(a).every(h=>lodash_isequal_default()(o[h],a[h]))):this.values),this.update=async(a,o)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:a,update:o});let h=It(It({},this.getData(a)),o);this.map.set(a,h),await this.persist()},this.delete=async(a,o)=>{this.isInitialized(),this.map.has(a)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:a,reason:o}),this.map.delete(a),await this.persist())},this.logger=(0,dist_cjs.generateChildLogger)(t,this.name),this.storagePrefix=s,this.getKey=n}get context(){return(0,dist_cjs.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){let t=this.map.get(e);if(!t){let{message:i}=index_es_y("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(i),Error(i)}return t}async persist(){await this.setDataStore(this.values)}async restore(){try{let e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){let{message:t}=index_es_y("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),Error(t)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e1){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e1)}}isInitialized(){if(!this.initialized){let{message:e}=index_es_y("NOT_INITIALIZED",this.name);throw Error(e)}}}class _t{constructor(e,t){this.core=e,this.logger=t,this.name="pairing",this.version="0.3",this.events=new(events_default()),this.initialized=!1,this.storagePrefix=index_es_P,this.ignoredPayloadTypes=[1],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:i})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...i])]},this.create=async()=>{var e;this.isInitialized();let i=an(),s=await this.core.crypto.setSymKey(i),n=Cn(time_dist_cjs.FIVE_MINUTES),a={protocol:"irn"},h=(e={protocol:this.core.protocol,version:this.core.version,topic:s,symKey:i,relay:a},`${e.protocol}:${e.topic}@${e.version}?`+query_string.stringify(Bn({symKey:e.symKey},function(e,n="-"){let r={};return Object.keys(e).forEach(o=>{e[o]&&(r["relay"+n+o]=e[o])}),r}(e.relay))));return await this.pairings.set(s,{topic:s,expiry:n,relay:a,active:!1}),await this.core.relayer.subscribe(s),this.core.expirer.set(s,n),{topic:s,uri:h}},this.pair=async i=>{this.isInitialized(),this.isValidPair(i);let{topic:s,symKey:n,relay:a}=function(e){let n=e.indexOf(":"),t=-1!==e.indexOf("?")?e.indexOf("?"):void 0,r=e.substring(0,n),o=e.substring(n+1,t).split("@"),s="u">typeof t?e.substring(t):"",i=query_string.parse(s);return{protocol:r,topic:o[0],version:parseInt(o[1],10),symKey:i.symKey,relay:function(e,n="-"){let t={},r="relay"+n;return Object.keys(e).forEach(o=>{if(o.startsWith(r)){let s=o.replace(r,""),i=e[o];t[s]=i}}),t}(i)}}(i.uri),o=Cn(time_dist_cjs.FIVE_MINUTES),h={topic:s,relay:a,expiry:o,active:!1};return await this.pairings.set(s,h),await this.core.crypto.setSymKey(n,s),await this.core.relayer.subscribe(s,{relay:a}),this.core.expirer.set(s,o),i.activatePairing&&await this.activate({topic:s}),h},this.activate=async({topic:i})=>{this.isInitialized();let s=Cn(time_dist_cjs.THIRTY_DAYS);await this.pairings.update(i,{active:!0,expiry:s}),this.core.expirer.set(i,s)},this.ping=async i=>{this.isInitialized(),await this.isValidPing(i);let{topic:s}=i;if(this.pairings.keys.includes(s)){let n=await this.sendRequest(s,"wc_pairingPing",{}),{done:a,resolve:o,reject:h}=$n();this.events.once(kn("pairing_ping",n),({error:d})=>{d?h(d):o()}),await a()}},this.updateExpiry=async({topic:i,expiry:s})=>{this.isInitialized(),await this.pairings.update(i,{expiry:s})},this.updateMetadata=async({topic:i,metadata:s})=>{this.isInitialized(),await this.pairings.update(i,{peerMetadata:s})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async i=>{this.isInitialized(),await this.isValidDisconnect(i);let{topic:s}=i;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",index_es_h("USER_DISCONNECTED")),await this.deletePairing(s))},this.sendRequest=async(i,s,n)=>{let a=(0,jsonrpc_utils_dist_esm.formatJsonRpcRequest)(s,n),o=await this.core.crypto.encode(i,a),h=index_es_N[s].req;return this.core.history.set(i,a),await this.core.relayer.publish(i,o,h),a.id},this.sendResult=async(i,s,n)=>{let a=(0,jsonrpc_utils_dist_esm.formatJsonRpcResult)(i,n),o=await this.core.crypto.encode(s,a),h=await this.core.history.get(s,i),d=index_es_N[h.request.method].res;await this.core.relayer.publish(s,o,d),await this.core.history.resolve(a)},this.sendError=async(i,s,n)=>{let a=(0,jsonrpc_utils_dist_esm.formatJsonRpcError)(i,n),o=await this.core.crypto.encode(s,a),h=await this.core.history.get(s,i),d=index_es_N[h.request.method]?index_es_N[h.request.method].res:index_es_N.unregistered_method.res;await this.core.relayer.publish(s,o,d),await this.core.history.resolve(a)},this.deletePairing=async(i,s)=>{await this.core.relayer.unsubscribe(i),await Promise.all([this.pairings.delete(i,index_es_h("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(i),s?Promise.resolve():this.core.expirer.del(i)])},this.cleanup=async()=>{let i=this.pairings.getAll().filter(s=>Dn(s.expiry));await Promise.all(i.map(s=>this.deletePairing(s.topic)))},this.onRelayEventRequest=i=>{let{topic:s,payload:n}=i,a=n.method;if(this.pairings.keys.includes(s))switch(a){case"wc_pairingPing":return this.onPairingPingRequest(s,n);case"wc_pairingDelete":return this.onPairingDeleteRequest(s,n);default:return this.onUnknownRpcMethodRequest(s,n)}},this.onRelayEventResponse=async i=>{let{topic:s,payload:n}=i,a=(await this.core.history.get(s,n.id)).request.method;if(this.pairings.keys.includes(s))return"wc_pairingPing"===a?this.onPairingPingResponse(s,n):this.onUnknownRpcMethodResponse(a)},this.onPairingPingRequest=async(i,s)=>{let{id:n}=s;try{this.isValidPing({topic:i}),await this.sendResult(n,i,!0),this.events.emit("pairing_ping",{id:n,topic:i})}catch(a){await this.sendError(n,i,a),this.logger.error(a)}},this.onPairingPingResponse=(i,s)=>{let{id:n}=s;setTimeout(()=>{(0,jsonrpc_utils_dist_esm.isJsonRpcResult)(s)?this.events.emit(kn("pairing_ping",n),{}):(0,jsonrpc_utils_dist_esm.isJsonRpcError)(s)&&this.events.emit(kn("pairing_ping",n),{error:s.error})},500)},this.onPairingDeleteRequest=async(i,s)=>{let{id:n}=s;try{this.isValidDisconnect({topic:i}),await this.sendResult(n,i,!0),await this.deletePairing(i),this.events.emit("pairing_delete",{id:n,topic:i})}catch(a){await this.sendError(n,i,a),this.logger.error(a)}},this.onUnknownRpcMethodRequest=async(i,s)=>{let{id:n,method:a}=s;try{if(this.registeredMethods.includes(a))return;let o=index_es_h("WC_METHOD_UNSUPPORTED",a);await this.sendError(n,i,o),this.logger.error(o)}catch(o1){await this.sendError(n,i,o1),this.logger.error(o1)}},this.onUnknownRpcMethodResponse=i=>{this.registeredMethods.includes(i)||this.logger.error(index_es_h("WC_METHOD_UNSUPPORTED",i))},this.isValidPair=i=>{if(!st(i)){let{message:s}=index_es_y("MISSING_OR_INVALID",`pair() params: ${i}`);throw Error(s)}if(!function(e){if(index_es_a(e,!1))try{return"u">typeof new URL(e)}catch{}return!1}(i.uri)){let{message:s1}=index_es_y("MISSING_OR_INVALID",`pair() uri: ${i.uri}`);throw Error(s1)}},this.isValidPing=async i=>{if(!st(i)){let{message:n}=index_es_y("MISSING_OR_INVALID",`ping() params: ${i}`);throw Error(n)}let{topic:s}=i;await this.isValidPairingTopic(s)},this.isValidDisconnect=async i=>{if(!st(i)){let{message:n}=index_es_y("MISSING_OR_INVALID",`disconnect() params: ${i}`);throw Error(n)}let{topic:s}=i;await this.isValidPairingTopic(s)},this.isValidPairingTopic=async i=>{if(!index_es_a(i,!1)){let{message:s}=index_es_y("MISSING_OR_INVALID",`pairing topic should be a string: ${i}`);throw Error(s)}if(!this.pairings.keys.includes(i)){let{message:s1}=index_es_y("NO_MATCHING_KEY",`pairing topic doesn't exist: ${i}`);throw Error(s1)}if(Dn(this.pairings.get(i).expiry)){await this.deletePairing(i);let{message:s2}=index_es_y("EXPIRED",`pairing topic: ${i}`);throw Error(s2)}},this.core=e,this.logger=(0,dist_cjs.generateChildLogger)(t,this.name),this.pairings=new Ct(this.core,this.logger,this.name,this.storagePrefix)}get context(){return(0,dist_cjs.getLoggerContext)(this.logger)}isInitialized(){if(!this.initialized){let{message:e}=index_es_y("NOT_INITIALIZED",this.name);throw Error(e)}}registerRelayerEvents(){this.core.relayer.on(index_es_D.message,async e=>{let{topic:t,message:i}=e;if(this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(i)))return;let s=await this.core.crypto.decode(t,i);(0,jsonrpc_utils_dist_esm.isJsonRpcRequest)(s)?(this.core.history.set(t,s),this.onRelayEventRequest({topic:t,payload:s})):(0,jsonrpc_utils_dist_esm.isJsonRpcResponse)(s)&&(await this.core.history.resolve(s),this.onRelayEventResponse({topic:t,payload:s}))})}registerExpirerEvents(){this.core.expirer.on(dist_index_es_m.expired,async e=>{let{topic:t}=Kn(e.target);t&&this.pairings.keys.includes(t)&&(await this.deletePairing(t,!0),this.events.emit("pairing_expire",{topic:t}))})}}class Rt extends h{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.records=new Map,this.events=new events.EventEmitter,this.name="history",this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=index_es_P,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(i=>this.records.set(i.id,i)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(i,s,n)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:i,request:s,chainId:n}),this.records.has(s.id))return;let a={id:s.id,topic:i,request:{method:s.method,params:s.params||null},chainId:n};this.records.set(a.id,a),this.events.emit(dist_index_es_C.created,a)},this.resolve=async i=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:i}),!this.records.has(i.id))return;let s=await this.getRecord(i.id);typeof s.response>"u"&&(s.response=(0,jsonrpc_utils_dist_esm.isJsonRpcError)(i)?{error:i.error}:{result:i.result},this.records.set(s.id,s),this.events.emit(dist_index_es_C.updated,s))},this.get=async(i,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:i,id:s}),await this.getRecord(s)),this.delete=(i,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(n=>{n.topic!==i||"u">typeof s&&n.id!==s||(this.records.delete(n.id),this.events.emit(dist_index_es_C.deleted,n))})},this.exists=async(i,s)=>(this.isInitialized(),!!this.records.has(s)&&(await this.getRecord(s)).topic===i),this.on=(i,s)=>{this.events.on(i,s)},this.once=(i,s)=>{this.events.once(i,s)},this.off=(i,s)=>{this.events.off(i,s)},this.removeListener=(i,s)=>{this.events.removeListener(i,s)},this.logger=(0,dist_cjs.generateChildLogger)(t,this.name)}get context(){return(0,dist_cjs.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){let e=[];return this.values.forEach(t=>{if("u">typeof t.response)return;let i={topic:t.topic,request:(0,jsonrpc_utils_dist_esm.formatJsonRpcRequest)(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(i)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();let t=this.records.get(e);if(!t){let{message:i}=index_es_y("NO_MATCHING_KEY",`${this.name}: ${e}`);throw Error(i)}return t}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(dist_index_es_C.sync)}async restore(){try{let e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){let{message:t}=index_es_y("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),Error(t)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e1){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e1)}}registerEventListeners(){this.events.on(dist_index_es_C.created,e=>{let t=dist_index_es_C.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.events.on(dist_index_es_C.updated,e=>{let t=dist_index_es_C.updated;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.events.on(dist_index_es_C.deleted,e=>{let t=dist_index_es_C.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()})}isInitialized(){if(!this.initialized){let{message:e}=index_es_y("NOT_INITIALIZED",this.name);throw Error(e)}}}class St extends E{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.expirations=new Map,this.events=new events.EventEmitter,this.name="expirer",this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=index_es_P,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(i=>this.expirations.set(i.target,i)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=i=>{try{let s=this.formatTarget(i);return"u">typeof this.getExpiration(s)}catch{return!1}},this.set=(i,s)=>{this.isInitialized();let n=this.formatTarget(i),a={target:n,expiry:s};this.expirations.set(n,a),this.checkExpiry(n,a),this.events.emit(dist_index_es_m.created,{target:n,expiration:a})},this.get=i=>{this.isInitialized();let s=this.formatTarget(i);return this.getExpiration(s)},this.del=i=>{if(this.isInitialized(),this.has(i)){let s=this.formatTarget(i),n=this.getExpiration(s);this.expirations.delete(s),this.events.emit(dist_index_es_m.deleted,{target:s,expiration:n})}},this.on=(i,s)=>{this.events.on(i,s)},this.once=(i,s)=>{this.events.once(i,s)},this.off=(i,s)=>{this.events.off(i,s)},this.removeListener=(i,s)=>{this.events.removeListener(i,s)},this.logger=(0,dist_cjs.generateChildLogger)(t,this.name)}get context(){return(0,dist_cjs.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if("string"==typeof e)return q("topic",e);if("number"==typeof e)return q("id",e);let{message:t}=index_es_y("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw Error(t)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(dist_index_es_m.sync)}async restore(){try{let e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){let{message:t}=index_es_y("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),Error(t)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e1){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e1)}}getExpiration(e){let t=this.expirations.get(e);if(!t){let{message:i}=index_es_y("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(i),Error(i)}return t}checkExpiry(e,t){let{expiry:i}=t;(0,time_dist_cjs.toMiliseconds)(i)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(dist_index_es_m.expired,{target:e,expiration:t})}checkExpirations(){this.expirations.forEach((e,t)=>this.checkExpiry(t,e))}registerEventListeners(){this.core.heartbeat.on(cjs.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(dist_index_es_m.created,e=>{let t=dist_index_es_m.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(dist_index_es_m.expired,e=>{let t=dist_index_es_m.expired;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(dist_index_es_m.deleted,e=>{let t=dist_index_es_m.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})}isInitialized(){if(!this.initialized){let{message:e}=index_es_y("NOT_INITIALIZED",this.name);throw Error(e)}}}var cr=Object.defineProperty,Tt=Object.getOwnPropertySymbols,ur=Object.prototype.hasOwnProperty,lr=Object.prototype.propertyIsEnumerable,Pt=(r,e,t)=>e in r?cr(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,xt=(r,e)=>{for(var t in e||(e={}))ur.call(e,t)&&Pt(r,t,e[t]);if(Tt)for(var t of Tt(e))lr.call(e,t)&&Pt(r,t,e[t]);return r};class index_es_V extends n{constructor(e){super(e),this.protocol="wc",this.version=2,this.name=index_es_B,this.events=new events.EventEmitter,this.initialized=!1,this.on=(i,s)=>this.events.on(i,s),this.once=(i,s)=>this.events.once(i,s),this.off=(i,s)=>this.events.off(i,s),this.removeListener=(i,s)=>this.events.removeListener(i,s),this.projectId=e?.projectId;let t="u">typeof e?.logger&&"string"!=typeof e?.logger?e.logger:browser_default()((0,dist_cjs.getDefaultLoggerOptions)({level:e?.logger||index_es_$e.logger}));this.logger=(0,dist_cjs.generateChildLogger)(t,this.name),this.heartbeat=new cjs.HeartBeat,this.crypto=new gt(this,this.logger,e?.keychain),this.history=new Rt(this,this.logger),this.expirer=new St(this,this.logger),this.storage=null!=e&&e.storage?e.storage:new cjs_browser.ZP(xt(xt({},index_es_ke),e?.storageOptions)),this.relayer=new index_es_ft({core:this,logger:this.logger,relayUrl:e?.relayUrl,projectId:this.projectId}),this.pairing=new _t(this,this.logger)}static async init(e){let t=new index_es_V(e);return await t.initialize(),t}get context(){return(0,dist_cjs.getLoggerContext)(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}}let dist_index_es_z="client",index_es_A=`wc@2:${dist_index_es_z}:`,dist_index_es_b={name:dist_index_es_z,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},index_es_T=time_dist_cjs.SEVEN_DAYS,dist_index_es_P={wc_sessionPropose:{req:{ttl:time_dist_cjs.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:time_dist_cjs.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:time_dist_cjs.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:time_dist_cjs.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:time_dist_cjs.ONE_DAY,prompt:!1,tag:1104},res:{ttl:time_dist_cjs.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:time_dist_cjs.ONE_DAY,prompt:!1,tag:1106},res:{ttl:time_dist_cjs.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:time_dist_cjs.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:time_dist_cjs.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:time_dist_cjs.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:time_dist_cjs.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:time_dist_cjs.ONE_DAY,prompt:!1,tag:1112},res:{ttl:time_dist_cjs.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:time_dist_cjs.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:time_dist_cjs.THIRTY_SECONDS,prompt:!1,tag:1115}}},sign_client_dist_index_es_C={min:time_dist_cjs.FIVE_MINUTES,max:time_dist_cjs.SEVEN_DAYS};var dist_index_es_Ye=Object.defineProperty,dist_index_es_ke=Object.defineProperties,dist_index_es_Xe=Object.getOwnPropertyDescriptors,dist_index_es_te=Object.getOwnPropertySymbols,dist_index_es_Je=Object.prototype.hasOwnProperty,dist_index_es_He=Object.prototype.propertyIsEnumerable,dist_index_es_ie=(h,n,e)=>n in h?dist_index_es_Ye(h,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):h[n]=e,dist_index_es_y=(h,n)=>{for(var e in n||(n={}))dist_index_es_Je.call(n,e)&&dist_index_es_ie(h,e,n[e]);if(dist_index_es_te)for(var e of dist_index_es_te(n))dist_index_es_He.call(n,e)&&dist_index_es_ie(h,e,n[e]);return h},dist_index_es_j=(h,n)=>dist_index_es_ke(h,dist_index_es_Xe(n));class dist_index_es_Fe extends C{constructor(n){super(n),this.name="engine",this.events=new(events_default()),this.initialized=!1,this.ignoredPayloadTypes=[1],this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.client.core.pairing.register({methods:Object.keys(dist_index_es_P)}),this.initialized=!0)},this.connect=async e=>{this.isInitialized(),await this.isValidConnect(e);let{pairingTopic:s,requiredNamespaces:t,relays:i}=e,r=s,o,a=!1;if(r&&(a=this.client.core.pairing.pairings.get(r).active),!r||!a){let{topic:E,uri:g}=await this.client.core.pairing.create();r=E,o=g}let l=await this.client.core.crypto.generateKeyPair(),d={requiredNamespaces:t,relays:i??[{protocol:"irn"}],proposer:{publicKey:l,metadata:this.client.metadata}},{reject:S,resolve:w,done:V}=$n();if(this.events.once(kn("session_connect"),async({error:E,session:g})=>{if(E)S(E);else if(g){g.self.publicKey=l;let O=dist_index_es_j(dist_index_es_y({},g),{requiredNamespaces:g.requiredNamespaces});await this.client.session.set(g.topic,O),await this.setExpiry(g.topic,g.expiry),r&&await this.client.core.pairing.updateMetadata({topic:r,metadata:g.peer.metadata}),w(O)}}),!r){let{message:E1}=index_es_y("NO_MATCHING_KEY",`connect() pairing topic: ${r}`);throw Error(E1)}let x=await this.sendRequest(r,"wc_sessionPropose",d),G=Cn(time_dist_cjs.FIVE_MINUTES);return await this.setProposal(x,dist_index_es_y({id:x,expiry:G},d)),{uri:o,approval:V}},this.pair=async e=>(this.isInitialized(),await this.client.core.pairing.pair(e)),this.approve=async e=>{this.isInitialized(),await this.isValidApprove(e);let{id:s,relayProtocol:t,namespaces:i}=e,r=this.client.proposal.get(s),{pairingTopic:o,proposer:a,requiredNamespaces:l}=r;B(l)||(l=function(e,n){let t=He(e,n);if(t)throw Error(t.message);let r={};for(let[o,s]of Object.entries(e))r[o]={methods:s.methods,events:s.events,chains:s.accounts.map(i=>`${i.split(":")[0]}:${i.split(":")[1]}`)};return r}(i,"approve()"),this.client.proposal.set(s,dist_index_es_j(dist_index_es_y({},r),{requiredNamespaces:l})));let d=await this.client.core.crypto.generateKeyPair(),S=a.publicKey,w=await this.client.core.crypto.generateSharedKey(d,S),V={relay:{protocol:t??"irn"},namespaces:i,requiredNamespaces:l,controller:{publicKey:d,metadata:this.client.metadata},expiry:Cn(index_es_T)};await this.client.core.relayer.subscribe(w);let x=await this.sendRequest(w,"wc_sessionSettle",V),{done:G,resolve:E,reject:g}=$n();this.events.once(kn("session_approve",x),({error:Y})=>{Y?g(Y):E(this.client.session.get(w))});let O=dist_index_es_j(dist_index_es_y({},V),{topic:w,acknowledged:!1,self:V.controller,peer:{publicKey:a.publicKey,metadata:a.metadata},controller:d});return await this.client.session.set(w,O),await this.setExpiry(w,Cn(index_es_T)),o&&await this.client.core.pairing.updateMetadata({topic:o,metadata:O.peer.metadata}),o&&s&&(await this.sendResult(s,o,{relay:{protocol:t??"irn"},responderPublicKey:d}),await this.client.proposal.delete(s,index_es_h("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:o})),{topic:w,acknowledged:G}},this.reject=async e=>{this.isInitialized(),await this.isValidReject(e);let{id:s,reason:t}=e,{pairingTopic:i}=this.client.proposal.get(s);i&&(await this.sendError(s,i,t),await this.client.proposal.delete(s,index_es_h("USER_DISCONNECTED")))},this.update=async e=>{this.isInitialized(),await this.isValidUpdate(e);let{topic:s,namespaces:t}=e,i=await this.sendRequest(s,"wc_sessionUpdate",{namespaces:t}),{done:r,resolve:o,reject:a}=$n();return this.events.once(kn("session_update",i),({error:l})=>{l?a(l):o()}),await this.client.session.update(s,{namespaces:t}),{acknowledged:r}},this.extend=async e=>{this.isInitialized(),await this.isValidExtend(e);let{topic:s}=e,t=await this.sendRequest(s,"wc_sessionExtend",{}),{done:i,resolve:r,reject:o}=$n();return this.events.once(kn("session_extend",t),({error:a})=>{a?o(a):r()}),await this.setExpiry(s,Cn(index_es_T)),{acknowledged:i}},this.request=async e=>{this.isInitialized(),await this.isValidRequest(e);let{chainId:s,request:t,topic:i,expiry:r}=e,o=await this.sendRequest(i,"wc_sessionRequest",{request:t,chainId:s},r),{done:a,resolve:l,reject:d}=$n(r);return this.events.once(kn("session_request",o),({error:S,result:w})=>{S?d(S):l(w)}),await a()},this.respond=async e=>{this.isInitialized(),await this.isValidRespond(e);let{topic:s,response:t}=e,{id:i}=t;(0,jsonrpc_utils_dist_esm.isJsonRpcResult)(t)?await this.sendResult(i,s,t.result):(0,jsonrpc_utils_dist_esm.isJsonRpcError)(t)&&await this.sendError(i,s,t.error),this.deletePendingSessionRequest(e.response.id,{message:"fulfilled",code:0})},this.ping=async e=>{this.isInitialized(),await this.isValidPing(e);let{topic:s}=e;if(this.client.session.keys.includes(s)){let t=await this.sendRequest(s,"wc_sessionPing",{}),{done:i,resolve:r,reject:o}=$n();this.events.once(kn("session_ping",t),({error:a})=>{a?o(a):r()}),await i()}else this.client.core.pairing.pairings.keys.includes(s)&&await this.client.core.pairing.ping({topic:s})},this.emit=async e=>{this.isInitialized(),await this.isValidEmit(e);let{topic:s,event:t,chainId:i}=e;await this.sendRequest(s,"wc_sessionEvent",{event:t,chainId:i})},this.disconnect=async e=>{this.isInitialized(),await this.isValidDisconnect(e);let{topic:s}=e;this.client.session.keys.includes(s)?(await this.sendRequest(s,"wc_sessionDelete",index_es_h("USER_DISCONNECTED")),await this.deleteSession(s)):await this.client.core.pairing.disconnect({topic:s})},this.find=e=>(this.isInitialized(),this.client.session.getAll().filter(s=>(function(e,n){let{requiredNamespaces:t}=n,r=Object.keys(e.namespaces),o=Object.keys(t),s=!0;return!!index_es_m(o,r)&&(r.forEach(i=>{let{accounts:u,methods:f,events:g}=e.namespaces[i],O=index_es_b(u),p=t[i];index_es_m(p.chains,O)&&index_es_m(p.methods,f)&&index_es_m(p.events,g)||(s=!1)}),s)})(s,e))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.deleteSession=async(e,s)=>{let{self:t}=this.client.session.get(e);await this.client.core.relayer.unsubscribe(e),await Promise.all([this.client.session.delete(e,index_es_h("USER_DISCONNECTED")),this.client.core.crypto.deleteKeyPair(t.publicKey),this.client.core.crypto.deleteSymKey(e),s?Promise.resolve():this.client.core.expirer.del(e)])},this.deleteProposal=async(e,s)=>{await Promise.all([this.client.proposal.delete(e,index_es_h("USER_DISCONNECTED")),s?Promise.resolve():this.client.core.expirer.del(e)])},this.deletePendingSessionRequest=async(e,s,t=!1)=>{await Promise.all([this.client.pendingRequest.delete(e,s),t?Promise.resolve():this.client.core.expirer.del(e)])},this.setExpiry=async(e,s)=>{this.client.session.keys.includes(e)&&await this.client.session.update(e,{expiry:s}),this.client.core.expirer.set(e,s)},this.setProposal=async(e,s)=>{await this.client.proposal.set(e,s),this.client.core.expirer.set(e,s.expiry)},this.setPendingSessionRequest=async e=>{let s=dist_index_es_P.wc_sessionRequest.req.ttl,{id:t,topic:i,params:r}=e;await this.client.pendingRequest.set(t,{id:t,topic:i,params:r}),s&&this.client.core.expirer.set(t,Cn(s))},this.sendRequest=async(e,s,t,i)=>{let r=(0,jsonrpc_utils_dist_esm.formatJsonRpcRequest)(s,t),o=await this.client.core.crypto.encode(e,r),a=dist_index_es_P[s].req;return i&&(a.ttl=i),this.client.core.history.set(e,r),this.client.core.relayer.publish(e,o,a),r.id},this.sendResult=async(e,s,t)=>{let i=(0,jsonrpc_utils_dist_esm.formatJsonRpcResult)(e,t),r=await this.client.core.crypto.encode(s,i),o=await this.client.core.history.get(s,e),a=dist_index_es_P[o.request.method].res;this.client.core.relayer.publish(s,r,a),await this.client.core.history.resolve(i)},this.sendError=async(e,s,t)=>{let i=(0,jsonrpc_utils_dist_esm.formatJsonRpcError)(e,t),r=await this.client.core.crypto.encode(s,i),o=await this.client.core.history.get(s,e),a=dist_index_es_P[o.request.method].res;this.client.core.relayer.publish(s,r,a),await this.client.core.history.resolve(i)},this.cleanup=async()=>{let e=[],s=[];this.client.session.getAll().forEach(t=>{Dn(t.expiry)&&e.push(t.topic)}),this.client.proposal.getAll().forEach(t=>{Dn(t.expiry)&&s.push(t.id)}),await Promise.all([...e.map(t=>this.deleteSession(t)),...s.map(t=>this.deleteProposal(t))])},this.onRelayEventRequest=e=>{let{topic:s,payload:t}=e,i=t.method;switch(i){case"wc_sessionPropose":return this.onSessionProposeRequest(s,t);case"wc_sessionSettle":return this.onSessionSettleRequest(s,t);case"wc_sessionUpdate":return this.onSessionUpdateRequest(s,t);case"wc_sessionExtend":return this.onSessionExtendRequest(s,t);case"wc_sessionPing":return this.onSessionPingRequest(s,t);case"wc_sessionDelete":return this.onSessionDeleteRequest(s,t);case"wc_sessionRequest":return this.onSessionRequest(s,t);case"wc_sessionEvent":return this.onSessionEventRequest(s,t);default:return this.client.logger.info(`Unsupported request method ${i}`)}},this.onRelayEventResponse=async e=>{let{topic:s,payload:t}=e,i=(await this.client.core.history.get(s,t.id)).request.method;switch(i){case"wc_sessionPropose":return this.onSessionProposeResponse(s,t);case"wc_sessionSettle":return this.onSessionSettleResponse(s,t);case"wc_sessionUpdate":return this.onSessionUpdateResponse(s,t);case"wc_sessionExtend":return this.onSessionExtendResponse(s,t);case"wc_sessionPing":return this.onSessionPingResponse(s,t);case"wc_sessionRequest":return this.onSessionRequestResponse(s,t);default:return this.client.logger.info(`Unsupported response method ${i}`)}},this.onSessionProposeRequest=async(e,s)=>{let{params:t,id:i}=s;try{this.isValidConnect(dist_index_es_y({},s.params));let r=Cn(time_dist_cjs.FIVE_MINUTES),o=dist_index_es_y({id:i,pairingTopic:e,expiry:r},t);await this.setProposal(i,o),this.client.events.emit("session_proposal",{id:i,params:o})}catch(r1){await this.sendError(i,e,r1),this.client.logger.error(r1)}},this.onSessionProposeResponse=async(e,s)=>{let{id:t}=s;if((0,jsonrpc_utils_dist_esm.isJsonRpcResult)(s)){let{result:i}=s;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:i});let r=this.client.proposal.get(t);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:r});let o=r.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:o});let a=i.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:a});let l=await this.client.core.crypto.generateSharedKey(o,a);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:l});let d=await this.client.core.relayer.subscribe(l);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:e})}else(0,jsonrpc_utils_dist_esm.isJsonRpcError)(s)&&(await this.client.proposal.delete(t,index_es_h("USER_DISCONNECTED")),this.events.emit(kn("session_connect"),{error:s.error}))},this.onSessionSettleRequest=async(e,s)=>{let{id:t,params:i}=s;try{this.isValidSessionSettleRequest(i);let{relay:r,controller:o,expiry:a,namespaces:l,requiredNamespaces:d}=s.params,S={topic:e,relay:r,expiry:a,namespaces:l,acknowledged:!0,requiredNamespaces:d,controller:o.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:o.publicKey,metadata:o.metadata}};await this.sendResult(s.id,e,!0),this.events.emit(kn("session_connect"),{session:S})}catch(r1){await this.sendError(t,e,r1),this.client.logger.error(r1)}},this.onSessionSettleResponse=async(e,s)=>{let{id:t}=s;(0,jsonrpc_utils_dist_esm.isJsonRpcResult)(s)?(await this.client.session.update(e,{acknowledged:!0}),this.events.emit(kn("session_approve",t),{})):(0,jsonrpc_utils_dist_esm.isJsonRpcError)(s)&&(await this.client.session.delete(e,index_es_h("USER_DISCONNECTED")),this.events.emit(kn("session_approve",t),{error:s.error}))},this.onSessionUpdateRequest=async(e,s)=>{let{params:t,id:i}=s;try{this.isValidUpdate(dist_index_es_y({topic:e},t)),await this.client.session.update(e,{namespaces:t.namespaces}),await this.sendResult(i,e,!0),this.client.events.emit("session_update",{id:i,topic:e,params:t})}catch(r){await this.sendError(i,e,r),this.client.logger.error(r)}},this.onSessionUpdateResponse=(e,s)=>{let{id:t}=s;(0,jsonrpc_utils_dist_esm.isJsonRpcResult)(s)?this.events.emit(kn("session_update",t),{}):(0,jsonrpc_utils_dist_esm.isJsonRpcError)(s)&&this.events.emit(kn("session_update",t),{error:s.error})},this.onSessionExtendRequest=async(e,s)=>{let{id:t}=s;try{this.isValidExtend({topic:e}),await this.setExpiry(e,Cn(index_es_T)),await this.sendResult(t,e,!0),this.client.events.emit("session_extend",{id:t,topic:e})}catch(i){await this.sendError(t,e,i),this.client.logger.error(i)}},this.onSessionExtendResponse=(e,s)=>{let{id:t}=s;(0,jsonrpc_utils_dist_esm.isJsonRpcResult)(s)?this.events.emit(kn("session_extend",t),{}):(0,jsonrpc_utils_dist_esm.isJsonRpcError)(s)&&this.events.emit(kn("session_extend",t),{error:s.error})},this.onSessionPingRequest=async(e,s)=>{let{id:t}=s;try{this.isValidPing({topic:e}),await this.sendResult(t,e,!0),this.client.events.emit("session_ping",{id:t,topic:e})}catch(i){await this.sendError(t,e,i),this.client.logger.error(i)}},this.onSessionPingResponse=(e,s)=>{let{id:t}=s;setTimeout(()=>{(0,jsonrpc_utils_dist_esm.isJsonRpcResult)(s)?this.events.emit(kn("session_ping",t),{}):(0,jsonrpc_utils_dist_esm.isJsonRpcError)(s)&&this.events.emit(kn("session_ping",t),{error:s.error})},500)},this.onSessionDeleteRequest=async(e,s)=>{let{id:t}=s;try{this.isValidDisconnect({topic:e,reason:s.params}),this.client.core.relayer.once(index_es_D.publish,async()=>{await this.deleteSession(e)}),await this.sendResult(t,e,!0),this.client.events.emit("session_delete",{id:t,topic:e})}catch(i){await this.sendError(t,e,i),this.client.logger.error(i)}},this.onSessionRequest=async(e,s)=>{let{id:t,params:i}=s;try{this.isValidRequest(dist_index_es_y({topic:e},i)),await this.setPendingSessionRequest({id:t,topic:e,params:i}),this.client.events.emit("session_request",{id:t,topic:e,params:i})}catch(r){await this.sendError(t,e,r),this.client.logger.error(r)}},this.onSessionRequestResponse=(e,s)=>{let{id:t}=s;(0,jsonrpc_utils_dist_esm.isJsonRpcResult)(s)?this.events.emit(kn("session_request",t),{result:s.result}):(0,jsonrpc_utils_dist_esm.isJsonRpcError)(s)&&this.events.emit(kn("session_request",t),{error:s.error})},this.onSessionEventRequest=async(e,s)=>{let{id:t,params:i}=s;try{this.isValidEmit(dist_index_es_y({topic:e},i)),this.client.events.emit("session_event",{id:t,topic:e,params:i})}catch(r){await this.sendError(t,e,r),this.client.logger.error(r)}},this.isValidConnect=async e=>{let t;if(!st(e)){let{message:o}=index_es_y("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(e)}`);throw Error(o)}let{pairingTopic:s,requiredNamespaces:t1,relays:i}=e;if(index_es_E(s)||await this.isValidPairingTopic(s),!index_es_E(t1)&&0===B(t1))return;let r=function(e,n){let t=null;if(e&&B(e)){let t1;let r=index_es_z(e,n);r&&(t=r);let o=(t1=null,Object.entries(e).forEach(([r,o])=>{var n1,t;let r1;if(t1)return;let s=(n1=o?.chains,t=`${n} requiredNamespace`,r1=null,index_es_I(n1)?n1.forEach(o=>{!r1&&(index_es_C(o)&&o.includes(r)||(r1=index_es_h("UNSUPPORTED_CHAINS",`${t}, chain ${o} should be a string and conform to "namespace:chainId" format`)))}):r1=index_es_h("UNSUPPORTED_CHAINS",`${t}, chains ${n1} should be an array of strings conforming to "namespace:chainId" format`),r1);s&&(t1=s)}),t1);o&&(t=o)}else t=index_es_y("MISSING_OR_INVALID",`${n}, requiredNamespaces should be an object with data`);return t}(t1,"connect()");if(r)throw Error(r.message);if(t=!1,i?i&&index_es_I(i)&&i.length&&i.forEach(r=>{t=qe(r)}):t=!0,!t){let{message:o1}=index_es_y("MISSING_OR_INVALID",`connect() relays: ${i}`);throw Error(o1)}},this.isValidApprove=async e=>{if(!st(e))throw Error(index_es_y("MISSING_OR_INVALID",`approve() params: ${e}`).message);let{id:s,namespaces:t,relayProtocol:i}=e;await this.isValidProposalId(s);let r=this.client.proposal.get(s),o=He(t,"approve()");if(o)throw Error(o.message);let a=pt(r.requiredNamespaces,t,"update()");if(a)throw Error(a.message);if(!index_es_a(i,!0)){let{message:l}=index_es_y("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw Error(l)}},this.isValidReject=async e=>{if(!st(e)){let{message:i}=index_es_y("MISSING_OR_INVALID",`reject() params: ${e}`);throw Error(i)}let{id:s,reason:t}=e;if(await this.isValidProposalId(s),!t||"object"!=typeof t||!t.code||!w(t.code,!1)||!t.message||!index_es_a(t.message,!1)){let{message:i1}=index_es_y("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(t)}`);throw Error(i1)}},this.isValidSessionSettleRequest=e=>{let t;if(!st(e)){let{message:l}=index_es_y("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${e}`);throw Error(l)}let{relay:s,controller:t1,namespaces:i,expiry:r}=e;if(!qe(s)){let{message:l1}=index_es_y("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw Error(l1)}let o=(t=null,index_es_a(t1?.publicKey,!1)||(t=index_es_y("MISSING_OR_INVALID","onSessionSettleRequest() controller public key should be a string")),t);if(o)throw Error(o.message);let a=He(i,"onSessionSettleRequest()");if(a)throw Error(a.message);if(Dn(r)){let{message:l2}=index_es_y("EXPIRED","onSessionSettleRequest()");throw Error(l2)}},this.isValidUpdate=async e=>{if(!st(e)){let{message:a}=index_es_y("MISSING_OR_INVALID",`update() params: ${e}`);throw Error(a)}let{topic:s,namespaces:t}=e;await this.isValidSessionTopic(s);let i=this.client.session.get(s),r=He(t,"update()");if(r)throw Error(r.message);let o=pt(i.requiredNamespaces,t,"update()");if(o)throw Error(o.message)},this.isValidExtend=async e=>{if(!st(e)){let{message:t}=index_es_y("MISSING_OR_INVALID",`extend() params: ${e}`);throw Error(t)}let{topic:s}=e;await this.isValidSessionTopic(s)},this.isValidRequest=async e=>{var t;if(!st(e)){let{message:a}=index_es_y("MISSING_OR_INVALID",`request() params: ${e}`);throw Error(a)}let{topic:s,request:t1,chainId:i,expiry:r}=e;await this.isValidSessionTopic(s);let{namespaces:o}=this.client.session.get(s);if(!dt(o,i)){let{message:a1}=index_es_y("MISSING_OR_INVALID",`request() chainId: ${i}`);throw Error(a1)}if(index_es_E(t1)||!index_es_a(t1.method,!1)){let{message:a2}=index_es_y("MISSING_OR_INVALID",`request() ${JSON.stringify(t1)}`);throw Error(a2)}if(!(index_es_a(t=t1.method,!1)&&(function(e,n){let t=[];return Object.values(e).forEach(r=>{index_es_b(r.accounts).includes(n)&&t.push(...r.methods)}),t})(o,i).includes(t))){let{message:a3}=index_es_y("MISSING_OR_INVALID",`request() method: ${t1.method}`);throw Error(a3)}if(r&&(!w(r,!1)||!(r<=sign_client_dist_index_es_C.max)||!(r>=sign_client_dist_index_es_C.min))){let{message:a4}=index_es_y("MISSING_OR_INVALID",`request() expiry: ${r}. Expiry must be a number (in seconds) between ${sign_client_dist_index_es_C.min} and ${sign_client_dist_index_es_C.max}`);throw Error(a4)}},this.isValidRespond=async e=>{if(!st(e)){let{message:i}=index_es_y("MISSING_OR_INVALID",`respond() params: ${e}`);throw Error(i)}let{topic:s,response:t}=e;if(await this.isValidSessionTopic(s),index_es_E(t)||index_es_E(t.result)&&index_es_E(t.error)||!w(t.id,!1)||!index_es_a(t.jsonrpc,!1)){let{message:i1}=index_es_y("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(t)}`);throw Error(i1)}},this.isValidPing=async e=>{if(!st(e)){let{message:t}=index_es_y("MISSING_OR_INVALID",`ping() params: ${e}`);throw Error(t)}let{topic:s}=e;await this.isValidSessionOrPairingTopic(s)},this.isValidEmit=async e=>{var t;if(!st(e)){let{message:o}=index_es_y("MISSING_OR_INVALID",`emit() params: ${e}`);throw Error(o)}let{topic:s,event:t1,chainId:i}=e;await this.isValidSessionTopic(s);let{namespaces:r}=this.client.session.get(s);if(!dt(r,i)){let{message:o1}=index_es_y("MISSING_OR_INVALID",`emit() chainId: ${i}`);throw Error(o1)}if(index_es_E(t1)||!index_es_a(t1.name,!1)){let{message:o2}=index_es_y("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(t1)}`);throw Error(o2)}if(!(index_es_a(t=t1.name,!1)&&(function(e,n){let t=[];return Object.values(e).forEach(r=>{index_es_b(r.accounts).includes(n)&&t.push(...r.events)}),t})(r,i).includes(t))){let{message:o3}=index_es_y("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(t1)}`);throw Error(o3)}},this.isValidDisconnect=async e=>{if(!st(e)){let{message:t}=index_es_y("MISSING_OR_INVALID",`disconnect() params: ${e}`);throw Error(t)}let{topic:s}=e;await this.isValidSessionOrPairingTopic(s)}}isInitialized(){if(!this.initialized){let{message:n}=index_es_y("NOT_INITIALIZED",this.name);throw Error(n)}}registerRelayerEvents(){this.client.core.relayer.on(index_es_D.message,async n=>{let{topic:e,message:s}=n;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(s)))return;let t=await this.client.core.crypto.decode(e,s);(0,jsonrpc_utils_dist_esm.isJsonRpcRequest)(t)?(this.client.core.history.set(e,t),this.onRelayEventRequest({topic:e,payload:t})):(0,jsonrpc_utils_dist_esm.isJsonRpcResponse)(t)&&(await this.client.core.history.resolve(t),this.onRelayEventResponse({topic:e,payload:t}))})}registerExpirerEvents(){this.client.core.expirer.on(dist_index_es_m.expired,async n=>{let{topic:e,id:s}=Kn(n.target);if(s&&this.client.pendingRequest.keys.includes(s))return await this.deletePendingSessionRequest(s,index_es_y("EXPIRED"),!0);e?this.client.session.keys.includes(e)&&(await this.deleteSession(e,!0),this.client.events.emit("session_expire",{topic:e})):s&&(await this.deleteProposal(s,!0),this.client.events.emit("proposal_expire",{id:s}))})}isValidPairingTopic(n){if(!index_es_a(n,!1)){let{message:e}=index_es_y("MISSING_OR_INVALID",`pairing topic should be a string: ${n}`);throw Error(e)}if(!this.client.core.pairing.pairings.keys.includes(n)){let{message:e1}=index_es_y("NO_MATCHING_KEY",`pairing topic doesn't exist: ${n}`);throw Error(e1)}if(Dn(this.client.core.pairing.pairings.get(n).expiry)){let{message:e2}=index_es_y("EXPIRED",`pairing topic: ${n}`);throw Error(e2)}}async isValidSessionTopic(n){if(!index_es_a(n,!1)){let{message:e}=index_es_y("MISSING_OR_INVALID",`session topic should be a string: ${n}`);throw Error(e)}if(!this.client.session.keys.includes(n)){let{message:e1}=index_es_y("NO_MATCHING_KEY",`session topic doesn't exist: ${n}`);throw Error(e1)}if(Dn(this.client.session.get(n).expiry)){await this.deleteSession(n);let{message:e2}=index_es_y("EXPIRED",`session topic: ${n}`);throw Error(e2)}}async isValidSessionOrPairingTopic(n){if(this.client.session.keys.includes(n))await this.isValidSessionTopic(n);else if(this.client.core.pairing.pairings.keys.includes(n))this.isValidPairingTopic(n);else if(index_es_a(n,!1)){let{message:e}=index_es_y("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${n}`);throw Error(e)}else{let{message:e1}=index_es_y("MISSING_OR_INVALID",`session or pairing topic should be a string: ${n}`);throw Error(e1)}}async isValidProposalId(n){if("number"!=typeof n){let{message:e}=index_es_y("MISSING_OR_INVALID",`proposal id should be a number: ${n}`);throw Error(e)}if(!this.client.proposal.keys.includes(n)){let{message:e1}=index_es_y("NO_MATCHING_KEY",`proposal id doesn't exist: ${n}`);throw Error(e1)}if(Dn(this.client.proposal.get(n).expiry)){await this.deleteProposal(n);let{message:e2}=index_es_y("EXPIRED",`proposal id: ${n}`);throw Error(e2)}}}class dist_index_es_Qe extends Ct{constructor(n,e){super(n,e,"proposal",index_es_A),this.core=n,this.logger=e}}class dist_index_es_Be extends Ct{constructor(n,e){super(n,e,"session",index_es_A),this.core=n,this.logger=e}}class dist_index_es_Ze extends Ct{constructor(n,e){super(n,e,"request",index_es_A),this.core=n,this.logger=e}}class index_es_L extends y{constructor(n){super(n),this.protocol="wc",this.version=2,this.name=dist_index_es_b.name,this.events=new events.EventEmitter,this.on=(s,t)=>this.events.on(s,t),this.once=(s,t)=>this.events.once(s,t),this.off=(s,t)=>this.events.off(s,t),this.removeListener=(s,t)=>this.events.removeListener(s,t),this.removeAllListeners=s=>this.events.removeAllListeners(s),this.connect=async s=>{try{return await this.engine.connect(s)}catch(t){throw this.logger.error(t.message),t}},this.pair=async s=>{try{return await this.engine.pair(s)}catch(t){throw this.logger.error(t.message),t}},this.approve=async s=>{try{return await this.engine.approve(s)}catch(t){throw this.logger.error(t.message),t}},this.reject=async s=>{try{return await this.engine.reject(s)}catch(t){throw this.logger.error(t.message),t}},this.update=async s=>{try{return await this.engine.update(s)}catch(t){throw this.logger.error(t.message),t}},this.extend=async s=>{try{return await this.engine.extend(s)}catch(t){throw this.logger.error(t.message),t}},this.request=async s=>{try{return await this.engine.request(s)}catch(t){throw this.logger.error(t.message),t}},this.respond=async s=>{try{return await this.engine.respond(s)}catch(t){throw this.logger.error(t.message),t}},this.ping=async s=>{try{return await this.engine.ping(s)}catch(t){throw this.logger.error(t.message),t}},this.emit=async s=>{try{return await this.engine.emit(s)}catch(t){throw this.logger.error(t.message),t}},this.disconnect=async s=>{try{return await this.engine.disconnect(s)}catch(t){throw this.logger.error(t.message),t}},this.find=s=>{try{return this.engine.find(s)}catch(t){throw this.logger.error(t.message),t}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(s){throw this.logger.error(s.message),s}},this.name=n?.name||dist_index_es_b.name,this.metadata=n?.metadata||(0,window_metadata_dist_cjs.D)()||{name:"",description:"",url:"",icons:[""]};let e="u">typeof n?.logger&&"string"!=typeof n?.logger?n.logger:browser_default()((0,dist_cjs.getDefaultLoggerOptions)({level:n?.logger||dist_index_es_b.logger}));this.core=n?.core||new index_es_V(n),this.logger=(0,dist_cjs.generateChildLogger)(e,this.name),this.session=new dist_index_es_Be(this.core,this.logger),this.proposal=new dist_index_es_Qe(this.core,this.logger),this.pendingRequest=new dist_index_es_Ze(this.core,this.logger),this.engine=new dist_index_es_Fe(this)}static async init(n){let e=new index_es_L(n);return await e.initialize(),e}get context(){return(0,dist_cjs.getLoggerContext)(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success")}catch(n){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(n.message),n}}}__webpack_require__(3382),__webpack_require__(99982),__webpack_require__(94543),__webpack_require__(83454),Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;let index_es_Wn={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}};var jsonrpc_http_connection_dist_esm=__webpack_require__(96641);function r(i,t){let e;return t.rpcMap&&(e=t.rpcMap[Number([i][0].split(":")[1])]),e}class universal_provider_dist_index_es_E{constructor(t){this.name="eip155",this.namespace=t.namespace,this.client=t.client,this.events=t.events,this.httpProviders=this.createHttpProviders(),this.chainId=this.getDefaultChainId()}async request(t){var e;switch(t.request.method){case"eth_requestAccounts":case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":{let s=t.request.params?null==(e=t.request.params[0])?void 0:e.chainId:"0x0";return this.setDefaultChain(parseInt(s,16).toString()),null}case"eth_chainId":return this.getDefaultChainId()}return this.namespace.methods.includes(t.request.method)?await this.client.request(t):this.getHttpProvider().request(t.request)}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}setDefaultChain(t,e){if(this.chainId=parseInt(t),!this.httpProviders[t]){let s=e||r(`${this.name}:${t}`,this.namespace);if(!s)throw Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,s)}this.events.emit("chainChanged",this.chainId)}requestAccounts(){return this.getAccounts()}createHttpProvider(t,e){let s=e||r(t,this.namespace);return typeof s>"u"?void 0:new dist_esm.r(new jsonrpc_http_connection_dist_esm.k(s))}setHttpProvider(t,e){let s=this.createHttpProvider(t,e);s&&(this.httpProviders[t]=s)}createHttpProviders(){let t={};return this.namespace.chains.forEach(e=>{t[e]=this.createHttpProvider(e)}),t}getAccounts(){let t=this.namespace.accounts;return t&&t.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2])||[]}getDefaultChainId(){if(this.chainId)return this.chainId;let t=this.namespace.chains[0];if(!t)throw Error("ChainId not found");return parseInt(t.split(":")[1])}getHttpProvider(){let t=`${this.name}:${this.chainId}`,e=this.httpProviders[t];if(typeof e>"u")throw Error(`JSON-RPC provider for ${t} not found`);return e}}class dist_index_es_q{constructor(t){this.name="solana",this.namespace=t.namespace,this.events=t.events,this.client=t.client,this.chainId=this.getDefaultChainId(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getAccounts(){let t=this.namespace.accounts;return t&&t.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2])||[]}createHttpProviders(){let t={};return this.namespace.chains.forEach(e=>{t[e]=this.createHttpProvider(e)}),t}getDefaultChainId(){if(this.chainId)return this.chainId;let t=this.namespace.chains[0];if(!t)throw Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}getHttpProvider(){let t=`${this.name}:${this.chainId}`,e=this.httpProviders[t];if(typeof e>"u")throw Error(`JSON-RPC provider for ${t} not found`);return e}setDefaultChain(t,e){if(this.chainId=t,!this.httpProviders[t]){let s=e||r(`${this.name}:${t}`,this.namespace);if(!s)throw Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,s)}this.events.emit("chainChanged",this.chainId)}setHttpProvider(t,e){let s=this.createHttpProvider(t,e);s&&(this.httpProviders[t]=s)}createHttpProvider(t,e){let s=e||r(t,this.namespace);return typeof s>"u"?void 0:new dist_esm.r(new jsonrpc_http_connection_dist_esm.Z(s))}}class dist_index_es_H{constructor(t){this.name="cosmos",this.namespace=t.namespace,this.events=t.events,this.client=t.client,this.chainId=this.getDefaultChainId(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getAccounts(){let t=this.namespace.accounts;return t&&t.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2])||[]}createHttpProviders(){let t={};return this.namespace.chains.forEach(e=>{t[e]=this.createHttpProvider(e)}),t}getDefaultChainId(){if(this.chainId)return this.chainId;let t=this.namespace.chains[0];if(!t)throw Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}getHttpProvider(){let t=`${this.name}:${this.chainId}`,e=this.httpProviders[t];if(typeof e>"u")throw Error(`JSON-RPC provider for ${t} not found`);return e}setDefaultChain(t,e){if(this.chainId=t,!this.httpProviders[t]){let s=e||r(`${this.name}:${t}`,this.namespace);if(!s)throw Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,s)}this.events.emit("chainChanged",this.chainId)}setHttpProvider(t,e){let s=this.createHttpProvider(t,e);s&&(this.httpProviders[t]=s)}createHttpProvider(t,e){let s=e||r(t,this.namespace);return typeof s>"u"?void 0:new dist_esm.r(new jsonrpc_http_connection_dist_esm.Z(s))}}class dist_index_es_${constructor(t){this.name="cip34",this.namespace=t.namespace,this.events=t.events,this.client=t.client,this.chainId=this.getDefaultChainId(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getAccounts(){let t=this.namespace.accounts;return t&&t.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2])||[]}createHttpProviders(){let t={};return this.namespace.chains.forEach(e=>{t[e]=this.createHttpProvider(e)}),t}getDefaultChainId(){if(this.chainId)return this.chainId;let t=this.namespace.chains[0];if(!t)throw Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}getHttpProvider(){let t=`${this.name}:${this.chainId}`,e=this.httpProviders[t];if(typeof e>"u")throw Error(`JSON-RPC provider for ${t} not found`);return e}setDefaultChain(t,e){if(this.chainId=t,!this.httpProviders[t]){let s=e||r(`${this.name}:${t}`,this.namespace);if(!s)throw Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,s)}this.events.emit("chainChanged",this.chainId)}setHttpProvider(t,e){let s=this.createHttpProvider(t,e);s&&(this.httpProviders[t]=s)}createHttpProvider(t,e){let s=e||r(t,this.namespace);return typeof s>"u"?void 0:new dist_esm.r(new jsonrpc_http_connection_dist_esm.Z(s))}}let universal_provider_dist_index_es_h="error",dist_index_es_p="wc@2:universal_provider:";var universal_provider_dist_index_es_N=Object.defineProperty,dist_index_es_D=Object.defineProperties,universal_provider_dist_index_es_j=Object.getOwnPropertyDescriptors,dist_index_es_d=Object.getOwnPropertySymbols,universal_provider_dist_index_es_k=Object.prototype.hasOwnProperty,dist_index_es_R=Object.prototype.propertyIsEnumerable,dist_index_es_l=(i,t,e)=>t in i?universal_provider_dist_index_es_N(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e,index_es_u=(i,t)=>{for(var e in t||(t={}))universal_provider_dist_index_es_k.call(t,e)&&dist_index_es_l(i,e,t[e]);if(dist_index_es_d)for(var e of dist_index_es_d(t))dist_index_es_R.call(t,e)&&dist_index_es_l(i,e,t[e]);return i},dist_index_es_=(i,t)=>dist_index_es_D(i,universal_provider_dist_index_es_j(t));class o{constructor(t){this.events=new(events_default()),this.rpcProviders={},this.providerOpts=t,this.logger="u">typeof t?.logger&&"string"!=typeof t?.logger?t.logger:browser_default()((0,dist_cjs.getDefaultLoggerOptions)({level:t?.logger||universal_provider_dist_index_es_h}))}static async init(t){let e=new o(t);return await e.initialize(),e}async request(t,e){let[s,n]=this.validateChain(e);if(!this.session)throw Error("Please call connect() before request()");return await this.getProvider(s).request({request:index_es_u({},t),chainId:`${s}:${n}`,topic:this.session.topic})}sendAsync(t,e,s){this.request(t,s).then(n=>e(null,n)).catch(n=>e(n,void 0))}async enable(){if(!this.client)throw Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces}),await this.requestAccounts()}async disconnect(){var t;if(!this.session)throw Error("Please call connect() before enable()");await this.client.disconnect({topic:null==(t=this.session)?void 0:t.topic,reason:function(e,n){let{message:t,code:r}=index_es_Wn[e];return{message:n?`${t} ${n}`:t,code:r}}("USER_DISCONNECTED")}),await this.cleanup()}async connect(t){if(!this.client)throw Error("Sign Client not initialized");let{namespaces:e}=t;return this.setNamespaces(e),this.createProviders(),await this.cleanupPendingPairings(),!0===t.skipPairing?void 0:await this.pair(t.pairingTopic)}on(t,e){this.events.on(t,e)}once(t,e){this.events.once(t,e)}removeListener(t,e){this.events.removeListener(t,e)}off(t,e){this.events.off(t,e)}get isWalletConnect(){return!0}async pair(t){let{uri:e,approval:s}=await this.client.connect({pairingTopic:t,requiredNamespaces:this.namespaces});return e&&(this.uri=e,this.events.emit("display_uri",e)),this.session=await s(),this.onSessionUpdate(),this.onConnect(),this.session}setDefaultChain(t,e){try{let[s,n]=this.validateChain(t);this.getProvider(s).setDefaultChain(n,e)}catch(s1){if(!/Please call connect/.test(s1.message))throw s1}}async cleanupPendingPairings(t={}){var n;this.logger.info("Cleaning up inactive pairings...");let e=this.client.pairing.getAll();if(Array.isArray(e)&&(!("u">typeof n)||!e.length||e.every(n))){for(let s of e)t.deletePairings?this.client.core.expirer.set(s.topic,0):await this.client.core.relayer.subscriber.unsubscribe(s.topic);this.logger.info(`Inactive pairings cleared: ${e.length}`)}}async checkStorage(){if(this.namespaces=await this.client.core.storage.getItem(`${dist_index_es_p}/namespaces`)||{},this.namespaces&&this.createProviders(),this.client.session.length){let t=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[t]),this.onSessionUpdate()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await index_es_L.init({logger:this.providerOpts.logger||universal_provider_dist_index_es_h,relayUrl:this.providerOpts.relayUrl||"wss://relay.walletconnect.com",projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw Error("Sign Client not initialized");Object.keys(this.namespaces).forEach(t=>{switch(t){case"eip155":this.rpcProviders[t]=new universal_provider_dist_index_es_E({client:this.client,namespace:this.namespaces[t],events:this.events});break;case"solana":this.rpcProviders[t]=new dist_index_es_q({client:this.client,namespace:this.namespaces[t],events:this.events});break;case"cosmos":this.rpcProviders[t]=new dist_index_es_H({client:this.client,namespace:this.namespaces[t],events:this.events});break;case"polkadot":break;case"cip34":this.rpcProviders[t]=new dist_index_es_$({client:this.client,namespace:this.namespaces[t],events:this.events})}})}registerEventListeners(){if(typeof this.client>"u")throw Error("Sign Client is not initialized");this.client.on("session_ping",t=>{this.events.emit("session_ping",t)}),this.client.on("session_event",t=>{let{params:e}=t,{event:s}=e;"accountsChanged"===s.name?this.events.emit("accountsChanged",s.data):"chainChanged"===s.name?this.onChainChanged(s.data,e.chainId):this.events.emit(s.name,s.data),this.events.emit("session_event",t)}),this.client.on("session_update",({topic:t,params:e})=>{var s;let{namespaces:n}=e,v=null==(s=this.client)?void 0:s.session.get(t);this.session=dist_index_es_(index_es_u({},v),{namespaces:n}),this.onSessionUpdate(),this.events.emit("session_update",{topic:t,params:e})}),this.client.on("session_delete",async t=>{await this.cleanup(),this.events.emit("session_delete",t)})}getProvider(t){if(!this.rpcProviders[t])throw Error(`Provider not found: ${t}`);return this.rpcProviders[t]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(t=>{var e;this.getProvider(t).updateNamespace(null==(e=this.session)?void 0:e.namespaces[t])})}setNamespaces(t){if(!t||!Object.keys(t).length)throw Error("Namespaces must be not empty");this.client.core.storage.setItem(`${dist_index_es_p}/namespaces`,t),this.namespaces=t}validateChain(t){let[e,s]=t?.split(":")||["",""];if(e&&!Object.keys(this.namespaces).includes(e))throw Error(`Namespace '${e}' is not configured. Please call connect() first with namespace config.`);return e&&s?[e,s]:function(i){var t;let e=null==(t=i[Object.keys(i)[0]])?void 0:t.chains[0];return[e.split(":")[0],e.split(":")[1]]}(this.namespaces)}async requestAccounts(){let[t]=this.validateChain();return await this.getProvider(t).requestAccounts()}onChainChanged(t,e){let[s,n]=this.validateChain(e);this.getProvider(s).setDefaultChain(n),this.events.emit("chainChanged",t)}onConnect(){this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0})}}let universal_provider_dist_index_es_U=o},3382:function(__unused_webpack_module,exports){"use strict";function getFromWindow(name){let res;return"undefined"!=typeof window&&void 0!==window[name]&&(res=window[name]),res}function getFromWindowOrThrow(name){let res=getFromWindow(name);if(!res)throw Error(`${name} is not defined in Window`);return res}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getLocalStorage=exports.getLocalStorageOrThrow=exports.getCrypto=exports.getCryptoOrThrow=exports.getLocation=exports.getLocationOrThrow=exports.getNavigator=exports.getNavigatorOrThrow=exports.getDocument=exports.getDocumentOrThrow=exports.getFromWindowOrThrow=exports.getFromWindow=void 0,exports.getFromWindow=getFromWindow,exports.getFromWindowOrThrow=getFromWindowOrThrow,exports.getDocumentOrThrow=function(){return getFromWindowOrThrow("document")},exports.getDocument=function(){return getFromWindow("document")},exports.getNavigatorOrThrow=function(){return getFromWindowOrThrow("navigator")},exports.getNavigator=function(){return getFromWindow("navigator")},exports.getLocationOrThrow=function(){return getFromWindowOrThrow("location")},exports.getLocation=function(){return getFromWindow("location")},exports.getCryptoOrThrow=function(){return getFromWindowOrThrow("crypto")},exports.getCrypto=function(){return getFromWindow("crypto")},exports.getLocalStorageOrThrow=function(){return getFromWindowOrThrow("localStorage")},exports.getLocalStorage=function(){return getFromWindow("localStorage")}},99982:function(__unused_webpack_module,exports,__webpack_require__){"use strict";__webpack_require__(3382)},94543:function(__unused_webpack_module,exports,__webpack_require__){"use strict";let strictUriEncode=__webpack_require__(70610),decodeComponent=__webpack_require__(44020),splitOnFirst=__webpack_require__(80500),filterObject=__webpack_require__(92806),isNullOrUndefined=value=>null==value,encodeFragmentIdentifier=Symbol("encodeFragmentIdentifier");function validateArrayFormatSeparator(value){if("string"!=typeof value||1!==value.length)throw TypeError("arrayFormatSeparator must be single character string")}function encode(value,options){return options.encode?options.strict?strictUriEncode(value):encodeURIComponent(value):value}function decode(value,options){return options.decode?decodeComponent(value):value}function removeHash(input){let hashStart=input.indexOf("#");return -1!==hashStart&&(input=input.slice(0,hashStart)),input}function extract(input){input=removeHash(input);let queryStart=input.indexOf("?");return -1===queryStart?"":input.slice(queryStart+1)}function parseValue(value,options){return options.parseNumbers&&!Number.isNaN(Number(value))&&"string"==typeof value&&""!==value.trim()?value=Number(value):options.parseBooleans&&null!==value&&("true"===value.toLowerCase()||"false"===value.toLowerCase())&&(value="true"===value.toLowerCase()),value}function parse(query,options){validateArrayFormatSeparator((options=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},options)).arrayFormatSeparator);let formatter=function(options){let result;switch(options.arrayFormat){case"index":return(key,value,accumulator)=>{if(result=/\[(\d*)\]$/.exec(key),key=key.replace(/\[\d*\]$/,""),!result){accumulator[key]=value;return}void 0===accumulator[key]&&(accumulator[key]={}),accumulator[key][result[1]]=value};case"bracket":return(key,value,accumulator)=>{if(result=/(\[\])$/.exec(key),key=key.replace(/\[\]$/,""),!result){accumulator[key]=value;return}if(void 0===accumulator[key]){accumulator[key]=[value];return}accumulator[key]=[].concat(accumulator[key],value)};case"colon-list-separator":return(key,value,accumulator)=>{if(result=/(:list)$/.exec(key),key=key.replace(/:list$/,""),!result){accumulator[key]=value;return}if(void 0===accumulator[key]){accumulator[key]=[value];return}accumulator[key]=[].concat(accumulator[key],value)};case"comma":case"separator":return(key,value,accumulator)=>{let isArray="string"==typeof value&&value.includes(options.arrayFormatSeparator),isEncodedArray="string"==typeof value&&!isArray&&decode(value,options).includes(options.arrayFormatSeparator);value=isEncodedArray?decode(value,options):value;let newValue=isArray||isEncodedArray?value.split(options.arrayFormatSeparator).map(item=>decode(item,options)):null===value?value:decode(value,options);accumulator[key]=newValue};case"bracket-separator":return(key,value,accumulator)=>{let isArray=/(\[\])$/.test(key);if(key=key.replace(/\[\]$/,""),!isArray){accumulator[key]=value?decode(value,options):value;return}let arrayValue=null===value?[]:value.split(options.arrayFormatSeparator).map(item=>decode(item,options));if(void 0===accumulator[key]){accumulator[key]=arrayValue;return}accumulator[key]=[].concat(accumulator[key],arrayValue)};default:return(key,value,accumulator)=>{if(void 0===accumulator[key]){accumulator[key]=value;return}accumulator[key]=[].concat(accumulator[key],value)}}}(options),ret=Object.create(null);if("string"!=typeof query||!(query=query.trim().replace(/^[?#&]/,"")))return ret;for(let param of query.split("&")){if(""===param)continue;let[key,value]=splitOnFirst(options.decode?param.replace(/\+/g," "):param,"=");value=void 0===value?null:["comma","separator","bracket-separator"].includes(options.arrayFormat)?value:decode(value,options),formatter(decode(key,options),value,ret)}for(let key1 of Object.keys(ret)){let value1=ret[key1];if("object"==typeof value1&&null!==value1)for(let k of Object.keys(value1))value1[k]=parseValue(value1[k],options);else ret[key1]=parseValue(value1,options)}return!1===options.sort?ret:(!0===options.sort?Object.keys(ret).sort():Object.keys(ret).sort(options.sort)).reduce((result,key)=>{let value=ret[key];return Boolean(value)&&"object"==typeof value&&!Array.isArray(value)?result[key]=function keysSorter(input){return Array.isArray(input)?input.sort():"object"==typeof input?keysSorter(Object.keys(input)).sort((a,b)=>Number(a)-Number(b)).map(key=>input[key]):input}(value):result[key]=value,result},Object.create(null))}exports.extract=extract,exports.parse=parse,exports.stringify=(object,options)=>{if(!object)return"";validateArrayFormatSeparator((options=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},options)).arrayFormatSeparator);let shouldFilter=key=>options.skipNull&&isNullOrUndefined(object[key])||options.skipEmptyString&&""===object[key],formatter=function(options){switch(options.arrayFormat){case"index":return key=>(result,value)=>{let index=result.length;return void 0===value||options.skipNull&&null===value||options.skipEmptyString&&""===value?result:null===value?[...result,[encode(key,options),"[",index,"]"].join("")]:[...result,[encode(key,options),"[",encode(index,options),"]=",encode(value,options)].join("")]};case"bracket":return key=>(result,value)=>void 0===value||options.skipNull&&null===value||options.skipEmptyString&&""===value?result:null===value?[...result,[encode(key,options),"[]"].join("")]:[...result,[encode(key,options),"[]=",encode(value,options)].join("")];case"colon-list-separator":return key=>(result,value)=>void 0===value||options.skipNull&&null===value||options.skipEmptyString&&""===value?result:null===value?[...result,[encode(key,options),":list="].join("")]:[...result,[encode(key,options),":list=",encode(value,options)].join("")];case"comma":case"separator":case"bracket-separator":{let keyValueSep="bracket-separator"===options.arrayFormat?"[]=":"=";return key=>(result,value)=>void 0===value||options.skipNull&&null===value||options.skipEmptyString&&""===value?result:(value=null===value?"":value,0===result.length)?[[encode(key,options),keyValueSep,encode(value,options)].join("")]:[[result,encode(value,options)].join(options.arrayFormatSeparator)]}default:return key=>(result,value)=>void 0===value||options.skipNull&&null===value||options.skipEmptyString&&""===value?result:null===value?[...result,encode(key,options)]:[...result,[encode(key,options),"=",encode(value,options)].join("")]}}(options),objectCopy={};for(let key of Object.keys(object))shouldFilter(key)||(objectCopy[key]=object[key]);let keys=Object.keys(objectCopy);return!1!==options.sort&&keys.sort(options.sort),keys.map(key=>{let value=object[key];return void 0===value?"":null===value?encode(key,options):Array.isArray(value)?0===value.length&&"bracket-separator"===options.arrayFormat?encode(key,options)+"[]":value.reduce(formatter(key),[]).join("&"):encode(key,options)+"="+encode(value,options)}).filter(x=>x.length>0).join("&")},exports.parseUrl=(url,options)=>{options=Object.assign({decode:!0},options);let[url_,hash]=splitOnFirst(url,"#");return Object.assign({url:url_.split("?")[0]||"",query:parse(extract(url),options)},options&&options.parseFragmentIdentifier&&hash?{fragmentIdentifier:decode(hash,options)}:{})},exports.stringifyUrl=(object,options)=>{options=Object.assign({encode:!0,strict:!0,[encodeFragmentIdentifier]:!0},options);let url=removeHash(object.url).split("?")[0]||"",queryFromUrl=exports.extract(object.url),parsedQueryFromUrl=exports.parse(queryFromUrl,{sort:!1}),query=Object.assign(parsedQueryFromUrl,object.query),queryString=exports.stringify(query,options);queryString&&(queryString=`?${queryString}`);let hash=function(url){let hash="",hashStart=url.indexOf("#");return -1!==hashStart&&(hash=url.slice(hashStart)),hash}(object.url);return object.fragmentIdentifier&&(hash=`#${options[encodeFragmentIdentifier]?encode(object.fragmentIdentifier,options):object.fragmentIdentifier}`),`${url}${queryString}${hash}`},exports.pick=(input,filter,options)=>{options=Object.assign({parseFragmentIdentifier:!0,[encodeFragmentIdentifier]:!1},options);let{url,query,fragmentIdentifier}=exports.parseUrl(input,options);return exports.stringifyUrl({url,query:filterObject(query,filter),fragmentIdentifier},options)},exports.exclude=(input,filter,options)=>{let exclusionFilter=Array.isArray(filter)?key=>!filter.includes(key):(key,value)=>!filter(key,value);return exports.pick(input,exclusionFilter,options)}},92806:function(module){"use strict";module.exports=function(obj,predicate){for(var ret={},keys=Object.keys(obj),isArr=Array.isArray(predicate),i=0;i<keys.length;i++){var key=keys[i],val=obj[key];(isArr?-1!==predicate.indexOf(key):predicate(key,val,obj))&&(ret[key]=val)}return ret}},72307:function(module,exports,__webpack_require__){module=__webpack_require__.nmd(module);var uid,func,transform,HASH_UNDEFINED="__lodash_hash_undefined__",argsTag="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",promiseTag="[object Promise]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",weakMapTag="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",reIsHostCtor=/^\[object .+?Constructor\]$/,reIsUint=/^(?:0|[1-9]\d*)$/,typedArrayTags={};typedArrayTags["[object Float32Array]"]=typedArrayTags["[object Float64Array]"]=typedArrayTags["[object Int8Array]"]=typedArrayTags["[object Int16Array]"]=typedArrayTags["[object Int32Array]"]=typedArrayTags["[object Uint8Array]"]=typedArrayTags["[object Uint8ClampedArray]"]=typedArrayTags["[object Uint16Array]"]=typedArrayTags["[object Uint32Array]"]=!0,typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=!1;var freeGlobal="object"==typeof __webpack_require__.g&&__webpack_require__.g&&__webpack_require__.g.Object===Object&&__webpack_require__.g,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),freeExports=exports&&!exports.nodeType&&exports,freeModule=freeExports&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,freeProcess=moduleExports&&freeGlobal.process,nodeUtil=function(){try{return freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch(e){}}(),nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray;function mapToArray(map){var index=-1,result=Array(map.size);return map.forEach(function(value,key){result[++index]=[key,value]}),result}function setToArray(set){var index=-1,result=Array(set.size);return set.forEach(function(value){result[++index]=value}),result}var arrayProto=Array.prototype,funcProto=Function.prototype,objectProto=Object.prototype,coreJsData=root["__core-js_shared__"],funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,maskSrcKey=(uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||""))?"Symbol(src)_1."+uid:"",nativeObjectToString=objectProto.toString,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Buffer=moduleExports?root.Buffer:void 0,Symbol1=root.Symbol,Uint8Array1=root.Uint8Array,propertyIsEnumerable=objectProto.propertyIsEnumerable,splice=arrayProto.splice,symToStringTag=Symbol1?Symbol1.toStringTag:void 0,nativeGetSymbols=Object.getOwnPropertySymbols,nativeIsBuffer=Buffer?Buffer.isBuffer:void 0,nativeKeys=(func=Object.keys,transform=Object,function(arg){return func(transform(arg))}),DataView1=getNative(root,"DataView"),Map1=getNative(root,"Map"),Promise1=getNative(root,"Promise"),Set1=getNative(root,"Set"),WeakMap=getNative(root,"WeakMap"),nativeCreate=getNative(Object,"create"),dataViewCtorString=toSource(DataView1),mapCtorString=toSource(Map1),promiseCtorString=toSource(Promise1),setCtorString=toSource(Set1),weakMapCtorString=toSource(WeakMap),symbolProto=Symbol1?Symbol1.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function Hash(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function ListCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function MapCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function SetCache(values){var index=-1,length=null==values?0:values.length;for(this.__data__=new MapCache;++index<length;)this.add(values[index])}function Stack(entries){var data=this.__data__=new ListCache(entries);this.size=data.size}function assocIndexOf(array,key){for(var length=array.length;length--;)if(eq(array[length][0],key))return length;return -1}function baseGetTag(value){return null==value?void 0===value?"[object Undefined]":"[object Null]":symToStringTag&&symToStringTag in Object(value)?function(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{value[symToStringTag]=void 0;var unmasked=!0}catch(e){}var result=nativeObjectToString.call(value);return unmasked&&(isOwn?value[symToStringTag]=tag:delete value[symToStringTag]),result}(value):nativeObjectToString.call(value)}function baseIsArguments(value){return isObjectLike(value)&&baseGetTag(value)==argsTag}function equalArrays(array,other,bitmask,customizer,equalFunc,stack){var isPartial=1&bitmask,arrLength=array.length,othLength=other.length;if(arrLength!=othLength&&!(isPartial&&othLength>arrLength))return!1;var stacked=stack.get(array);if(stacked&&stack.get(other))return stacked==other;var index=-1,result=!0,seen=2&bitmask?new SetCache:void 0;for(stack.set(array,other),stack.set(other,array);++index<arrLength;){var arrValue=array[index],othValue=other[index];if(customizer)var compared=isPartial?customizer(othValue,arrValue,index,other,array,stack):customizer(arrValue,othValue,index,array,other,stack);if(void 0!==compared){if(compared)continue;result=!1;break}if(seen){if(!function(array,predicate){for(var index=-1,length=null==array?0:array.length;++index<length;)if(predicate(array[index],index,array))return!0;return!1}(other,function(othValue,othIndex){if(!seen.has(othIndex)&&(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack)))return seen.push(othIndex)})){result=!1;break}}else if(!(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack))){result=!1;break}}return stack.delete(array),stack.delete(other),result}function getAllKeys(object){var result;return result=function(object){return null!=object&&isLength(object.length)&&!isFunction(object)?function(value,inherited){var value1,length,isArr=isArray(value),isArg=!isArr&&isArguments(value),isBuff=!isArr&&!isArg&&isBuffer(value),isType=!isArr&&!isArg&&!isBuff&&isTypedArray(value),skipIndexes=isArr||isArg||isBuff||isType,result=skipIndexes?function(n,iteratee){for(var index=-1,result=Array(n);++index<n;)result[index]=iteratee(index);return result}(value.length,String):[],length1=result.length;for(var key in value)hasOwnProperty.call(value,key)&&!(skipIndexes&&("length"==key||isBuff&&("offset"==key||"parent"==key)||isType&&("buffer"==key||"byteLength"==key||"byteOffset"==key)||(value1=key,(length=null==(length=length1)?9007199254740991:length)&&("number"==typeof value1||reIsUint.test(value1))&&value1>-1&&value1%1==0&&value1<length)))&&result.push(key);return result}(object):function(object){if(proto="function"==typeof(Ctor=object&&object.constructor)&&Ctor.prototype||objectProto,object!==proto)return nativeKeys(object);var Ctor,proto,result=[];for(var key in Object(object))hasOwnProperty.call(object,key)&&"constructor"!=key&&result.push(key);return result}(object)}(object),isArray(object)?result:function(array,values){for(var index=-1,length=values.length,offset=array.length;++index<length;)array[offset+index]=values[index];return array}(result,getSymbols(object))}function getMapData(map,key){var type,data=map.__data__;return("string"==(type=typeof key)||"number"==type||"symbol"==type||"boolean"==type?"__proto__"!==key:null===key)?data["string"==typeof key?"string":"hash"]:data.map}function getNative(object,key){var value=null==object?void 0:object[key];return!(!isObject(value)||maskSrcKey&&maskSrcKey in value)&&(isFunction(value)?reIsNative:reIsHostCtor).test(toSource(value))?value:void 0}Hash.prototype.clear=function(){this.__data__=nativeCreate?nativeCreate(null):{},this.size=0},Hash.prototype.delete=function(key){var result=this.has(key)&&delete this.__data__[key];return this.size-=result?1:0,result},Hash.prototype.get=function(key){var data=this.__data__;if(nativeCreate){var result=data[key];return result===HASH_UNDEFINED?void 0:result}return hasOwnProperty.call(data,key)?data[key]:void 0},Hash.prototype.has=function(key){var data=this.__data__;return nativeCreate?void 0!==data[key]:hasOwnProperty.call(data,key)},Hash.prototype.set=function(key,value){var data=this.__data__;return this.size+=this.has(key)?0:1,data[key]=nativeCreate&&void 0===value?HASH_UNDEFINED:value,this},ListCache.prototype.clear=function(){this.__data__=[],this.size=0},ListCache.prototype.delete=function(key){var data=this.__data__,index=assocIndexOf(data,key);return!(index<0)&&(index==data.length-1?data.pop():splice.call(data,index,1),--this.size,!0)},ListCache.prototype.get=function(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?void 0:data[index][1]},ListCache.prototype.has=function(key){return assocIndexOf(this.__data__,key)>-1},ListCache.prototype.set=function(key,value){var data=this.__data__,index=assocIndexOf(data,key);return index<0?(++this.size,data.push([key,value])):data[index][1]=value,this},MapCache.prototype.clear=function(){this.size=0,this.__data__={hash:new Hash,map:new(Map1||ListCache),string:new Hash}},MapCache.prototype.delete=function(key){var result=getMapData(this,key).delete(key);return this.size-=result?1:0,result},MapCache.prototype.get=function(key){return getMapData(this,key).get(key)},MapCache.prototype.has=function(key){return getMapData(this,key).has(key)},MapCache.prototype.set=function(key,value){var data=getMapData(this,key),size=data.size;return data.set(key,value),this.size+=data.size==size?0:1,this},SetCache.prototype.add=SetCache.prototype.push=function(value){return this.__data__.set(value,HASH_UNDEFINED),this},SetCache.prototype.has=function(value){return this.__data__.has(value)},Stack.prototype.clear=function(){this.__data__=new ListCache,this.size=0},Stack.prototype.delete=function(key){var data=this.__data__,result=data.delete(key);return this.size=data.size,result},Stack.prototype.get=function(key){return this.__data__.get(key)},Stack.prototype.has=function(key){return this.__data__.has(key)},Stack.prototype.set=function(key,value){var data=this.__data__;if(data instanceof ListCache){var pairs=data.__data__;if(!Map1||pairs.length<199)return pairs.push([key,value]),this.size=++data.size,this;data=this.__data__=new MapCache(pairs)}return data.set(key,value),this.size=data.size,this};var getSymbols=nativeGetSymbols?function(object){return null==object?[]:function(array,predicate){for(var index=-1,length=null==array?0:array.length,resIndex=0,result=[];++index<length;){var value=array[index];predicate(value,index,array)&&(result[resIndex++]=value)}return result}(nativeGetSymbols(object=Object(object)),function(symbol){return propertyIsEnumerable.call(object,symbol)})}:function(){return[]},getTag=baseGetTag;function toSource(func){if(null!=func){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e1){}}return""}function eq(value,other){return value===other||value!=value&&other!=other}(DataView1&&getTag(new DataView1(new ArrayBuffer(1)))!=dataViewTag||Map1&&getTag(new Map1)!=mapTag||Promise1&&getTag(Promise1.resolve())!=promiseTag||Set1&&getTag(new Set1)!=setTag||WeakMap&&getTag(new WeakMap)!=weakMapTag)&&(getTag=function(value){var result=baseGetTag(value),Ctor=result==objectTag?value.constructor:void 0,ctorString=Ctor?toSource(Ctor):"";if(ctorString)switch(ctorString){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return promiseTag;case setCtorString:return setTag;case weakMapCtorString:return weakMapTag}return result});var isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(value){return isObjectLike(value)&&hasOwnProperty.call(value,"callee")&&!propertyIsEnumerable.call(value,"callee")},isArray=Array.isArray,isBuffer=nativeIsBuffer||function(){return!1};function isFunction(value){if(!isObject(value))return!1;var tag=baseGetTag(value);return tag==funcTag||"[object GeneratorFunction]"==tag||"[object AsyncFunction]"==tag||"[object Proxy]"==tag}function isLength(value){return"number"==typeof value&&value>-1&&value%1==0&&value<=9007199254740991}function isObject(value){var type=typeof value;return null!=value&&("object"==type||"function"==type)}function isObjectLike(value){return null!=value&&"object"==typeof value}var isTypedArray=nodeIsTypedArray?function(value){return nodeIsTypedArray(value)}:function(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[baseGetTag(value)]};module.exports=function(value,other){return function baseIsEqual(value,other,bitmask,customizer,stack){return value===other||(null!=value&&null!=other&&(isObjectLike(value)||isObjectLike(other))?function(object,other,bitmask,customizer,equalFunc,stack){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=objIsArr?arrayTag:getTag(object),othTag=othIsArr?arrayTag:getTag(other);objTag=objTag==argsTag?objectTag:objTag,othTag=othTag==argsTag?objectTag:othTag;var objIsObj=objTag==objectTag,othIsObj=othTag==objectTag,isSameTag=objTag==othTag;if(isSameTag&&isBuffer(object)){if(!isBuffer(other))return!1;objIsArr=!0,objIsObj=!1}if(isSameTag&&!objIsObj)return stack||(stack=new Stack),objIsArr||isTypedArray(object)?equalArrays(object,other,bitmask,customizer,equalFunc,stack):function(object,other,tag,bitmask,customizer,equalFunc,stack){switch(tag){case dataViewTag:if(object.byteLength!=other.byteLength||object.byteOffset!=other.byteOffset)break;object=object.buffer,other=other.buffer;case arrayBufferTag:if(object.byteLength!=other.byteLength||!equalFunc(new Uint8Array1(object),new Uint8Array1(other)))break;return!0;case boolTag:case dateTag:case numberTag:return eq(+object,+other);case errorTag:return object.name==other.name&&object.message==other.message;case regexpTag:case stringTag:return object==other+"";case mapTag:var convert=mapToArray;case setTag:var isPartial=1&bitmask;if(convert||(convert=setToArray),object.size!=other.size&&!isPartial)break;var stacked=stack.get(object);if(stacked)return stacked==other;bitmask|=2,stack.set(object,other);var result=equalArrays(convert(object),convert(other),bitmask,customizer,equalFunc,stack);return stack.delete(object),result;case"[object Symbol]":if(symbolValueOf)return symbolValueOf.call(object)==symbolValueOf.call(other)}return!1}(object,other,objTag,bitmask,customizer,equalFunc,stack);if(!(1&bitmask)){var objIsWrapped=objIsObj&&hasOwnProperty.call(object,"__wrapped__"),othIsWrapped=othIsObj&&hasOwnProperty.call(other,"__wrapped__");if(objIsWrapped||othIsWrapped){var objUnwrapped=objIsWrapped?object.value():object,othUnwrapped=othIsWrapped?other.value():other;return stack||(stack=new Stack),equalFunc(objUnwrapped,othUnwrapped,bitmask,customizer,stack)}}return!!isSameTag&&(stack||(stack=new Stack),function(object,other,bitmask,customizer,equalFunc,stack){var isPartial=1&bitmask,objProps=getAllKeys(object),objLength=objProps.length;if(objLength!=getAllKeys(other).length&&!isPartial)return!1;for(var index=objLength;index--;){var key=objProps[index];if(!(isPartial?key in other:hasOwnProperty.call(other,key)))return!1}var stacked=stack.get(object);if(stacked&&stack.get(other))return stacked==other;var result=!0;stack.set(object,other),stack.set(other,object);for(var skipCtor=isPartial;++index<objLength;){var objValue=object[key=objProps[index]],othValue=other[key];if(customizer)var compared=isPartial?customizer(othValue,objValue,key,other,object,stack):customizer(objValue,othValue,key,object,other,stack);if(!(void 0===compared?objValue===othValue||equalFunc(objValue,othValue,bitmask,customizer,stack):compared)){result=!1;break}skipCtor||(skipCtor="constructor"==key)}if(result&&!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;objCtor!=othCtor&&"constructor"in object&&"constructor"in other&&!("function"==typeof objCtor&&objCtor instanceof objCtor&&"function"==typeof othCtor&&othCtor instanceof othCtor)&&(result=!1)}return stack.delete(object),stack.delete(other),result}(object,other,bitmask,customizer,equalFunc,stack))}(value,other,bitmask,customizer,baseIsEqual,stack):value!=value&&other!=other)}(value,other)}},85346:function(module){"use strict";function tryStringify(o){try{return JSON.stringify(o)}catch(e){return'"[Circular]"'}}module.exports=function(f,args,opts){var ss=opts&&opts.stringify||tryStringify;if("object"==typeof f&&null!==f){var len=args.length+1;if(1===len)return f;var objects=Array(len);objects[0]=ss(f);for(var index=1;index<len;index++)objects[index]=ss(args[index]);return objects.join(" ")}if("string"!=typeof f)return f;var argLen=args.length;if(0===argLen)return f;for(var str="",a=0,lastPos=-1,flen=f&&f.length||0,i=0;i<flen;){if(37===f.charCodeAt(i)&&i+1<flen){switch(lastPos=lastPos>-1?lastPos:0,f.charCodeAt(i+1)){case 100:case 102:if(a>=argLen||null==args[a])break;lastPos<i&&(str+=f.slice(lastPos,i)),str+=Number(args[a]),lastPos=i+2,i++;break;case 105:if(a>=argLen||null==args[a])break;lastPos<i&&(str+=f.slice(lastPos,i)),str+=Math.floor(Number(args[a])),lastPos=i+2,i++;break;case 79:case 111:case 106:if(a>=argLen||void 0===args[a])break;lastPos<i&&(str+=f.slice(lastPos,i));var type=typeof args[a];if("string"===type){str+="'"+args[a]+"'",lastPos=i+2,i++;break}if("function"===type){str+=args[a].name||"<anonymous>",lastPos=i+2,i++;break}str+=ss(args[a]),lastPos=i+2,i++;break;case 115:if(a>=argLen)break;lastPos<i&&(str+=f.slice(lastPos,i)),str+=String(args[a]),lastPos=i+2,i++;break;case 37:lastPos<i&&(str+=f.slice(lastPos,i)),str+="%",lastPos=i+2,i++,a--}++a}++i}return -1===lastPos?f:(lastPos<flen&&(str+=f.slice(lastPos)),str)}},63954:function(__unused_webpack_module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.safeJsonParse=function(value){if("string"!=typeof value)throw Error(`Cannot safe json parse value of type ${typeof value}`);try{return JSON.parse(value)}catch(_a){return value}},exports.safeJsonStringify=function(value){return"string"==typeof value?value:JSON.stringify(value,(key,value)=>void 0===value?null:value)}},36559:function(module,__unused_webpack_exports,__webpack_require__){"use strict";let format=__webpack_require__(85346);module.exports=pino;let _console=function(){function defd(o){return void 0!==o&&o}try{if("undefined"!=typeof globalThis)return globalThis;return Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch(e){return defd(self)||defd(window)||defd(this)||{}}}().console||{};function pino(opts){var opts1;(opts=opts||{}).browser=opts.browser||{};let transmit=opts.browser.transmit;if(transmit&&"function"!=typeof transmit.send)throw Error("pino: transmit option must have a send function");let proto=opts.browser.write||_console;opts.browser.write&&(opts.browser.asObject=!0);let serializers=opts.serializers||{},serialize=function(serialize,serializers){if(Array.isArray(serialize)){let hasToFilter=serialize.filter(function(k){return"!stdSerializers.err"!==k});return hasToFilter}return!0===serialize&&Object.keys(serializers)}(opts.browser.serialize,serializers),stdErrSerialize=opts.browser.serialize;Array.isArray(opts.browser.serialize)&&opts.browser.serialize.indexOf("!stdSerializers.err")>-1&&(stdErrSerialize=!1),"function"==typeof proto&&(proto.error=proto.fatal=proto.warn=proto.info=proto.debug=proto.trace=proto),!1===opts.enabled&&(opts.level="silent");let level=opts.level||"info",logger=Object.create(proto);logger.log||(logger.log=noop),Object.defineProperty(logger,"levelVal",{get:function(){return"silent"===this.level?1/0:this.levels.values[this.level]}}),Object.defineProperty(logger,"level",{get:function(){return this._level},set:function(level){if("silent"!==level&&!this.levels.values[level])throw Error("unknown level "+level);this._level=level,set(setOpts,logger,"error","log"),set(setOpts,logger,"fatal","error"),set(setOpts,logger,"warn","error"),set(setOpts,logger,"info","log"),set(setOpts,logger,"debug","log"),set(setOpts,logger,"trace","log")}});let setOpts={transmit,serialize,asObject:opts.browser.asObject,levels:["error","fatal","warn","info","debug","trace"],timestamp:"function"==typeof(opts1=opts).timestamp?opts1.timestamp:!1===opts1.timestamp?nullTime:epochTime};return logger.levels=pino.levels,logger.level=level,logger.setMaxListeners=logger.getMaxListeners=logger.emit=logger.addListener=logger.on=logger.prependListener=logger.once=logger.prependOnceListener=logger.removeListener=logger.removeAllListeners=logger.listeners=logger.listenerCount=logger.eventNames=logger.write=logger.flush=noop,logger.serializers=serializers,logger._serialize=serialize,logger._stdErrSerialize=stdErrSerialize,logger.child=function(bindings,childOptions){if(!bindings)throw Error("missing bindings for child Pino");childOptions=childOptions||{},serialize&&bindings.serializers&&(childOptions.serializers=bindings.serializers);let childOptionsSerializers=childOptions.serializers;if(serialize&&childOptionsSerializers){var childSerializers=Object.assign({},serializers,childOptionsSerializers),childSerialize=!0===opts.browser.serialize?Object.keys(childSerializers):serialize;delete bindings.serializers,applySerializers([bindings],childSerialize,childSerializers,this._stdErrSerialize)}function Child(parent){this._childLevel=(0|parent._childLevel)+1,this.error=bind(parent,bindings,"error"),this.fatal=bind(parent,bindings,"fatal"),this.warn=bind(parent,bindings,"warn"),this.info=bind(parent,bindings,"info"),this.debug=bind(parent,bindings,"debug"),this.trace=bind(parent,bindings,"trace"),childSerializers&&(this.serializers=childSerializers,this._serialize=childSerialize),transmit&&(this._logEvent=createLogEventShape([].concat(parent._logEvent.bindings,bindings)))}return Child.prototype=this,new Child(this)},transmit&&(logger._logEvent=createLogEventShape()),logger}function set(opts,logger,level,fallback){let proto=Object.getPrototypeOf(logger);logger[level]=logger.levelVal>logger.levels.values[level]?noop:proto[level]?proto[level]:_console[level]||_console[fallback]||noop,function(opts,logger,level){if(opts.transmit||logger[level]!==noop){var write;logger[level]=(write=logger[level],function(){let ts=opts.timestamp(),args=Array(arguments.length),proto=Object.getPrototypeOf&&Object.getPrototypeOf(this)===_console?_console:this;for(var i=0;i<args.length;i++)args[i]=arguments[i];if(opts.serialize&&!opts.asObject&&applySerializers(args,this._serialize,this.serializers,this._stdErrSerialize),opts.asObject?write.call(proto,function(logger,level,args,ts){logger._serialize&&applySerializers(args,logger._serialize,logger.serializers,logger._stdErrSerialize);let argsCloned=args.slice(),msg=argsCloned[0],o={};ts&&(o.time=ts),o.level=pino.levels.values[level];let lvl=(0|logger._childLevel)+1;if(lvl<1&&(lvl=1),null!==msg&&"object"==typeof msg){for(;lvl--&&"object"==typeof argsCloned[0];)Object.assign(o,argsCloned.shift());msg=argsCloned.length?format(argsCloned.shift(),argsCloned):void 0}else"string"==typeof msg&&(msg=format(argsCloned.shift(),argsCloned));return void 0!==msg&&(o.msg=msg),o}(this,level,args,ts)):write.apply(proto,args),opts.transmit){let transmitLevel=opts.transmit.level||logger.level,transmitValue=pino.levels.values[transmitLevel],methodValue=pino.levels.values[level];if(methodValue<transmitValue)return;(function(logger,opts,args){let send=opts.send,ts=opts.ts,methodLevel=opts.methodLevel,methodValue=opts.methodValue,val=opts.val,bindings=logger._logEvent.bindings;applySerializers(args,logger._serialize||Object.keys(logger.serializers),logger.serializers,void 0===logger._stdErrSerialize||logger._stdErrSerialize),logger._logEvent.ts=ts,logger._logEvent.messages=args.filter(function(arg){return -1===bindings.indexOf(arg)}),logger._logEvent.level.label=methodLevel,logger._logEvent.level.value=methodValue,send(methodLevel,logger._logEvent,val),logger._logEvent=createLogEventShape(bindings)})(this,{ts,methodLevel:level,methodValue,transmitLevel,transmitValue:pino.levels.values[opts.transmit.level||logger.level],send:opts.transmit.send,val:logger.levelVal},args)}})}}(opts,logger,level)}function applySerializers(args,serialize,serializers,stdErrSerialize){for(let i in args)if(stdErrSerialize&&args[i]instanceof Error)args[i]=pino.stdSerializers.err(args[i]);else if("object"==typeof args[i]&&!Array.isArray(args[i]))for(let k in args[i])serialize&&serialize.indexOf(k)>-1&&k in serializers&&(args[i][k]=serializers[k](args[i][k]))}function bind(parent,bindings,level){return function(){let args=Array(1+arguments.length);args[0]=bindings;for(var i=1;i<args.length;i++)args[i]=arguments[i-1];return parent[level].apply(this,args)}}function createLogEventShape(bindings){return{ts:0,messages:[],bindings:bindings||[],level:{label:"",value:0}}}function mock(){return{}}function passthrough(a){return a}function noop(){}function nullTime(){return!1}function epochTime(){return Date.now()}pino.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},pino.stdSerializers={mapHttpRequest:mock,mapHttpResponse:mock,wrapRequestSerializer:passthrough,wrapResponseSerializer:passthrough,wrapErrorSerializer:passthrough,req:mock,res:mock,err:function(err){let obj={type:err.constructor.name,msg:err.message,stack:err.stack};for(let key in err)void 0===obj[key]&&(obj[key]=err[key]);return obj}},pino.stdTimeFunctions=Object.assign({},{nullTime,epochTime,unixTime:function(){return Math.round(Date.now()/1e3)},isoTime:function(){return new Date(Date.now()).toISOString()}})}}]);