(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[622],{634:function(__unused_webpack_module,__unused_webpack_exports,__webpack_require__){(window.__NEXT_P=window.__NEXT_P||[]).push(["/onramp",function(){return __webpack_require__(5122)}])},5122:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{OnRampPage:function(){return OnRampPage}});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5893),next_head__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(9008),next_head__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(next_head__WEBPACK_IMPORTED_MODULE_1__),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(7294),react_redux__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(9473),_components_01_atoms__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(2548),_constants_chainInfo__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(3453),_store_rampInfoSlice__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(7551),_utils__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(137),next_router__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(1163),process=__webpack_require__(3454);let OnRampPage=()=>{var ref,ref1,ref2;let originChain=(0,react_redux__WEBPACK_IMPORTED_MODULE_3__.v9)(state=>state.originTransactionInfo.chain),amountValue=(0,react_redux__WEBPACK_IMPORTED_MODULE_3__.v9)(state=>state.rampInfo.amount),rampChain=(0,react_redux__WEBPACK_IMPORTED_MODULE_3__.v9)(state=>state.rampInfo.chain),rampToken=(0,react_redux__WEBPACK_IMPORTED_MODULE_3__.v9)(state=>state.rampInfo.token),dispatch=(0,react_redux__WEBPACK_IMPORTED_MODULE_3__.I0)(),[processingFee,setProcessingFee]=(0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(0),[networkGas,setNetworkGas]=(0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(0),[showChainSelector,setShowChainSelector]=(0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(!1),[hideTransactionDetails,setHideTransactionDetails]=(0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(!1),[seconds,setSeconds]=(0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(null),[timerWasntSet,setTimerWasntSet]=(0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(!0),[isLoadingEstimates,setIsLoadingEstimates]=(0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(!1),router=(0,next_router__WEBPACK_IMPORTED_MODULE_8__.useRouter)(),validateOnRamp=async()=>{if(amountValue&&rampChain&&rampToken){let myHeaders=new Headers;myHeaders.append("Content-Type","application/json");let res=await fetch("".concat(process.env.NEXT_PUBLIC_BACKEND_URL,"/pix"),{method:"POST",headers:myHeaders,body:JSON.stringify({networkId:rampChain,token:rampToken,amount:amountValue})}),data=await res.json();data.qr_code_base64&&(router.push("/pix/".concat(data.qr_code_base64)),dispatch((0,_store_rampInfoSlice__WEBPACK_IMPORTED_MODULE_6__.JN)(data)))}};return(0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{amountValue&&timerWasntSet&&(setTimerWasntSet(!1),setSeconds(10))},[amountValue,timerWasntSet]),(0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{if(0===seconds&&(setSeconds(null),(0,_utils__WEBPACK_IMPORTED_MODULE_7__.$V)(rampChain,rampToken,amountValue).then(()=>{setIsLoadingEstimates(!0)}).finally(()=>{setIsLoadingEstimates(!1),setSeconds(10)})),!seconds)return;let intervalId=setInterval(()=>{setSeconds(seconds-1)},1e3);return()=>clearInterval(intervalId)},[seconds]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"max-w-md m-auto pb-10 min-h-[800px]",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(next_head__WEBPACK_IMPORTED_MODULE_1___default(),{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("title",{children:"StableBridge - Bridge tokens between blockchains"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("meta",{name:"description",content:"Bridge tokens between blockchains"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("link",{rel:"icon",href:"/favicon.svg"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_01_atoms__WEBPACK_IMPORTED_MODULE_4__.Jb,{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("main",{className:"relative bg-white px-4 py-6 rounded-[40px] shadow-custom",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"w-full inline-flex text-center bg-cream rounded-3xl py-1.5 px-2 border-[1px]",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"flex-1 bg-blue rounded-3xl text-white text-base py-1.5 select-none",children:"BUY"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"flex-1 py-1.5 select-none",children:"SELL"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"bg-cream border-[1px] rounded-3xl p-6 py-4 mt-4 mb-4",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"mb-2 text-sm font-medium",children:"Token"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"inline-flex items-center",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("img",{src:"/tokens/SBRL.svg",alt:"Stablebridge token icon",className:"mr-2 w-6"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"text-xl font-medium",children:rampToken})]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"relative",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("button",{onClick:()=>setShowChainSelector(!showChainSelector),className:"w-full bg-white border-[1px] rounded-3xl p-6 mt-4 mb-4 flex justify-between text-sm hover:bg-cream transition",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"text-gray-400",children:"Network"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{children:(null===(ref=(0,_constants_chainInfo__WEBPACK_IMPORTED_MODULE_5__.b)(rampChain))||void 0===ref?void 0:ref.label)?null===(ref1=(0,_constants_chainInfo__WEBPACK_IMPORTED_MODULE_5__.b)(rampChain))||void 0===ref1?void 0:ref1.label:"Select destiny network"})]}),showChainSelector&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_01_atoms__WEBPACK_IMPORTED_MODULE_4__.f0,{onSelection:()=>setShowChainSelector(!showChainSelector)})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"w-full flex flex-col relative border-[1px] rounded-3xl px-6 pb-4 pt-6",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("label",{htmlFor:"fromAmount",className:"mb-4 text-sm font-medium",children:"How Much"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"inline-flex",children:[amountValue?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"font-medium text-2xl",children:"R$\xa0"}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment,{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("input",{type:"number",name:"fromAmount",id:"fromAmount",placeholder:"R$ 0.00",className:"flex flex-1 font-medium text-2xl bg-transparent focus:outline-none",onChange:e=>dispatch((0,_store_rampInfoSlice__WEBPACK_IMPORTED_MODULE_6__.T1)(e.target.value))})]})]}),amountValue&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"rounded-3xl border-[1px] bg-gray-1 p-6 mt-4",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"border-b-[1px]",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"text-sm font-medium mb-4",children:"You will receive approximately"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"inline-flex items-center mb-6",children:[isLoadingEstimates?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_01_atoms__WEBPACK_IMPORTED_MODULE_4__.Od,{width:40,height:8}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("p",{className:"font-medium text-2xl",children:[rampToken," ",amountValue-networkGas-processingFee]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"text-slate-500 ml-2",children:null===(ref2=(0,_constants_chainInfo__WEBPACK_IMPORTED_MODULE_5__.b)(originChain))||void 0===ref2?void 0:ref2.nativeCurrency.symbol})]})]}),!hideTransactionDetails&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex justify-between mb-2 mt-6",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("p",{className:"text-sm text-slate-400",children:[rampToken," Price"]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("p",{className:"text-sm text-slate-400",children:["R$ ",(()=>{if("SBRL"===rampToken)return"1"})()]})]}),!!processingFee&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"text-sm text-slate-400",children:"Processing fee"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"text-sm text-slate-400",children:"R$ TODO"})]}),!!networkGas&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"text-sm text-slate-400",children:"Network Gas"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"text-sm text-slate-400",children:"R$ TODO"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex justify-between mb-2 mb-6",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"text-sm text-black",children:"Total"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("p",{className:"text-sm text-black",children:["R$ ",amountValue]})]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex justify-between border-t-[1px] pt-6",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("p",{className:"text-sm text-slate-400",children:["Valid for ",seconds,"s"]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("button",{onClick:()=>setHideTransactionDetails(!hideTransactionDetails),className:"text-blue text-sm",children:[hideTransactionDetails?"Show":"Hide"," details"," "]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",{onClick:validateOnRamp,className:"w-full bg-black rounded-2xl text-white p-4 mt-8 hover:animate-pulse",children:"Submit order"})]})]})]})};__webpack_exports__.default=OnRampPage},137:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Ev:function(){return InjectedConnect},$V:function(){return getEstimatedGasFee},If:function(){return switchNetwork}});var lib_esm=__webpack_require__(6441),supportedChains=__webpack_require__(4781);let INFURA_KEY="eb629d0bc0144aa2abb2ff1593e12155";if(void 0===INFURA_KEY)throw Error("REACT_APP_INFURA_KEY must be a defined environment variable");let FALLBACK_URLS={[supportedChains.HL.ARBITRUM_ONE]:["https://arb1.arbitrum.io/rpc","https://arbitrum.public-rpc.com"],[supportedChains.HL.GOERLI]:["https://rpc.goerli.mudit.blog/","https://rpc.ankr.com/eth_goerli"],[supportedChains.HL.FANTOM]:["https://rpc.ftm.tools"],[supportedChains.HL.POLYGON]:["https://polygon-rpc.com/","https://rpc-mainnet.matic.network","https://matic-mainnet.chainstacklabs.com","https://rpc-mainnet.maticvigil.com","https://rpc-mainnet.matic.quiknode.pro","https://matic-mainnet-full-rpc.bwarelabs.com"],[supportedChains.HL.POLYGON_MUMBAI]:["https://matic-mumbai.chainstacklabs.com","https://rpc-mumbai.maticvigil.com","https://matic-testnet-archive-rpc.bwarelabs.com"]},RPC_URLS={[supportedChains.HL.ARBITRUM_ONE]:[...FALLBACK_URLS[supportedChains.HL.ARBITRUM_ONE]],[supportedChains.HL.FANTOM]:[...FALLBACK_URLS[supportedChains.HL.FANTOM]],[supportedChains.HL.GOERLI]:["https://goerli.infura.io/v3/".concat(INFURA_KEY),...FALLBACK_URLS[supportedChains.HL.GOERLI]],[supportedChains.HL.POLYGON]:["https://polygon-mainnet.infura.io/v3/".concat(INFURA_KEY),...FALLBACK_URLS[supportedChains.HL.POLYGON]],[supportedChains.HL.POLYGON_MUMBAI]:["https://polygon-mumbai.infura.io/v3/".concat(INFURA_KEY),...FALLBACK_URLS[supportedChains.HL.POLYGON_MUMBAI]]};var injected_connector_esm=__webpack_require__(9857);__webpack_require__(3453);var process=__webpack_require__(3454);let InjectedConnect=new injected_connector_esm._k({supportedChainIds:[1,3,137,80001]}),switchNetwork=async chainId=>{if(chainId){let chainIdInHex=lib_esm.$P(chainId);try{await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:chainIdInHex}]})}catch(e){if(4902===e.code)try{let chainInfo=supportedChains.df.find(chain=>chain.chainId===chainId);if(!chainInfo)return{error:"Not supported chain"};await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:chainIdInHex,chainName:chainInfo.nativeCurrency.name,rpcUrls:[getRpcUrl(chainId)]}]})}catch(error){return{error}}}}},getRpcUrl=chainId=>{switch(chainId){case supportedChains.HL.ARBITRUM_ONE:case supportedChains.HL.FANTOM:case supportedChains.HL.GOERLI:case supportedChains.HL.POLYGON:case supportedChains.HL.POLYGON_MUMBAI:return RPC_URLS[chainId][0];default:return FALLBACK_URLS[chainId][0]}},getEstimatedGasFee=async(chainId,tokenId,amount)=>{let myHeaders=new Headers;myHeaders.append("Content-Type","application/json");let res=await fetch("".concat(process.env.NEXT_PUBLIC_BACKEND_URL,"/estimated-gas"),{method:"POST",headers:myHeaders,body:JSON.stringify({networkId:chainId,token:tokenId,amount:amount})}),data=await res.json();return data}},1163:function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__(880)}},function(__webpack_require__){__webpack_require__.O(0,[996,857,548,774,888,179],function(){return __webpack_require__(__webpack_require__.s=634)}),_N_E=__webpack_require__.O()}]);