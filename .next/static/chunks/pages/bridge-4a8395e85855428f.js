(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[869],{5875:function(__unused_webpack_module,__unused_webpack_exports,__webpack_require__){(window.__NEXT_P=window.__NEXT_P||[]).push(["/bridge",function(){return __webpack_require__(1873)}])},1873:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{BridgePage:function(){return BridgePage},default:function(){return bridge}});var StepsPossibleStatus,StepsPossibleStatus1,jsx_runtime=__webpack_require__(5893),_01_atoms=__webpack_require__(2548),react=__webpack_require__(7294),es=__webpack_require__(9473),panelSelector=__webpack_require__(8628);(StepsPossibleStatus=StepsPossibleStatus1||(StepsPossibleStatus1={})).INACTIVE="INACTIVE",StepsPossibleStatus.ACTIVE="ACTIVE";let ProgressBar=param=>{let{stepsNumber,currentStep}=param,getStepStatus=index=>index+1<=currentStep?StepsPossibleStatus1.ACTIVE:StepsPossibleStatus1.INACTIVE;return(0,jsx_runtime.jsx)("ul",{className:"w-full grid gap-2 inline-grid px-2 ".concat(stepsNumber&&"grid-cols-4"),children:[...Array(stepsNumber)].map((e,index)=>(0,jsx_runtime.jsx)("li",{"aria-label":"Step ".concat(index+1," is ").concat(getStepStatus(index)),className:"h-2 border-[1px] rounded-2xl bg-gray-1",children:(0,jsx_runtime.jsx)("div",{className:"bg-blue w-full h-full rounded-2xl transition ".concat(getStepStatus(index)===StepsPossibleStatus1.ACTIVE?"opacity-100":"opacity-0")})},index))})};var supportedTokens=__webpack_require__(8821),destinyTransactionInfo=__webpack_require__(6253),originTransactionInfo=__webpack_require__(8080);let TokensList=param=>{let{isOrigin=!1}=param,originToken=(0,es.v9)(state=>state.originTransactionInfo.token),destinyToken=(0,es.v9)(state=>state.destinyTransactionInfo.token),dispatch=(0,es.I0)(),handleTokenSelection=tokenId=>{isOrigin?originToken!==tokenId&&dispatch((0,originTransactionInfo.Jp)(tokenId)):destinyToken!==tokenId&&dispatch((0,destinyTransactionInfo.uK)(tokenId))},isSelectedToken=tokenId=>isOrigin?originToken===tokenId:destinyToken===tokenId;return(0,jsx_runtime.jsx)("ul",{className:"mt-4",children:supportedTokens.i.map(token=>(0,jsx_runtime.jsx)("li",{className:"w-full mb-2",children:(0,jsx_runtime.jsxs)("button",{onClick:()=>handleTokenSelection(token.id),className:"w-full inline-flex justify-start items-center  p-4 border-[1px] rounded-2xl hover:bg-gray-1 transition ".concat(isSelectedToken(token.id)&&"bg-slate-100 hover:bg-slate-100"),children:[(0,jsx_runtime.jsx)("img",{src:token.logoUrl,alt:"".concat(token.label," icon"),className:"w-10 mr-4"}),(0,jsx_runtime.jsx)("p",{className:"text-xl font-medium p-0 m-0",children:token.label}),isSelectedToken(token.id)&&(0,jsx_runtime.jsx)("img",{src:"/icons/checked.png",alt:"Checked icon",className:"ml-auto"})]})},token.id))})};var supportedChains=__webpack_require__(4781),testnetsSlice=__webpack_require__(3749),utils=__webpack_require__(137);let ChainsList=param=>{let{isOrigin=!1}=param,originChain=(0,es.v9)(state=>state.originTransactionInfo.chain),destinyChain=(0,es.v9)(state=>state.destinyTransactionInfo.chain),showOnlyTestnets=(0,es.v9)(state=>state.testnets.showOnly),[chainsList,setChainsList]=(0,react.useState)([]),dispatch=(0,es.I0)(),handleChainSelection=async chainId=>{isOrigin?originChain!==chainId&&((0,utils.If)(chainId),dispatch((0,originTransactionInfo.vQ)(chainId))):destinyChain!==chainId&&dispatch((0,destinyTransactionInfo.Tj)(chainId))},handleTestnetsToggle=showOnlyTestnets=>{dispatch((0,testnetsSlice.an)(showOnlyTestnets))},isSelectedChain=chainId=>isOrigin?originChain===chainId:destinyChain===chainId,updateShownChains=()=>{setChainsList(showOnlyTestnets?supportedChains.df.filter(chain=>supportedChains.NH.includes(chain.chainId)):supportedChains.df.filter(chain=>supportedChains.Y6.includes(chain.chainId)))};return(0,react.useEffect)(()=>{updateShownChains()},[]),(0,react.useEffect)(()=>{updateShownChains()},[showOnlyTestnets]),(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)("div",{className:"inline-flex ml-4",children:[(0,jsx_runtime.jsx)("input",{checked:showOnlyTestnets,onChange:e=>handleTestnetsToggle(e.target.checked),type:"checkbox",name:"",id:"toggleShowOnlyTestnets",className:"mr-4"}),(0,jsx_runtime.jsx)("label",{htmlFor:"toggleShowOnlyTestnets",children:"Show only testnets"})]}),(0,jsx_runtime.jsx)("ul",{className:"mt-3",children:chainsList.map(chain=>(0,jsx_runtime.jsx)("li",{className:"w-full mb-2",children:(0,jsx_runtime.jsxs)("button",{onClick:()=>handleChainSelection(chain.chainId),className:"w-full inline-flex justify-start items-center  p-4 border-[1px] rounded-2xl hover:bg-gray-1 transition ".concat(isSelectedChain(chain.chainId)&&"bg-slate-100 hover:bg-slate-100"),children:[(0,jsx_runtime.jsx)("img",{src:chain.logoUrl,alt:"".concat(chain.label," icon"),className:"w-10 mr-4"}),(0,jsx_runtime.jsx)("p",{className:"text-xl font-medium p-0 m-0",children:chain.label}),isSelectedChain(chain.chainId)&&(0,jsx_runtime.jsx)("img",{src:"/icons/checked.png",alt:"Checked icon",className:"ml-auto"})]})},chain.chainId))})]})},Panel=()=>{let showPanel=(0,es.v9)(state=>state.panel.show),panelStep=(0,es.v9)(state=>state.panel.step),originChain=(0,es.v9)(state=>state.originTransactionInfo.chain),originToken=(0,es.v9)(state=>state.originTransactionInfo.token),destinyChain=(0,es.v9)(state=>state.destinyTransactionInfo.chain),destinyToken=(0,es.v9)(state=>state.destinyTransactionInfo.token),dispatch=(0,es.I0)(),[progressError,setProgressError]=(0,react.useState)(!1),stepsTitles=["Origin Token","Origin Chain","Destiny Token","Destiny Chain"];(0,react.useEffect)(()=>{0!==panelStep&&showPanel?5===panelStep&&(dispatch((0,panelSelector.$S)(!1)),dispatch((0,panelSelector.nj)(4))):(dispatch((0,panelSelector.$S)(!1)),dispatch((0,panelSelector.nj)(1)))},[panelStep,showPanel]),(0,react.useEffect)(()=>{checkValidSubmit()},[originChain,originToken,destinyChain,destinyToken]);let checkValidSubmit=()=>{originChain&&originToken&&destinyChain&&destinyToken?setProgressError(!1):setProgressError(!0)};return(0,jsx_runtime.jsxs)("section",{className:"absolute z-50 bg-white transform top-0 left-0 px-4 py-6 rounded-[40px] shadow-custom h-full w-full transition ".concat(showPanel?"translate-y-0":"translate-y-[200vh] opacity-0 visibility-hidden"),children:[(0,jsx_runtime.jsxs)("nav",{className:"w-full flex flex-col items-center",children:[(0,jsx_runtime.jsx)("button",{onClick:()=>dispatch((0,panelSelector.$S)(!1)),className:"mb-4",children:(0,jsx_runtime.jsx)("img",{src:"/icons/down-chevron.png",alt:"Close steps panel cta"})}),(0,jsx_runtime.jsx)(ProgressBar,{stepsNumber:4,currentStep:panelStep})]}),(0,jsx_runtime.jsxs)("section",{className:"mt-10",children:[(0,jsx_runtime.jsxs)("div",{className:"px-4 mb-10",children:[(0,jsx_runtime.jsx)("h1",{className:"font-medium text-2xl",children:stepsTitles[panelStep-1]}),(0,jsx_runtime.jsxs)("p",{className:"font-medium text-base text-gray-400 mt-2",children:["Select a ",stepsTitles[panelStep-1]]})]}),(()=>{switch(panelStep){case 1:return(0,jsx_runtime.jsx)(TokensList,{isOrigin:!0});case 2:return(0,jsx_runtime.jsx)(ChainsList,{isOrigin:!0});case 3:return(0,jsx_runtime.jsx)(TokensList,{isOrigin:!1});case 4:return(0,jsx_runtime.jsx)(ChainsList,{isOrigin:!1})}})()]}),(0,jsx_runtime.jsxs)("section",{className:"inline-flex flex justify-between",children:[(0,jsx_runtime.jsx)("button",{onClick:()=>dispatch((0,panelSelector.nj)(panelStep-1)),"aria-label":"Go to previous bridge step",className:"bg-black rounded-full p-4 absolute bottom-6 left-6",children:(0,jsx_runtime.jsx)("img",{src:"/icons/arrow-white.png",alt:"",className:"w-6"})}),(0,jsx_runtime.jsx)("button",{onClick:()=>dispatch((0,panelSelector.nj)(panelStep+1)),"aria-label":"Go to next bridge step",className:"bg-black rounded-full p-4 absolute bottom-6 right-6 rotate-180 ".concat(4===panelStep&&progressError&&"pointer-events-none cursor-auto bg-gray-100"),children:(0,jsx_runtime.jsx)("img",{src:"/icons/arrow-white.png",alt:"",className:"w-6"})})]})]})};var head=__webpack_require__(9008),head_default=__webpack_require__.n(head),core_esm=__webpack_require__(4713);let BridgePage=()=>{let{account,active}=(0,core_esm.Ge)(),{activate,deactivate}=(0,core_esm.Ge)(),getMaxSBRLAmount=()=>{activate(utils.Ev,()=>alert("error"))};return(0,jsx_runtime.jsxs)("div",{className:"max-w-md m-auto pb-20",children:[(0,jsx_runtime.jsxs)(head_default(),{children:[(0,jsx_runtime.jsx)("title",{children:"StableBridge - Bridge tokens between blockchains"}),(0,jsx_runtime.jsx)("meta",{name:"description",content:"Bridge tokens between blockchains"}),(0,jsx_runtime.jsx)("link",{rel:"icon",href:"/favicon.svg"})]}),(0,jsx_runtime.jsx)(_01_atoms.Jb,{}),(0,jsx_runtime.jsxs)("main",{className:"relative bg-white px-4 py-10 rounded-[40px] shadow-custom",children:[(0,jsx_runtime.jsxs)("div",{className:"flex-col z-40",children:[(0,jsx_runtime.jsx)("p",{className:"font-semibold text-base mb-2 ml-6",children:"Origin"}),(0,jsx_runtime.jsxs)("div",{className:"bg-slate-50 border-[1px] border-gray-3 rounded-3xl p-2",children:[(0,jsx_runtime.jsxs)("div",{className:"w-full flex mb-2",children:[(0,jsx_runtime.jsx)(_01_atoms.IO,{}),(0,jsx_runtime.jsx)(_01_atoms.gZ,{})]}),(0,jsx_runtime.jsxs)("div",{className:"inline-flex w-full",children:[(0,jsx_runtime.jsx)("input",{type:"text",name:"originVal",id:"originVal",placeholder:"0.00000",className:"text-2xl font-medium flex-1 bg-transparent mx-4 md:mr-8 placeholder:opacity-40 focus:opacity-100 focus:outline-none"}),(0,jsx_runtime.jsx)("button",{onClick:getMaxSBRLAmount,className:"text-sm py-2 px-2.5 border-[1px] rounded-3xl mt-4 mb-2 mr-2 -ml-4 hover:bg-gray-2 transition",children:"Max"})]})]})]}),(0,jsx_runtime.jsxs)("div",{className:"flex-col mt-6 z-40",children:[(0,jsx_runtime.jsx)("p",{className:"font-semibold text-base mb-2 ml-6",children:"Destiny"}),(0,jsx_runtime.jsxs)("div",{className:"bg-slate-50 border-[1px] border-gray-3 rounded-3xl p-2",children:[(0,jsx_runtime.jsxs)("div",{className:"w-full flex mb-2",children:[(0,jsx_runtime.jsx)(_01_atoms.C_,{}),(0,jsx_runtime.jsx)(_01_atoms._8,{})]}),(0,jsx_runtime.jsxs)("div",{className:"inline-flex w-full",children:[(0,jsx_runtime.jsx)("input",{type:"text",name:"originVal",id:"originVal",placeholder:"0.00000",className:"text-2xl font-medium flex-1 bg-transparent mx-4 md:mr-8 placeholder:opacity-40 focus:opacity-100 focus:outline-none"}),(0,jsx_runtime.jsx)("button",{onClick:getMaxSBRLAmount,className:"text-sm py-2 px-2.5 border-[1px] rounded-3xl mt-4 mb-2 mr-2 -ml-4 hover:bg-gray-2 transition",children:"Max"})]})]})]}),(0,jsx_runtime.jsx)("section",{className:"w-full mt-7 pt-7 border-t-[1px]",children:(0,jsx_runtime.jsx)(_01_atoms.NK,{})}),(0,jsx_runtime.jsx)(Panel,{})]})]})};var bridge=BridgePage},137:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Ev:function(){return InjectedConnect},$V:function(){return getEstimatedGasFee},If:function(){return switchNetwork}});var lib_esm=__webpack_require__(6441),supportedChains=__webpack_require__(4781);let INFURA_KEY="eb629d0bc0144aa2abb2ff1593e12155";if(void 0===INFURA_KEY)throw Error("REACT_APP_INFURA_KEY must be a defined environment variable");let FALLBACK_URLS={[supportedChains.HL.ARBITRUM_ONE]:["https://arb1.arbitrum.io/rpc","https://arbitrum.public-rpc.com"],[supportedChains.HL.GOERLI]:["https://rpc.goerli.mudit.blog/","https://rpc.ankr.com/eth_goerli"],[supportedChains.HL.FANTOM]:["https://rpc.ftm.tools"],[supportedChains.HL.POLYGON]:["https://polygon-rpc.com/","https://rpc-mainnet.matic.network","https://matic-mainnet.chainstacklabs.com","https://rpc-mainnet.maticvigil.com","https://rpc-mainnet.matic.quiknode.pro","https://matic-mainnet-full-rpc.bwarelabs.com"],[supportedChains.HL.POLYGON_MUMBAI]:["https://matic-mumbai.chainstacklabs.com","https://rpc-mumbai.maticvigil.com","https://matic-testnet-archive-rpc.bwarelabs.com"]},RPC_URLS={[supportedChains.HL.ARBITRUM_ONE]:[...FALLBACK_URLS[supportedChains.HL.ARBITRUM_ONE]],[supportedChains.HL.FANTOM]:[...FALLBACK_URLS[supportedChains.HL.FANTOM]],[supportedChains.HL.GOERLI]:["https://goerli.infura.io/v3/".concat(INFURA_KEY),...FALLBACK_URLS[supportedChains.HL.GOERLI]],[supportedChains.HL.POLYGON]:["https://polygon-mainnet.infura.io/v3/".concat(INFURA_KEY),...FALLBACK_URLS[supportedChains.HL.POLYGON]],[supportedChains.HL.POLYGON_MUMBAI]:["https://polygon-mumbai.infura.io/v3/".concat(INFURA_KEY),...FALLBACK_URLS[supportedChains.HL.POLYGON_MUMBAI]]};var injected_connector_esm=__webpack_require__(9857);__webpack_require__(3453);var process=__webpack_require__(3454);let InjectedConnect=new injected_connector_esm._k({supportedChainIds:[1,3,137,80001]}),switchNetwork=async chainId=>{if(chainId){let chainIdInHex=lib_esm.$P(chainId);try{await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:chainIdInHex}]})}catch(e){if(4902===e.code)try{let chainInfo=supportedChains.df.find(chain=>chain.chainId===chainId);if(!chainInfo)return{error:"Not supported chain"};await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:chainIdInHex,chainName:chainInfo.nativeCurrency.name,rpcUrls:[getRpcUrl(chainId)]}]})}catch(error){return{error}}}}},getRpcUrl=chainId=>{switch(chainId){case supportedChains.HL.ARBITRUM_ONE:case supportedChains.HL.FANTOM:case supportedChains.HL.GOERLI:case supportedChains.HL.POLYGON:case supportedChains.HL.POLYGON_MUMBAI:return RPC_URLS[chainId][0];default:return FALLBACK_URLS[chainId][0]}},getEstimatedGasFee=async(chainId,tokenId,amount)=>{let myHeaders=new Headers;myHeaders.append("Content-Type","application/json");let res=await fetch("".concat(process.env.NEXT_PUBLIC_BACKEND_URL,"/estimated-gas"),{method:"POST",headers:myHeaders,body:JSON.stringify({networkId:chainId,token:tokenId,amount:amount})}),data=await res.json();return data}}},function(__webpack_require__){__webpack_require__.O(0,[996,857,548,774,888,179],function(){return __webpack_require__(__webpack_require__.s=5875)}),_N_E=__webpack_require__.O()}]);